/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={465:function(t){t.exports=function(){"use strict";function t(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function e(e,n){return e.get(t(e,n))}function n(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}const r={},i=t=>new Promise((e=>{if(!t)return e();const n=window.scrollX,i=window.scrollY;r.restoreFocusTimeout=setTimeout((()=>{r.previousActiveElement instanceof HTMLElement?(r.previousActiveElement.focus(),r.previousActiveElement=null):document.body&&document.body.focus(),e()}),100),window.scrollTo(n,i)})),s="swal2-",o=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"].reduce(((t,e)=>(t[e]=s+e,t)),{}),a=["success","warning","info","question","error"].reduce(((t,e)=>(t[e]=s+e,t)),{}),c="SweetAlert2:",l=t=>t.charAt(0).toUpperCase()+t.slice(1),u=t=>{console.warn(`${c} ${"object"==typeof t?t.join(" "):t}`)},h=t=>{console.error(`${c} ${t}`)},d=[],f=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var n;n=`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`,d.includes(n)||(d.push(n),u(n))},p=t=>"function"==typeof t?t():t,m=t=>t&&"function"==typeof t.toPromise,g=t=>m(t)?t.toPromise():Promise.resolve(t),w=t=>t&&Promise.resolve(t)===t,y=()=>document.body.querySelector(`.${o.container}`),v=t=>{const e=y();return e?e.querySelector(t):null},b=t=>v(`.${t}`),E=()=>b(o.popup),T=()=>b(o.icon),_=()=>b(o.title),C=()=>b(o["html-container"]),k=()=>b(o.image),S=()=>b(o["progress-steps"]),I=()=>b(o["validation-message"]),x=()=>v(`.${o.actions} .${o.confirm}`),A=()=>v(`.${o.actions} .${o.cancel}`),L=()=>v(`.${o.actions} .${o.deny}`),D=()=>v(`.${o.loader}`),N=()=>b(o.actions),O=()=>b(o.footer),P=()=>b(o["timer-progress-bar"]),M=()=>b(o.close),R=()=>{const t=E();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort(((t,e)=>{const n=parseInt(t.getAttribute("tabindex")||"0"),r=parseInt(e.getAttribute("tabindex")||"0");return n>r?1:n<r?-1:0})),r=t.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),i=Array.from(r).filter((t=>"-1"!==t.getAttribute("tabindex")));return[...new Set(n.concat(i))].filter((t=>tt(t)))},V=()=>B(document.body,o.shown)&&!B(document.body,o["toast-shown"])&&!B(document.body,o["no-backdrop"]),F=()=>{const t=E();return!!t&&B(t,o.toast)},j=(t,e)=>{if(t.textContent="",e){const n=(new DOMParser).parseFromString(e,"text/html"),r=n.querySelector("head");r&&Array.from(r.childNodes).forEach((e=>{t.appendChild(e)}));const i=n.querySelector("body");i&&Array.from(i.childNodes).forEach((e=>{e instanceof HTMLVideoElement||e instanceof HTMLAudioElement?t.appendChild(e.cloneNode(!0)):t.appendChild(e)}))}},B=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let e=0;e<n.length;e++)if(!t.classList.contains(n[e]))return!1;return!0},U=(t,e,n)=>{if(((t,e)=>{Array.from(t.classList).forEach((n=>{Object.values(o).includes(n)||Object.values(a).includes(n)||Object.values(e.showClass||{}).includes(n)||t.classList.remove(n)}))})(t,e),!e.customClass)return;const r=e.customClass[n];r&&("string"==typeof r||r.forEach?H(t,r):u(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`))},$=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${o.popup} > .${o[e]}`);case"checkbox":return t.querySelector(`.${o.popup} > .${o.checkbox} input`);case"radio":return t.querySelector(`.${o.popup} > .${o.radio} input:checked`)||t.querySelector(`.${o.popup} > .${o.radio} input:first-child`);case"range":return t.querySelector(`.${o.popup} > .${o.range} input`);default:return t.querySelector(`.${o.popup} > .${o.input}`)}},q=t=>{if(t.focus(),"file"!==t.type){const e=t.value;t.value="",t.value=e}},z=(t,e,n)=>{t&&e&&("string"==typeof e&&(e=e.split(/\s+/).filter(Boolean)),e.forEach((e=>{Array.isArray(t)?t.forEach((t=>{n?t.classList.add(e):t.classList.remove(e)})):n?t.classList.add(e):t.classList.remove(e)})))},H=(t,e)=>{z(t,e,!0)},K=(t,e)=>{z(t,e,!1)},G=(t,e)=>{const n=Array.from(t.children);for(let t=0;t<n.length;t++){const r=n[t];if(r instanceof HTMLElement&&B(r,e))return r}},W=(t,e,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||0===parseInt(n)?t.style.setProperty(e,"number"==typeof n?`${n}px`:n):t.style.removeProperty(e)},Q=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex";t&&(t.style.display=e)},Y=t=>{t&&(t.style.display="none")},X=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";t&&new MutationObserver((()=>{Z(t,t.innerHTML,e)})).observe(t,{childList:!0,subtree:!0})},J=(t,e,n,r)=>{const i=t.querySelector(e);i&&i.style.setProperty(n,r)},Z=function(t,e){e?Q(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):Y(t)},tt=t=>!(!t||!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),et=t=>!!(t.scrollHeight>t.clientHeight),nt=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||r>0},rt=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=P();n&&tt(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout((()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"}),10))},it=`\n <div aria-labelledby="${o.title}" aria-describedby="${o["html-container"]}" class="${o.popup}" tabindex="-1">\n   <button type="button" class="${o.close}"></button>\n   <ul class="${o["progress-steps"]}"></ul>\n   <div class="${o.icon}"></div>\n   <img class="${o.image}" />\n   <h2 class="${o.title}" id="${o.title}"></h2>\n   <div class="${o["html-container"]}" id="${o["html-container"]}"></div>\n   <input class="${o.input}" id="${o.input}" />\n   <input type="file" class="${o.file}" />\n   <div class="${o.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${o.select}" id="${o.select}"></select>\n   <div class="${o.radio}"></div>\n   <label class="${o.checkbox}">\n     <input type="checkbox" id="${o.checkbox}" />\n     <span class="${o.label}"></span>\n   </label>\n   <textarea class="${o.textarea}" id="${o.textarea}"></textarea>\n   <div class="${o["validation-message"]}" id="${o["validation-message"]}"></div>\n   <div class="${o.actions}">\n     <div class="${o.loader}"></div>\n     <button type="button" class="${o.confirm}"></button>\n     <button type="button" class="${o.deny}"></button>\n     <button type="button" class="${o.cancel}"></button>\n   </div>\n   <div class="${o.footer}"></div>\n   <div class="${o["timer-progress-bar-container"]}">\n     <div class="${o["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),st=()=>{r.currentInstance.resetValidationMessage()},ot=t=>{const e=(()=>{const t=y();return!!t&&(t.remove(),K([document.documentElement,document.body],[o["no-backdrop"],o["toast-shown"],o["has-column"]]),!0)})();if("undefined"==typeof window||"undefined"==typeof document)return void h("SweetAlert2 requires document to initialize");const n=document.createElement("div");n.className=o.container,e&&H(n,o["no-transition"]),j(n,it),n.dataset.swal2Theme=t.theme;const r="string"==typeof(i=t.target)?document.querySelector(i):i;var i;r.appendChild(n),(t=>{const e=E();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")})(t),(t=>{"rtl"===window.getComputedStyle(t).direction&&H(y(),o.rtl)})(r),(()=>{const t=E(),e=G(t,o.input),n=G(t,o.file),r=t.querySelector(`.${o.range} input`),i=t.querySelector(`.${o.range} output`),s=G(t,o.select),a=t.querySelector(`.${o.checkbox} input`),c=G(t,o.textarea);e.oninput=st,n.onchange=st,s.onchange=st,a.onchange=st,c.oninput=st,r.oninput=()=>{st(),i.value=r.value},r.onchange=()=>{st(),i.value=r.value}})()},at=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):"object"==typeof t?ct(t,e):t&&j(e,t)},ct=(t,e)=>{t.jquery?lt(e,t):j(e,t.toString())},lt=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},ut=(t,e)=>{const n=N(),r=D();n&&r&&(e.showConfirmButton||e.showDenyButton||e.showCancelButton?Q(n):Y(n),U(n,e,"actions"),function(t,e,n){const r=x(),i=L(),s=A();r&&i&&s&&(ht(r,"confirm",n),ht(i,"deny",n),ht(s,"cancel",n),function(t,e,n,r){r.buttonsStyling?(H([t,e,n],o.styled),r.confirmButtonColor&&(t.style.backgroundColor=r.confirmButtonColor,H(t,o["default-outline"])),r.denyButtonColor&&(e.style.backgroundColor=r.denyButtonColor,H(e,o["default-outline"])),r.cancelButtonColor&&(n.style.backgroundColor=r.cancelButtonColor,H(n,o["default-outline"]))):K([t,e,n],o.styled)}(r,i,s,n),n.reverseButtons&&(n.toast?(t.insertBefore(s,r),t.insertBefore(i,r)):(t.insertBefore(s,e),t.insertBefore(i,e),t.insertBefore(r,e))))}(n,r,e),j(r,e.loaderHtml||""),U(r,e,"loader"))};function ht(t,e,n){const r=l(e);Z(t,n[`show${r}Button`],"inline-block"),j(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=o[e],U(t,n,`${e}Button`)}const dt=(t,e)=>{const n=y();n&&(function(t,e){"string"==typeof e?t.style.background=e:e||H([document.documentElement,document.body],o["no-backdrop"])}(n,e.backdrop),function(t,e){e&&(e in o?H(t,o[e]):(u('The "position" parameter is not valid, defaulting to "center"'),H(t,o.center)))}(n,e.position),function(t,e){e&&H(t,o[`grow-${e}`])}(n,e.grow),U(n,e,"container"))};var ft={innerParams:new WeakMap,domCache:new WeakMap};const pt=["input","file","range","select","radio","checkbox","textarea"],mt=t=>{if(!t.input)return;if(!Tt[t.input])return void h(`Unexpected type of input! Expected ${Object.keys(Tt).join(" | ")}, got "${t.input}"`);const e=bt(t.input);if(!e)return;const n=Tt[t.input](e,t);Q(e),t.inputAutoFocus&&setTimeout((()=>{q(n)}))},gt=(t,e)=>{const n=E();if(!n)return;const r=$(n,t);if(r){(t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}})(r);for(const t in e)r.setAttribute(t,e[t])}},wt=t=>{if(!t.input)return;const e=bt(t.input);e&&U(e,t,"input")},yt=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},vt=(t,e,n)=>{if(n.inputLabel){const r=document.createElement("label"),i=o["input-label"];r.setAttribute("for",t.id),r.className=i,"object"==typeof n.customClass&&H(r,n.customClass.inputLabel),r.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",r)}},bt=t=>{const e=E();if(e)return G(e,o[t]||o.input)},Et=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:w(e)||u(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},Tt={};Tt.text=Tt.email=Tt.password=Tt.number=Tt.tel=Tt.url=Tt.search=Tt.date=Tt["datetime-local"]=Tt.time=Tt.week=Tt.month=(t,e)=>(Et(t,e.inputValue),vt(t,t,e),yt(t,e),t.type=e.input,t),Tt.file=(t,e)=>(vt(t,t,e),yt(t,e),t),Tt.range=(t,e)=>{const n=t.querySelector("input"),r=t.querySelector("output");return Et(n,e.inputValue),n.type=e.input,Et(r,e.inputValue),vt(n,t,e),t},Tt.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");j(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return vt(t,t,e),t},Tt.radio=t=>(t.textContent="",t),Tt.checkbox=(t,e)=>{const n=$(E(),"checkbox");n.value="1",n.checked=Boolean(e.inputValue);const r=t.querySelector("span");return j(r,e.inputPlaceholder||e.inputLabel),n},Tt.textarea=(t,e)=>{Et(t,e.inputValue),yt(t,e),vt(t,t,e);return setTimeout((()=>{if("MutationObserver"in window){const n=parseInt(window.getComputedStyle(E()).width);new MutationObserver((()=>{if(!document.body.contains(t))return;const r=t.offsetWidth+(i=t,parseInt(window.getComputedStyle(i).marginLeft)+parseInt(window.getComputedStyle(i).marginRight));var i;r>n?E().style.width=`${r}px`:W(E(),"width",e.width)})).observe(t,{attributes:!0,attributeFilter:["style"]})}})),t};const _t=(t,e)=>{const n=C();n&&(X(n),U(n,e,"htmlContainer"),e.html?(at(e.html,n),Q(n,"block")):e.text?(n.textContent=e.text,Q(n,"block")):Y(n),((t,e)=>{const n=E();if(!n)return;const r=ft.innerParams.get(t),i=!r||e.input!==r.input;pt.forEach((t=>{const r=G(n,o[t]);r&&(gt(t,e.inputAttributes),r.className=o[t],i&&Y(r))})),e.input&&(i&&mt(e),wt(e))})(t,e))},Ct=(t,e)=>{for(const[n,r]of Object.entries(a))e.icon!==n&&K(t,r);H(t,e.icon&&a[e.icon]),It(t,e),kt(),U(t,e,"icon")},kt=()=>{const t=E();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let t=0;t<n.length;t++)n[t].style.backgroundColor=e},St=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,r="";e.iconHtml?r=xt(e.iconHtml):"success"===e.icon?(r='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',n=n.replace(/ style=".*?"/g,"")):"error"===e.icon?r='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':e.icon&&(r=xt({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==r.trim()&&j(t,r)},It=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])J(t,n,"background-color",e.iconColor);J(t,".swal2-success-ring","border-color",e.iconColor)}},xt=t=>`<div class="${o["icon-content"]}">${t}</div>`;let At=!1,Lt=0,Dt=0,Nt=0,Ot=0;const Pt=t=>{const e=E();if(t.target===e||T().contains(t.target)){At=!0;const n=Vt(t);Lt=n.clientX,Dt=n.clientY,Nt=parseInt(e.style.insetInlineStart)||0,Ot=parseInt(e.style.insetBlockStart)||0,H(e,"swal2-dragging")}},Mt=t=>{const e=E();if(At){let{clientX:n,clientY:r}=Vt(t);e.style.insetInlineStart=`${Nt+(n-Lt)}px`,e.style.insetBlockStart=`${Ot+(r-Dt)}px`}},Rt=()=>{const t=E();At=!1,K(t,"swal2-dragging")},Vt=t=>{let e=0,n=0;return t.type.startsWith("mouse")?(e=t.clientX,n=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,n=t.touches[0].clientY),{clientX:e,clientY:n}},Ft=(t,e)=>{const n=y(),r=E();if(n&&r){if(e.toast){W(n,"width",e.width),r.style.width="100%";const t=D();t&&r.insertBefore(t,T())}else W(r,"width",e.width);W(r,"padding",e.padding),e.color&&(r.style.color=e.color),e.background&&(r.style.background=e.background),Y(I()),jt(r,e),e.draggable&&!e.toast?(H(r,o.draggable),(t=>{t.addEventListener("mousedown",Pt),document.body.addEventListener("mousemove",Mt),t.addEventListener("mouseup",Rt),t.addEventListener("touchstart",Pt),document.body.addEventListener("touchmove",Mt),t.addEventListener("touchend",Rt)})(r)):(K(r,o.draggable),(t=>{t.removeEventListener("mousedown",Pt),document.body.removeEventListener("mousemove",Mt),t.removeEventListener("mouseup",Rt),t.removeEventListener("touchstart",Pt),document.body.removeEventListener("touchmove",Mt),t.removeEventListener("touchend",Rt)})(r))}},jt=(t,e)=>{const n=e.showClass||{};t.className=`${o.popup} ${tt(t)?n.popup:""}`,e.toast?(H([document.documentElement,document.body],o["toast-shown"]),H(t,o.toast)):H(t,o.modal),U(t,e,"popup"),"string"==typeof e.customClass&&H(t,e.customClass),e.icon&&H(t,o[`icon-${e.icon}`])},Bt=t=>{const e=document.createElement("li");return H(e,o["progress-step"]),j(e,t),e},Ut=t=>{const e=document.createElement("li");return H(e,o["progress-step-line"]),t.progressStepsDistance&&W(e,"width",t.progressStepsDistance),e},$t=(t,e)=>{Ft(0,e),dt(0,e),((t,e)=>{const n=S();if(!n)return;const{progressSteps:r,currentProgressStep:i}=e;r&&0!==r.length&&void 0!==i?(Q(n),n.textContent="",i>=r.length&&u("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach(((t,s)=>{const a=Bt(t);if(n.appendChild(a),s===i&&H(a,o["active-progress-step"]),s!==r.length-1){const t=Ut(e);n.appendChild(t)}}))):Y(n)})(0,e),((t,e)=>{const n=ft.innerParams.get(t),r=T();if(r){if(n&&e.icon===n.icon)return St(r,e),void Ct(r,e);if(e.icon||e.iconHtml){if(e.icon&&-1===Object.keys(a).indexOf(e.icon))return h(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),void Y(r);Q(r),St(r,e),Ct(r,e),H(r,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",kt)}else Y(r)}})(t,e),((t,e)=>{const n=k();n&&(e.imageUrl?(Q(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),W(n,"width",e.imageWidth),W(n,"height",e.imageHeight),n.className=o.image,U(n,e,"image")):Y(n))})(0,e),((t,e)=>{const n=_();n&&(X(n),Z(n,e.title||e.titleText,"block"),e.title&&at(e.title,n),e.titleText&&(n.innerText=e.titleText),U(n,e,"title"))})(0,e),((t,e)=>{const n=M();n&&(j(n,e.closeButtonHtml||""),U(n,e,"closeButton"),Z(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))})(0,e),_t(t,e),ut(0,e),((t,e)=>{const n=O();n&&(X(n),Z(n,e.footer,"block"),e.footer&&at(e.footer,n),U(n,e,"footer"))})(0,e);const n=E();"function"==typeof e.didRender&&n&&e.didRender(n),r.eventEmitter.emit("didRender",n)},qt=()=>{var t;return null===(t=x())||void 0===t?void 0:t.click()},zt=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Ht=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},Kt=(t,e)=>{var n;const r=R();if(r.length)return(t+=e)===r.length?t=0:-1===t&&(t=r.length-1),void r[t].focus();null===(n=E())||void 0===n||n.focus()},Gt=["ArrowRight","ArrowDown"],Wt=["ArrowLeft","ArrowUp"],Qt=(t,e,n)=>{t&&(e.isComposing||229===e.keyCode||(t.stopKeydownPropagation&&e.stopPropagation(),"Enter"===e.key?Yt(e,t):"Tab"===e.key?Xt(e):[...Gt,...Wt].includes(e.key)?Jt(e.key):"Escape"===e.key&&Zt(e,t,n)))},Yt=(t,e)=>{if(!p(e.allowEnterKey))return;const n=$(E(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;qt(),t.preventDefault()}},Xt=t=>{const e=t.target,n=R();let r=-1;for(let t=0;t<n.length;t++)if(e===n[t]){r=t;break}t.shiftKey?Kt(r,-1):Kt(r,1),t.stopPropagation(),t.preventDefault()},Jt=t=>{const e=N(),n=x(),r=L(),i=A();if(!(e&&n&&r&&i))return;const s=[n,r,i];if(document.activeElement instanceof HTMLElement&&!s.includes(document.activeElement))return;const o=Gt.includes(t)?"nextElementSibling":"previousElementSibling";let a=document.activeElement;if(a){for(let t=0;t<e.children.length;t++){if(a=a[o],!a)return;if(a instanceof HTMLButtonElement&&tt(a))break}a instanceof HTMLButtonElement&&a.focus()}},Zt=(t,e,n)=>{p(e.allowEscapeKey)&&(t.preventDefault(),n(zt.esc))};var te={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const ee=()=>{Array.from(document.body.children).forEach((t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")}))},ne="undefined"!=typeof window&&!!window.GestureEvent,re=()=>{const t=y();if(!t)return;let e;t.ontouchstart=t=>{e=ie(t)},t.ontouchmove=t=>{e&&(t.preventDefault(),t.stopPropagation())}},ie=t=>{const e=t.target,n=y(),r=C();return!(!n||!r||se(t)||oe(t)||e!==n&&(et(n)||!(e instanceof HTMLElement)||"INPUT"===e.tagName||"TEXTAREA"===e.tagName||et(r)&&r.contains(e)))},se=t=>t.touches&&t.touches.length&&"stylus"===t.touches[0].touchType,oe=t=>t.touches&&t.touches.length>1;let ae=null;const ce=t=>{null===ae&&(document.body.scrollHeight>window.innerHeight||"scroll"===t)&&(ae=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${ae+(()=>{const t=document.createElement("div");t.className=o["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e})()}px`)};function le(t,e,n,s){F()?we(t,s):(i(n).then((()=>we(t,s))),Ht(r)),ne?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),V()&&(null!==ae&&(document.body.style.paddingRight=`${ae}px`,ae=null),(()=>{if(B(document.body,o.iosfix)){const t=parseInt(document.body.style.top,10);K(document.body,o.iosfix),document.body.style.top="",document.body.scrollTop=-1*t}})(),ee()),K([document.documentElement,document.body],[o.shown,o["height-auto"],o["no-backdrop"],o["toast-shown"]])}function ue(t){t=pe(t);const e=te.swalPromiseResolve.get(this),n=he(this);this.isAwaitingPromise?t.isDismissed||(fe(this),e(t)):n&&e(t)}const he=t=>{const e=E();if(!e)return!1;const n=ft.innerParams.get(t);if(!n||B(e,n.hideClass.popup))return!1;K(e,n.showClass.popup),H(e,n.hideClass.popup);const r=y();return K(r,n.showClass.backdrop),H(r,n.hideClass.backdrop),me(t,e,n),!0};function de(t){const e=te.swalPromiseReject.get(this);fe(this),e&&e(t)}const fe=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,ft.innerParams.get(t)||t._destroy())},pe=t=>void 0===t?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),me=(t,e,n)=>{var i;const s=y(),o=nt(e);"function"==typeof n.willClose&&n.willClose(e),null===(i=r.eventEmitter)||void 0===i||i.emit("willClose",e),o?ge(t,e,s,n.returnFocus,n.didClose):le(t,s,n.returnFocus,n.didClose)},ge=(t,e,n,i,s)=>{r.swalCloseEventFinishedCallback=le.bind(null,t,n,i,s);const o=function(t){var n;t.target===e&&(null===(n=r.swalCloseEventFinishedCallback)||void 0===n||n.call(r),delete r.swalCloseEventFinishedCallback,e.removeEventListener("animationend",o),e.removeEventListener("transitionend",o))};e.addEventListener("animationend",o),e.addEventListener("transitionend",o)},we=(t,e)=>{setTimeout((()=>{var n;"function"==typeof e&&e.bind(t.params)(),null===(n=r.eventEmitter)||void 0===n||n.emit("didClose"),t._destroy&&t._destroy()}))},ye=t=>{let e=E();if(e||new Jn,e=E(),!e)return;const n=D();F()?Y(T()):ve(e,t),Q(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},ve=(t,e)=>{const n=N(),r=D();n&&r&&(!e&&tt(x())&&(e=x()),Q(n),e&&(Y(e),r.setAttribute("data-button-to-replace",e.className),n.insertBefore(r,e)),H([t,n],o.loading))},be=t=>t.checked?1:0,Ee=t=>t.checked?t.value:null,Te=t=>t.files&&t.files.length?null!==t.getAttribute("multiple")?t.files:t.files[0]:null,_e=(t,e)=>{const n=E();if(!n)return;const r=t=>{"select"===e.input?function(t,e,n){const r=G(t,o.select);if(!r)return;const i=(t,e,r)=>{const i=document.createElement("option");i.value=r,j(i,e),i.selected=Se(r,n.inputValue),t.appendChild(i)};e.forEach((t=>{const e=t[0],n=t[1];if(Array.isArray(n)){const t=document.createElement("optgroup");t.label=e,t.disabled=!1,r.appendChild(t),n.forEach((e=>i(t,e[1],e[0])))}else i(r,n,e)})),r.focus()}(n,ke(t),e):"radio"===e.input&&function(t,e,n){const r=G(t,o.radio);if(!r)return;e.forEach((t=>{const e=t[0],i=t[1],s=document.createElement("input"),a=document.createElement("label");s.type="radio",s.name=o.radio,s.value=e,Se(e,n.inputValue)&&(s.checked=!0);const c=document.createElement("span");j(c,i),c.className=o.label,a.appendChild(s),a.appendChild(c),r.appendChild(a)}));const i=r.querySelectorAll("input");i.length&&i[0].focus()}(n,ke(t),e)};m(e.inputOptions)||w(e.inputOptions)?(ye(x()),g(e.inputOptions).then((e=>{t.hideLoading(),r(e)}))):"object"==typeof e.inputOptions?r(e.inputOptions):h("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof e.inputOptions)},Ce=(t,e)=>{const n=t.getInput();n&&(Y(n),g(e.inputValue).then((r=>{n.value="number"===e.input?`${parseFloat(r)||0}`:`${r}`,Q(n),n.focus(),t.hideLoading()})).catch((e=>{h(`Error in inputValue promise: ${e}`),n.value="",Q(n),n.focus(),t.hideLoading()})))};const ke=t=>{const e=[];return t instanceof Map?t.forEach(((t,n)=>{let r=t;"object"==typeof r&&(r=ke(r)),e.push([n,r])})):Object.keys(t).forEach((n=>{let r=t[n];"object"==typeof r&&(r=ke(r)),e.push([n,r])})),e},Se=(t,e)=>!!e&&e.toString()===t.toString(),Ie=(t,e)=>{const n=ft.innerParams.get(t);if(!n.input)return void h(`The "input" parameter is needed to be set when using returnInputValueOn${l(e)}`);const r=t.getInput(),i=((t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return be(n);case"radio":return Ee(n);case"file":return Te(n);default:return e.inputAutoTrim?n.value.trim():n.value}})(t,n);n.inputValidator?xe(t,i,e):r&&!r.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||r.validationMessage)):"deny"===e?Ae(t,i):Ne(t,i)},xe=(t,e,n)=>{const r=ft.innerParams.get(t);t.disableInput(),Promise.resolve().then((()=>g(r.inputValidator(e,r.validationMessage)))).then((r=>{t.enableButtons(),t.enableInput(),r?t.showValidationMessage(r):"deny"===n?Ae(t,e):Ne(t,e)}))},Ae=(t,e)=>{const n=ft.innerParams.get(t||void 0);n.showLoaderOnDeny&&ye(L()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then((()=>g(n.preDeny(e,n.validationMessage)))).then((n=>{!1===n?(t.hideLoading(),fe(t)):t.close({isDenied:!0,value:void 0===n?e:n})})).catch((e=>De(t||void 0,e)))):t.close({isDenied:!0,value:e})},Le=(t,e)=>{t.close({isConfirmed:!0,value:e})},De=(t,e)=>{t.rejectPromise(e)},Ne=(t,e)=>{const n=ft.innerParams.get(t||void 0);n.showLoaderOnConfirm&&ye(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then((()=>g(n.preConfirm(e,n.validationMessage)))).then((n=>{tt(I())||!1===n?(t.hideLoading(),fe(t)):Le(t,void 0===n?e:n)})).catch((e=>De(t||void 0,e)))):Le(t,e)};function Oe(){const t=ft.innerParams.get(this);if(!t)return;const e=ft.domCache.get(this);Y(e.loader),F()?t.icon&&Q(T()):Pe(e),K([e.popup,e.actions],o.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const Pe=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?Q(e[0],"inline-block"):!tt(x())&&!tt(L())&&!tt(A())&&Y(t.actions)};function Me(){const t=ft.innerParams.get(this),e=ft.domCache.get(this);return e?$(e.popup,t.input):null}function Re(t,e,n){const r=ft.domCache.get(t);e.forEach((t=>{r[t].disabled=n}))}function Ve(t,e){const n=E();if(n&&t)if("radio"===t.type){const t=n.querySelectorAll(`[name="${o.radio}"]`);for(let n=0;n<t.length;n++)t[n].disabled=e}else t.disabled=e}function Fe(){Re(this,["confirmButton","denyButton","cancelButton"],!1)}function je(){Re(this,["confirmButton","denyButton","cancelButton"],!0)}function Be(){Ve(this.getInput(),!1)}function Ue(){Ve(this.getInput(),!0)}function $e(t){const e=ft.domCache.get(this),n=ft.innerParams.get(this);j(e.validationMessage,t),e.validationMessage.className=o["validation-message"],n.customClass&&n.customClass.validationMessage&&H(e.validationMessage,n.customClass.validationMessage),Q(e.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",o["validation-message"]),q(r),H(r,o.inputerror))}function qe(){const t=ft.domCache.get(this);t.validationMessage&&Y(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),K(e,o.inputerror))}const ze={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},He=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],Ke={allowEnterKey:void 0},Ge=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],We=t=>Object.prototype.hasOwnProperty.call(ze,t),Qe=t=>-1!==He.indexOf(t),Ye=t=>Ke[t],Xe=t=>{We(t)||u(`Unknown parameter "${t}"`)},Je=t=>{Ge.includes(t)&&u(`The parameter "${t}" is incompatible with toasts`)},Ze=t=>{const e=Ye(t);e&&f(t,e)},tn=t=>{!1===t.backdrop&&t.allowOutsideClick&&u('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","borderless"].includes(t.theme)&&u(`Invalid theme "${t.theme}". Expected "light", "dark", "auto", or "borderless"`);for(const e in t)Xe(e),t.toast&&Je(e),Ze(e)};function en(t){const e=y(),n=E(),r=ft.innerParams.get(this);if(!n||B(n,r.hideClass.popup))return void u("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const i=nn(t),s=Object.assign({},r,i);tn(s),e.dataset.swal2Theme=s.theme,$t(this,s),ft.innerParams.set(this,s),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const nn=t=>{const e={};return Object.keys(t).forEach((n=>{Qe(n)?e[n]=t[n]:u(`Invalid parameter to update: ${n}`)})),e};function rn(){const t=ft.domCache.get(this),e=ft.innerParams.get(this);e?(t.popup&&r.swalCloseEventFinishedCallback&&(r.swalCloseEventFinishedCallback(),delete r.swalCloseEventFinishedCallback),"function"==typeof e.didDestroy&&e.didDestroy(),r.eventEmitter.emit("didDestroy"),sn(this)):on(this)}const sn=t=>{on(t),delete t.params,delete r.keydownHandler,delete r.keydownTarget,delete r.currentInstance},on=t=>{t.isAwaitingPromise?(an(ft,t),t.isAwaitingPromise=!0):(an(te,t),an(ft,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},an=(t,e)=>{for(const n in t)t[n].delete(e)};var cn=Object.freeze({__proto__:null,_destroy:rn,close:ue,closeModal:ue,closePopup:ue,closeToast:ue,disableButtons:je,disableInput:Ue,disableLoading:Oe,enableButtons:Fe,enableInput:Be,getInput:Me,handleAwaitingPromise:fe,hideLoading:Oe,rejectPromise:de,resetValidationMessage:qe,showValidationMessage:$e,update:en});const ln=(t,e,n)=>{e.popup.onclick=()=>{t&&(un(t)||t.timer||t.input)||n(zt.close)}},un=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let hn=!1;const dn=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(hn=!0)}}},fn=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(e){t.popup.onmouseup=()=>{},(e.target===t.popup||e.target instanceof HTMLElement&&t.popup.contains(e.target))&&(hn=!0)}}},pn=(t,e,n)=>{e.container.onclick=r=>{hn?hn=!1:r.target===e.container&&p(t.allowOutsideClick)&&n(zt.backdrop)}},mn=t=>t instanceof Element||(t=>"object"==typeof t&&t.jquery)(t);const gn=()=>{if(r.timeout)return(()=>{const t=P();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=e/parseInt(window.getComputedStyle(t).width)*100;t.style.width=`${n}%`})(),r.timeout.stop()},wn=()=>{if(r.timeout){const t=r.timeout.start();return rt(t),t}};let yn=!1;const vn={};const bn=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const t in vn){const n=e.getAttribute(t);if(n)return void vn[t].fire({template:n})}};r.eventEmitter=new class{constructor(){this.events={}}_getHandlersByEventName(t){return void 0===this.events[t]&&(this.events[t]=[]),this.events[t]}on(t,e){const n=this._getHandlersByEventName(t);n.includes(e)||n.push(e)}once(t,e){var n=this;const r=function(){n.removeListener(t,r);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];e.apply(n,s)};this.on(t,r)}emit(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this._getHandlersByEventName(t).forEach((t=>{try{t.apply(this,n)}catch(t){console.error(t)}}))}removeListener(t,e){const n=this._getHandlersByEventName(t),r=n.indexOf(e);r>-1&&n.splice(r,1)}removeAllListeners(t){void 0!==this.events[t]&&(this.events[t].length=0)}reset(){this.events={}}};var En=Object.freeze({__proto__:null,argsToParams:t=>{const e={};return"object"!=typeof t[0]||mn(t[0])?["title","html","icon"].forEach(((n,r)=>{const i=t[r];"string"==typeof i||mn(i)?e[n]=i:void 0!==i&&h(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof i}`)})):Object.assign(e,t[0]),e},bindClickHandler:function(){vn[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,yn||(document.body.addEventListener("click",bn),yn=!0)},clickCancel:()=>{var t;return null===(t=A())||void 0===t?void 0:t.click()},clickConfirm:qt,clickDeny:()=>{var t;return null===(t=L())||void 0===t?void 0:t.click()},enableLoading:ye,fire:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new this(...e)},getActions:N,getCancelButton:A,getCloseButton:M,getConfirmButton:x,getContainer:y,getDenyButton:L,getFocusableElements:R,getFooter:O,getHtmlContainer:C,getIcon:T,getIconContent:()=>b(o["icon-content"]),getImage:k,getInputLabel:()=>b(o["input-label"]),getLoader:D,getPopup:E,getProgressSteps:S,getTimerLeft:()=>r.timeout&&r.timeout.getTimerLeft(),getTimerProgressBar:P,getTitle:_,getValidationMessage:I,increaseTimer:t=>{if(r.timeout){const e=r.timeout.increase(t);return rt(e,!0),e}},isDeprecatedParameter:Ye,isLoading:()=>{const t=E();return!!t&&t.hasAttribute("data-loading")},isTimerRunning:()=>!(!r.timeout||!r.timeout.isRunning()),isUpdatableParameter:Qe,isValidParameter:We,isVisible:()=>tt(E()),mixin:function(t){return class extends(this){_main(e,n){return super._main(e,Object.assign({},t,n))}}},off:(t,e)=>{t?e?r.eventEmitter.removeListener(t,e):r.eventEmitter.removeAllListeners(t):r.eventEmitter.reset()},on:(t,e)=>{r.eventEmitter.on(t,e)},once:(t,e)=>{r.eventEmitter.once(t,e)},resumeTimer:wn,showLoading:ye,stopTimer:gn,toggleTimer:()=>{const t=r.timeout;return t&&(t.running?gn():wn())}});class Tn{constructor(t,e){this.callback=t,this.remaining=e,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(t){const e=this.running;return e&&this.stop(),this.remaining+=t,e&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const _n=["swal-title","swal-html","swal-footer"],Cn=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach((t=>{Nn(t,["name","value"]);const n=t.getAttribute("name"),r=t.getAttribute("value");n&&r&&(e[n]="boolean"==typeof ze[n]?"false"!==r:"object"==typeof ze[n]?JSON.parse(r):r)})),e},kn=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach((t=>{const n=t.getAttribute("name"),r=t.getAttribute("value");n&&r&&(e[n]=new Function(`return ${r}`)())})),e},Sn=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach((t=>{Nn(t,["type","color","aria-label"]);const n=t.getAttribute("type");n&&["confirm","cancel","deny"].includes(n)&&(e[`${n}ButtonText`]=t.innerHTML,e[`show${l(n)}Button`]=!0,t.hasAttribute("color")&&(e[`${n}ButtonColor`]=t.getAttribute("color")),t.hasAttribute("aria-label")&&(e[`${n}ButtonAriaLabel`]=t.getAttribute("aria-label")))})),e},In=t=>{const e={},n=t.querySelector("swal-image");return n&&(Nn(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},xn=t=>{const e={},n=t.querySelector("swal-icon");return n&&(Nn(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},An=t=>{const e={},n=t.querySelector("swal-input");n&&(Nn(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const r=Array.from(t.querySelectorAll("swal-input-option"));return r.length&&(e.inputOptions={},r.forEach((t=>{Nn(t,["value"]);const n=t.getAttribute("value");if(!n)return;const r=t.innerHTML;e.inputOptions[n]=r}))),e},Ln=(t,e)=>{const n={};for(const r in e){const i=e[r],s=t.querySelector(i);s&&(Nn(s,[]),n[i.replace(/^swal-/,"")]=s.innerHTML.trim())}return n},Dn=t=>{const e=_n.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach((t=>{const n=t.tagName.toLowerCase();e.includes(n)||u(`Unrecognized element <${n}>`)}))},Nn=(t,e)=>{Array.from(t.attributes).forEach((n=>{-1===e.indexOf(n.name)&&u([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."])}))},On=t=>{const e=y(),n=E();"function"==typeof t.willOpen&&t.willOpen(n),r.eventEmitter.emit("willOpen",n);const i=window.getComputedStyle(document.body).overflowY;Vn(e,n,t),setTimeout((()=>{Mn(e,n)}),10),V()&&(Rn(e,t.scrollbarPadding,i),(()=>{const t=y();Array.from(document.body.children).forEach((e=>{e.contains(t)||(e.hasAttribute("aria-hidden")&&e.setAttribute("data-previous-aria-hidden",e.getAttribute("aria-hidden")||""),e.setAttribute("aria-hidden","true"))}))})()),F()||r.previousActiveElement||(r.previousActiveElement=document.activeElement),"function"==typeof t.didOpen&&setTimeout((()=>t.didOpen(n))),r.eventEmitter.emit("didOpen",n),K(e,o["no-transition"])},Pn=t=>{const e=E();if(t.target!==e)return;const n=y();e.removeEventListener("animationend",Pn),e.removeEventListener("transitionend",Pn),n.style.overflowY="auto"},Mn=(t,e)=>{nt(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",Pn),e.addEventListener("transitionend",Pn)):t.style.overflowY="auto"},Rn=(t,e,n)=>{(()=>{if(ne&&!B(document.body,o.iosfix)){const t=document.body.scrollTop;document.body.style.top=-1*t+"px",H(document.body,o.iosfix),re()}})(),e&&"hidden"!==n&&ce(n),setTimeout((()=>{t.scrollTop=0}))},Vn=(t,e,n)=>{H(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),Q(e,"grid"),setTimeout((()=>{H(e,n.showClass.popup),e.style.removeProperty("opacity")}),10)):Q(e,"grid"),H([document.documentElement,document.body],o.shown),n.heightAuto&&n.backdrop&&!n.toast&&H([document.documentElement,document.body],o["height-auto"])};var Fn=(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),jn=(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL");function Bn(t){(function(t){t.inputValidator||("email"===t.input&&(t.inputValidator=Fn),"url"===t.input&&(t.inputValidator=jn))})(t),t.showLoaderOnConfirm&&!t.preConfirm&&u("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function(t){(!t.target||"string"==typeof t.target&&!document.querySelector(t.target)||"string"!=typeof t.target&&!t.target.appendChild)&&(u('Target parameter is not valid, defaulting to "body"'),t.target="body")}(t),"string"==typeof t.title&&(t.title=t.title.split("\n").join("<br />")),ot(t)}let Un;var $n=new WeakMap;class qn{constructor(){if(n(this,$n,void 0),"undefined"==typeof window)return;Un=this;for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];const s=Object.freeze(this.constructor.argsToParams(r));var o,a,c;this.params=s,this.isAwaitingPromise=!1,o=$n,a=this,c=this._main(Un.params),o.set(t(o,a),c)}_main(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(tn(Object.assign({},e,t)),r.currentInstance){const t=te.swalPromiseResolve.get(r.currentInstance),{isAwaitingPromise:e}=r.currentInstance;r.currentInstance._destroy(),e||t({isDismissed:!0}),V()&&ee()}r.currentInstance=Un;const n=Hn(t,e);Bn(n),Object.freeze(n),r.timeout&&(r.timeout.stop(),delete r.timeout),clearTimeout(r.restoreFocusTimeout);const i=Kn(Un);return $t(Un,n),ft.innerParams.set(Un,n),zn(Un,i,n)}then(t){return e($n,this).then(t)}finally(t){return e($n,this).finally(t)}}const zn=(t,e,n)=>new Promise(((i,s)=>{const o=e=>{t.close({isDismissed:!0,dismiss:e})};te.swalPromiseResolve.set(t,i),te.swalPromiseReject.set(t,s),e.confirmButton.onclick=()=>{(t=>{const e=ft.innerParams.get(t);t.disableButtons(),e.input?Ie(t,"confirm"):Ne(t,!0)})(t)},e.denyButton.onclick=()=>{(t=>{const e=ft.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?Ie(t,"deny"):Ae(t,!1)})(t)},e.cancelButton.onclick=()=>{((t,e)=>{t.disableButtons(),e(zt.cancel)})(t,o)},e.closeButton.onclick=()=>{o(zt.close)},((t,e,n)=>{t.toast?ln(t,e,n):(dn(e),fn(e),pn(t,e,n))})(n,e,o),((t,e,n)=>{Ht(t),e.toast||(t.keydownHandler=t=>Qt(e,t,n),t.keydownTarget=e.keydownListenerCapture?window:E(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)})(r,n,o),((t,e)=>{"select"===e.input||"radio"===e.input?_e(t,e):["text","email","number","tel","textarea"].some((t=>t===e.input))&&(m(e.inputValue)||w(e.inputValue))&&(ye(x()),Ce(t,e))})(t,n),On(n),Gn(r,n,o),Wn(e,n),setTimeout((()=>{e.container.scrollTop=0}))})),Hn=(t,e)=>{const n=(t=>{const e="string"==typeof t.template?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return Dn(n),Object.assign(Cn(n),kn(n),Sn(n),In(n),xn(n),An(n),Ln(n,_n))})(t),r=Object.assign({},ze,e,n,t);return r.showClass=Object.assign({},ze.showClass,r.showClass),r.hideClass=Object.assign({},ze.hideClass,r.hideClass),!1===r.animation&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},Kn=t=>{const e={popup:E(),container:y(),actions:N(),confirmButton:x(),denyButton:L(),cancelButton:A(),loader:D(),closeButton:M(),validationMessage:I(),progressSteps:S()};return ft.domCache.set(t,e),e},Gn=(t,e,n)=>{const r=P();Y(r),e.timer&&(t.timeout=new Tn((()=>{n("timer"),delete t.timeout}),e.timer),e.timerProgressBar&&(Q(r),U(r,e,"timerProgressBar"),setTimeout((()=>{t.timeout&&t.timeout.running&&rt(e.timer)}))))},Wn=(t,e)=>{if(!e.toast)return p(e.allowEnterKey)?void(Qn(t)||Yn(t,e)||Kt(-1,1)):(f("allowEnterKey"),void Xn())},Qn=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const t of e)if(t instanceof HTMLElement&&tt(t))return t.focus(),!0;return!1},Yn=(t,e)=>e.focusDeny&&tt(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&tt(t.cancelButton)?(t.cancelButton.focus(),!0):!(!e.focusConfirm||!tt(t.confirmButton)||(t.confirmButton.focus(),0)),Xn=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if("undefined"!=typeof window&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const t=new Date,e=localStorage.getItem("swal-initiation");e?(t.getTime()-Date.parse(e))/864e5>3&&setTimeout((()=>{document.body.style.pointerEvents="none";const t=document.createElement("audio");t.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",t.loop=!0,document.body.appendChild(t),setTimeout((()=>{t.play().catch((()=>{}))}),2500)}),500):localStorage.setItem("swal-initiation",`${t}`)}qn.prototype.disableButtons=je,qn.prototype.enableButtons=Fe,qn.prototype.getInput=Me,qn.prototype.disableInput=Ue,qn.prototype.enableInput=Be,qn.prototype.hideLoading=Oe,qn.prototype.disableLoading=Oe,qn.prototype.showValidationMessage=$e,qn.prototype.resetValidationMessage=qe,qn.prototype.close=ue,qn.prototype.closePopup=ue,qn.prototype.closeModal=ue,qn.prototype.closeToast=ue,qn.prototype.rejectPromise=de,qn.prototype.update=en,qn.prototype._destroy=rn,Object.assign(qn,En),Object.keys(cn).forEach((t=>{qn[t]=function(){return Un&&Un[t]?Un[t](...arguments):null}})),qn.DismissReason=zt,qn.version="11.17.2";const Jn=qn;return Jn.default=Jn,Jn}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch(t){n.innerText=e}}(document,':root{--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-footer-border-color: #eee;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-input-background: transparent;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:var(--swal2-border-radius);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:var(--swal2-input-background);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:var(--swal2-background);box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}')}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r].call(s.exports,s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let e=0;e<t.length;e+=3){const i=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,l=i>>2,u=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(e):this.encodeByteArray(t(e),n)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const s=n[t.charAt(e++)],o=e<t.length?n[t.charAt(e)]:0;++e;const a=e<t.length?n[t.charAt(e)]:64;++e;const c=e<t.length?n[t.charAt(e)]:64;if(++e,null==s||null==o||null==a||null==c)throw new r;const l=s<<2|o>>4;if(i.push(l),64!==a){const t=o<<4&240|a>>2;if(i.push(t),64!==c){const t=a<<6&192|c;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class r extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i=function(n){return function(n){const r=t(n);return e.encodeByteArray(r,!0)}(n).replace(/\./g,"")},s=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const n=t&&function(t){try{return e.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(t[1]);return n&&JSON.parse(n)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},o=()=>{var t;return null===(t=s())||void 0===t?void 0:t.config};class a{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function c(){try{return"object"==typeof indexedDB}catch(t){return!1}}function l(){return new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}class u extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,u.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,h.prototype.create)}}class h{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],s=i?function(t,e){return t.replace(d,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new u(r,o,n)}}const d=/\{\$([^}]+)}/g;function f(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],s=e[i];if(p(n)&&p(s)){if(!f(n,s))return!1}else if(n!==s)return!1}for(const t of r)if(!n.includes(t))return!1;return!0}function p(t){return null!==t&&"object"==typeof t}function m(t,e=1e3,n=2){const r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function g(t){return t&&t._delegate?t._delegate:t}class w{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const y="[DEFAULT]";class v{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new a;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:y})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=y){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=y){return this.instances.has(t)}getOptions(t=y){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(r);return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===y?void 0:r),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var r;return n||null}normalizeInstanceIdentifier(t=y){return this.component?this.component.multipleInstances?t:y:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class b{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new v(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const E=[];var T;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(T||(T={}));const _={debug:T.DEBUG,verbose:T.VERBOSE,info:T.INFO,warn:T.WARN,error:T.ERROR,silent:T.SILENT},C=T.INFO,k={[T.DEBUG]:"log",[T.VERBOSE]:"log",[T.INFO]:"info",[T.WARN]:"warn",[T.ERROR]:"error"},S=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=k[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class I{constructor(t){this.name=t,this._logLevel=C,this._logHandler=S,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in T))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?_[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,T.DEBUG,...t),this._logHandler(this,T.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,T.VERBOSE,...t),this._logHandler(this,T.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,T.INFO,...t),this._logHandler(this,T.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,T.WARN,...t),this._logHandler(this,T.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,T.ERROR,...t),this._logHandler(this,T.ERROR,...t)}}let x,A;const L=new WeakMap,D=new WeakMap,N=new WeakMap,O=new WeakMap,P=new WeakMap;let M={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return D.get(t);if("objectStoreNames"===e)return t.objectStoreNames||N.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return V(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function R(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(A||(A=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(F(this),t),V(L.get(this))}:function(...t){return V(e.apply(F(this),t))}:function(t,...n){const r=e.call(F(this),t,...n);return N.set(r,t.sort?t.sort():[t]),V(r)}:(t instanceof IDBTransaction&&function(t){if(D.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{e(),r()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)}));D.set(t,e)}(t),n=t,(x||(x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>n instanceof t))?new Proxy(t,M):t);var e,n}function V(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{e(V(t.result)),r()},s=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&L.set(e,t)})).catch((()=>{})),P.set(e,t),e}(t);if(O.has(t))return O.get(t);const e=R(t);return e!==t&&(O.set(t,e),P.set(e,t)),e}const F=t=>P.get(t);function j(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=V(o);return r&&o.addEventListener("upgradeneeded",(t=>{r(V(o.result),t.oldVersion,t.newVersion,V(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}const B=["get","getKey","getAll","getAllKeys","count"],U=["put","add","delete","clear"],$=new Map;function q(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if($.get(e))return $.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=U.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!B.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),i&&s.done]))[0]};return $.set(e,s),s}var z;z=M,M={...z,get:(t,e,n)=>q(t,e)||z.get(t,e,n),has:(t,e)=>!!q(t,e)||z.has(t,e)};class H{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const K="@firebase/app",G="0.11.1",W=new I("@firebase/app"),Q="@firebase/app-compat",Y="@firebase/analytics-compat",X="@firebase/analytics",J="@firebase/app-check-compat",Z="@firebase/app-check",tt="@firebase/auth",et="@firebase/auth-compat",nt="@firebase/database",rt="@firebase/data-connect",it="@firebase/database-compat",st="@firebase/functions",ot="@firebase/functions-compat",at="@firebase/installations",ct="@firebase/installations-compat",lt="@firebase/messaging",ut="@firebase/messaging-compat",ht="@firebase/performance",dt="@firebase/performance-compat",ft="@firebase/remote-config",pt="@firebase/remote-config-compat",mt="@firebase/storage",gt="@firebase/storage-compat",wt="@firebase/firestore",yt="@firebase/vertexai",vt="@firebase/firestore-compat",bt="firebase",Et="[DEFAULT]",Tt={[K]:"fire-core",[Q]:"fire-core-compat",[X]:"fire-analytics",[Y]:"fire-analytics-compat",[Z]:"fire-app-check",[J]:"fire-app-check-compat",[tt]:"fire-auth",[et]:"fire-auth-compat",[nt]:"fire-rtdb",[rt]:"fire-data-connect",[it]:"fire-rtdb-compat",[st]:"fire-fn",[ot]:"fire-fn-compat",[at]:"fire-iid",[ct]:"fire-iid-compat",[lt]:"fire-fcm",[ut]:"fire-fcm-compat",[ht]:"fire-perf",[dt]:"fire-perf-compat",[ft]:"fire-rc",[pt]:"fire-rc-compat",[mt]:"fire-gcs",[gt]:"fire-gcs-compat",[wt]:"fire-fst",[vt]:"fire-fst-compat",[yt]:"fire-vertex","fire-js":"fire-js",[bt]:"fire-js-all"},_t=new Map,Ct=new Map,kt=new Map;function St(t,e){try{t.container.addComponent(e)}catch(n){W.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function It(t){const e=t.name;if(kt.has(e))return W.debug(`There were multiple attempts to register component ${e}.`),!1;kt.set(e,t);for(const e of _t.values())St(e,t);for(const e of Ct.values())St(e,t);return!0}function xt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const At=new h("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Lt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new w("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw At.create("app-deleted",{appName:this._name})}}function Dt(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Et,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw At.create("bad-app-name",{appName:String(i)});if(n||(n=o()),!n)throw At.create("no-options");const s=_t.get(i);if(s){if(f(n,s.options)&&f(r,s.config))return s;throw At.create("duplicate-app",{appName:i})}const a=new b(i);for(const t of kt.values())a.addComponent(t);const c=new Lt(n,r,a);return _t.set(i,c),c}function Nt(t=Et){const e=_t.get(t);if(!e&&t===Et&&o())return Dt();if(!e)throw At.create("no-app",{appName:t});return e}function Ot(t,e,n){var r;let i=null!==(r=Tt[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=[`Unable to register library "${i}" with version "${e}":`];return s&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void W.warn(t.join(" "))}It(new w(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}const Pt="firebase-heartbeat-store";let Mt=null;function Rt(){return Mt||(Mt=j("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Pt)}catch(t){console.warn(t)}}}).catch((t=>{throw At.create("idb-open",{originalErrorMessage:t.message})}))),Mt}async function Vt(t,e){try{const n=(await Rt()).transaction(Pt,"readwrite"),r=n.objectStore(Pt);await r.put(e,Ft(t)),await n.done}catch(t){if(t instanceof u)W.warn(t.message);else{const e=At.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});W.warn(e.message)}}}function Ft(t){return`${t.name}!${t.options.appId}`}class jt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Ut(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Bt();if(null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((t=>t.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const t=function(t){if(0===t.length)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(t,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){W.warn(t)}}async getHeartbeatsHeader(){var t;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=Bt(),{heartbeatsToSend:n,unsentEntries:r}=function(t,e=1024){const n=[];let r=t.slice();for(const i of t){const t=n.find((t=>t.agent===i.agent));if(t){if(t.dates.push(i.date),$t(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$t(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=i(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return W.warn(t),""}}}function Bt(){return(new Date).toISOString().substring(0,10)}class Ut{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!c()&&l().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await Rt()).transaction(Pt),n=await e.objectStore(Pt).get(Ft(t));return await e.done,n}catch(t){if(t instanceof u)W.warn(t.message);else{const e=At.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});W.warn(e.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Vt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Vt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function $t(t){return i(JSON.stringify({version:2,heartbeats:t})).length}It(new w("platform-logger",(t=>new H(t)),"PRIVATE")),It(new w("heartbeat",(t=>new jt(t)),"PRIVATE")),Ot(K,G,""),Ot(K,G,"esm2017"),Ot("fire-js","");var qt,zt,Ht="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Kt={};(function(){var t;function e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function r(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}!function(t,e){function n(){}n.prototype=e.prototype,t.D=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.C=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}(e,(function(){this.blockSize=-1})),e.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.u=function(t,e){void 0===e&&(e=t.length);for(var r=e-this.blockSize,i=this.B,s=this.h,o=0;o<e;){if(0==s)for(;o<=r;)n(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(i[s++]=t.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<e;)if(i[s++]=t[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=e},e.prototype.v=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.o;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.u(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var i={};function s(t){return-128<=t&&128>t?function(t){var e=i;return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=function(t){return new r([0|t],0>t?-1:0)}(t)}(t):new r([0|t],0>t?-1:0)}function o(t){if(isNaN(t)||!isFinite(t))return a;if(0>t)return d(o(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=4294967296;return new r(e,0)}var a=s(0),c=s(1),l=s(16777216);function u(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function h(t){return-1==t.h}function d(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new r(n,~t.h).add(c)}function f(t,e){return t.add(d(e))}function p(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function m(t,e){this.g=t,this.h=e}function g(t,e){if(u(e))throw Error("division by zero");if(u(t))return new m(a,a);if(h(t))return e=g(d(t),e),new m(d(e.g),d(e.h));if(h(e))return e=g(t,d(e)),new m(d(e.g),e.h);if(30<t.g.length){if(h(t)||h(e))throw Error("slowDivide_ only works with positive integers.");for(var n=c,r=e;0>=r.l(t);)n=w(n),r=w(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var l=s.add(r);0>=l.l(t)&&(i=i.add(n),s=l),r=y(r,1),n=y(n,1)}return e=f(t,i.j(e)),new m(i,e)}for(i=a;0<=t.l(e);){for(n=Math.max(1,Math.floor(t.m()/e.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),l=(s=o(n)).j(e);h(l)||0<l.l(t);)l=(s=o(n-=r)).j(e);u(s)&&(s=c),i=i.add(s),t=f(t,l)}return new m(i,t)}function w(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.i(i)<<1|t.i(i-1)>>>31;return new r(n,t.h)}function y(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,s=[],o=0;o<i;o++)s[o]=0<e?t.i(o+n)>>>e|t.i(o+n+1)<<32-e:t.i(o+n);return new r(s,t.h)}(t=r.prototype).m=function(){if(h(this))return-d(this).m();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.i(n);t+=(0<=r?r:4294967296+r)*e,e*=4294967296}return t},t.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(u(this))return"0";if(h(this))return"-"+d(this).toString(t);for(var e=o(Math.pow(t,6)),n=this,r="";;){var i=g(n,e).g,s=((0<(n=f(n,i.j(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},t.i=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},t.l=function(t){return h(t=f(this,t))?-1:u(t)?0:1},t.abs=function(){return h(this)?d(this):this},t.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,s=0;s<=e;s++){var o=i+(65535&this.i(s))+(65535&t.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(t.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(t){if(u(this)||u(t))return a;if(h(this))return h(t)?d(this).j(d(t)):d(d(this).j(t));if(h(t))return d(this.j(d(t)));if(0>this.l(l)&&0>t.l(l))return o(this.m()*t.m());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<t.g.length;s++){var c=this.i(i)>>>16,f=65535&this.i(i),m=t.i(s)>>>16,g=65535&t.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=c*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=c*m,p(n,2*i+2*s+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new r(n,0)},t.A=function(t){return g(this,t).h},t.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.i(i)&t.i(i);return new r(n,this.h&t.h)},t.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.i(i)|t.i(i);return new r(n,this.h|t.h)},t.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.i(i)^t.i(i);return new r(n,this.h^t.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,zt=Kt.Md5=e,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return d(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<e.length;s+=8){var c=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+c),n);8>c?(c=o(Math.pow(n,c)),i=i.j(c).add(o(l))):i=(i=i.j(r)).add(o(l))}return i},qt=Kt.Integer=r}).apply(void 0!==Ht?Ht:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Gt,Wt,Qt,Yt,Xt,Jt,Zt,te,ee="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ne={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t},n=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ee&&ee];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(t,r){if(r)t:{var i=n;t=t.split(".");for(var s=0;s<t.length-1;s++){var o=t[s];if(!(o in i))break t;i=i[o]}(r=r(s=i[t=t[t.length-1]]))!=s&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,r=!1,i={next:function(){if(!r&&n<t.length){var i=n++;return{value:e(0,t[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(t,e){return e}))}}));var r=r||{},i=this||self;function s(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function o(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function a(t,e,n){return t.call.apply(t.bind,arguments)}function c(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function l(t,e,n){return(l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:c).apply(null,arguments)}function u(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function h(t,e){function n(){}n.prototype=e.prototype,t.aa=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Qb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function d(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function f(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(s(n)){const e=t.length||0,r=n.length||0;t.length=e+r;for(let i=0;i<r;i++)t[e+i]=n[i]}else t.push(n)}}function p(t){return/^[\s\xa0]*$/.test(t)}function m(){var t=i.navigator;return t&&(t=t.userAgent)?t:""}function g(t){return g[" "](t),t}g[" "]=function(){};var w=!(-1==m().indexOf("Gecko")||-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge")||-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE")||-1!=m().indexOf("Edge"));function y(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function v(t){const e={};for(const n in t)e[n]=t[n];return e}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(t,e){let n,r;for(let e=1;e<arguments.length;e++){for(n in r=arguments[e],r)t[n]=r[n];for(let e=0;e<b.length;e++)n=b[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function T(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function _(t){i.setTimeout((()=>{throw t}),0)}function C(){var t=A;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var k=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new S),(t=>t.reset()));class S{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let I,x=!1,A=new class{constructor(){this.h=this.g=null}add(t,e){const n=k.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},L=()=>{const t=i.Promise.resolve(void 0);I=()=>{t.then(D)}};var D=()=>{for(var t;t=C();){try{t.h.call(t.g)}catch(t){_(t)}var e=k;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}x=!1};function N(){this.s=this.s,this.C=this.C}function O(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}N.prototype.s=!1,N.prototype.ma=function(){this.s||(this.s=!0,this.N())},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};i.addEventListener("test",t,e),i.removeEventListener("test",t,e)}catch(t){}return t}();function M(t,e){if(O.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(w){t:{try{g(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:R[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&M.aa.h.call(this)}}h(M,O);var R={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var V="closure_listenable_"+(1e6*Math.random()|0),F=0;function j(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function B(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function U(t){this.src=t,this.g={},this.h=0}function $(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=Array.prototype.indexOf.call(i,e,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(B(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function q(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.da&&s.listener==e&&s.capture==!!n&&s.ha==r)return i}return-1}U.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=q(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new j(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var z="closure_lm_"+(1e6*Math.random()|0),H={};function K(t,e,n,r,i){if(r&&r.once)return W(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)K(t,e[s],n,r,i);return null}return n=et(n),t&&t[V]?t.K(e,n,o(r)?!!r.capture:!!r,i):G(t,e,n,!1,r,i)}function G(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,c=Z(t);if(c||(t[z]=c=new U(t)),(n=c.add(e,n,r,a,s)).proxy)return n;if(r=function(){const t=J;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)P||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(X(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function W(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)W(t,e[s],n,r,i);return null}return n=et(n),t&&t[V]?t.L(e,n,o(r)?!!r.capture:!!r,i):G(t,e,n,!0,r,i)}function Q(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Q(t,e[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=et(n),t&&t[V]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=q(s=t.g[e],n,r,i))&&(B(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=Z(t))&&(e=t.g[e.toString()],t=-1,e&&(t=q(e,n,r,i)),(n=-1<t?e[t]:null)&&Y(n))}function Y(t){if("number"!=typeof t&&t&&!t.da){var e=t.src;if(e&&e[V])$(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(X(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Z(e))?($(n,t),0==n.h&&(n.src=null,e[z]=null)):B(t)}}}function X(t){return t in H?H[t]:H[t]="on"+t}function J(t,e){if(t.da)t=!0;else{e=new M(e,this);var n=t.listener,r=t.ha||t.src;t.fa&&Y(t),t=n.call(r,e)}return t}function Z(t){return(t=t[z])instanceof U?t:null}var tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function et(t){return"function"==typeof t?t:(t[tt]||(t[tt]=function(e){return t.handleEvent(e)}),t[tt])}function nt(){N.call(this),this.i=new U(this),this.M=this,this.F=null}function rt(t,e){var n,r=t.F;if(r)for(n=[];r;r=r.F)n.push(r);if(t=t.M,r=e.type||e,"string"==typeof e)e=new O(e,t);else if(e instanceof O)e.target=e.target||t;else{var i=e;E(e=new O(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=it(o,r,!0,e)&&i}if(i=it(o=e.g=t,r,!0,e)&&i,i=it(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=it(o=e.g=n[s],r,!1,e)&&i}function it(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.da&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.fa&&$(t.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}function st(t,e,n){if("function"==typeof t)n&&(t=l(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=l(t.handleEvent,t)}return 2147483647<Number(e)?-1:i.setTimeout(t,e||0)}function ot(t){t.g=st((()=>{t.g=null,t.i&&(t.i=!1,ot(t))}),t.l);const e=t.h;t.h=null,t.m.apply(null,e)}h(nt,N),nt.prototype[V]=!0,nt.prototype.removeEventListener=function(t,e,n,r){Q(this,t,e,n,r)},nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)B(n[r]);delete e.g[t],e.h--}}this.F=null},nt.prototype.K=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},nt.prototype.L=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};class at extends N{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:ot(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ct(t){N.call(this),this.h=t,this.g={}}h(ct,N);var lt=[];function ut(t){y(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Y(t)}),t),t.g={}}ct.prototype.N=function(){ct.aa.N.call(this),ut(this)},ct.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ht=i.JSON.stringify,dt=i.JSON.parse,ft=class{stringify(t){return i.JSON.stringify(t,void 0)}parse(t){return i.JSON.parse(t,void 0)}};function pt(){}function mt(t){return t.h||(t.h=t.i())}function gt(){}pt.prototype.h=null;var wt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yt(){O.call(this,"d")}function vt(){O.call(this,"c")}h(yt,O),h(vt,O);var bt={},Et=null;function Tt(){return Et=Et||new nt}function _t(t){O.call(this,bt.La,t)}function Ct(t){const e=Tt();rt(e,new _t(e))}function kt(t,e){O.call(this,bt.STAT_EVENT,t),this.stat=e}function St(t){const e=Tt();rt(e,new kt(e,t))}function It(t,e){O.call(this,bt.Ma,t),this.size=e}function xt(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){t()}),e)}function At(){this.g=!0}function Lt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ht(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}bt.La="serverreachability",h(_t,O),bt.STAT_EVENT="statevent",h(kt,O),bt.Ma="timingevent",h(It,O),At.prototype.xa=function(){this.g=!1},At.prototype.info=function(){};var Dt,Nt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ot={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Pt(){}function Mt(t,e,n,r){this.j=t,this.i=e,this.l=n,this.R=r||1,this.U=new ct(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rt}function Rt(){this.i=null,this.g="",this.h=!1}h(Pt,pt),Pt.prototype.g=function(){return new XMLHttpRequest},Pt.prototype.i=function(){return{}},Dt=new Pt;var Vt={},Ft={};function jt(t,e,n){t.L=1,t.v=Ee(ge(e)),t.m=n,t.P=!0,Bt(t,null)}function Bt(t,e){t.F=Date.now(),qt(t),t.A=ge(t.v);var n=t.A,r=t.R;Array.isArray(r)||(r=[String(r)]),Me(n.i,"t",r),t.C=0,n=t.j.J,t.h=new Rt,t.g=_n(t.j,n?e:null,!t.m),0<t.O&&(t.M=new at(l(t.Y,t,t.g),t.O)),e=t.U,n=t.g,r=t.ca;var i="readystatechange";Array.isArray(i)||(i&&(lt[0]=i.toString()),i=lt);for(var s=0;s<i.length;s++){var o=K(n,i[s],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}e=t.H?v(t.H):{},t.m?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Ct(),function(t,e,n,r,i,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.i,t.u,t.A,t.l,t.R,t.m)}function Ut(t){return!!t.g&&"GET"==t.u&&2!=t.L&&t.j.Ca}function $t(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Ft:(n=Number(e.substring(n,r)),isNaN(n)?Vt:(r+=1)+n>e.length?Ft:(e=e.slice(r,r+n),t.C=r+n,e))}function qt(t){t.S=Date.now()+t.I,zt(t,t.I)}function zt(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=xt(l(t.ba,t),e)}function Ht(t){t.B&&(i.clearTimeout(t.B),t.B=null)}function Kt(t){0==t.j.G||t.J||yn(t.j,t)}function re(t){Ht(t);var e=t.M;e&&"function"==typeof e.ma&&e.ma(),t.M=null,ut(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ma())}function ie(t,e){try{var n=t.j;if(0!=n.G&&(n.g==t||le(n.h,t)))if(!t.K&&le(n.h,t)&&3==n.G){try{var r=n.Da.g.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;wn(n),an(n)}pn(n),St(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=xt(l(n.Za,n),6e3));if(1>=ce(n.h)&&n.ca){try{n.ca()}catch(t){}n.ca=void 0}}else bn(n,11)}else if((t.K||n.g==t)&&wn(n),!p(e))for(i=n.Da.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.K=l[1],n.ia=l[2];const e=l[3];null!=e&&(n.la=e,n.j.info("VER="+n.la));const i=l[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.h;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ue(s,s.h),s.h=null))}if(r.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.ya=t,be(r.I,r.D,t))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-t.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=t;if((r=n).qa=Tn(r,r.J?r.ia:null,r.W),o.K){he(r.h,o);var a=o,c=r.L;c&&(a.I=c),a.B&&(Ht(a),qt(a)),r.g=o}else fn(r);0<n.i.length&&ln(n)}else"stop"!=l[0]&&"close"!=l[0]||bn(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?bn(n,7):on(n):"noop"!=l[0]&&n.l&&n.l.ta(l),n.v=0)}Ct()}catch(t){}}Mt.prototype.ca=function(t){t=t.target;const e=this.M;e&&3==en(t)?e.j():this.Y(t)},Mt.prototype.Y=function(t){try{if(t==this.g)t:{const d=en(this.g);var e=this.g.Ba();if(this.g.Z(),!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=d||7==e||Ct(),Ht(this);var n=this.g.Z();this.X=n;e:if(Ut(this)){var r=nn(this.g);t="";var s=r.length,o=4==en(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){re(this),Kt(this);var a="";break e}this.h.i=new i.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:!(o&&e==s-1)});r.length=0,this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(c)){var u=c;break e}}u=null}if(!(n=u)){this.o=!1,this.s=3,St(12),re(this),Kt(this);break t}Lt(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ie(this,n)}if(this.P){let t;for(n=!0;!this.J&&this.C<a.length;){if(t=$t(this,a),t==Ft){4==d&&(this.s=4,St(14),n=!1),Lt(this.i,this.l,null,"[Incomplete Response]");break}if(t==Vt){this.s=4,St(15),Lt(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Lt(this.i,this.l,t,null),ie(this,t)}if(Ut(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,St(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),mn(h),h.M=!0,St(11))}}else Lt(this.i,this.l,a,"[Invalid Chunked Response]"),re(this),Kt(this)}else Lt(this.i,this.l,a,null),ie(this,a);4==d&&re(this),this.o&&!this.J&&(4==d?yn(this.j,this):(this.o=!1,qt(this)))}else(function(t){const e={};t=(t.g&&2<=en(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(p(t[r]))continue;var n=T(t[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),re(this),Kt(this)}}}catch(t){}},Mt.prototype.cancel=function(){this.J=!0,re(this)},Mt.prototype.ba=function(){this.B=null;const t=Date.now();0<=t-this.S?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.i,this.A),2!=this.L&&(Ct(),St(17)),re(this),this.s=2,Kt(this)):zt(this,this.S-t)};var se=class{constructor(t,e){this.g=t,this.map=e}};function oe(t){this.l=t||10,t=i.PerformanceNavigationTiming?0<(t=i.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ae(t){return!!t.h||!!t.g&&t.g.size>=t.j}function ce(t){return t.h?1:t.g?t.g.size:0}function le(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function ue(t,e){t.g?t.g.add(e):t.h=e}function he(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function de(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return d(t.i)}function fe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(s(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.na&&"function"==typeof t.na)return t.na();if(!t.V||"function"!=typeof t.V){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(s(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function(t){if(t.V&&"function"==typeof t.V)return t.V();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(s(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}oe.prototype.cancel=function(){if(this.i=de(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var pe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function me(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof me){this.h=t.h,we(this,t.j),this.o=t.o,this.g=t.g,ye(this,t.s),this.l=t.l;var e=t.i,n=new De;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ve(this,n),this.m=t.m}else t&&(e=String(t).match(pe))?(this.h=!1,we(this,e[1]||"",!0),this.o=Te(e[2]||""),this.g=Te(e[3]||"",!0),ye(this,e[4]),this.l=Te(e[5]||"",!0),ve(this,e[6]||"",!0),this.m=Te(e[7]||"")):(this.h=!1,this.i=new De(null,this.h))}function ge(t){return new me(t)}function we(t,e,n){t.j=n?Te(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ye(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.s=e}else t.s=null}function ve(t,e,n){e instanceof De?(t.i=e,function(t,e){e&&!t.j&&(Ne(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Oe(this,e),Me(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=_e(e,Ae)),t.i=new De(e,t.h))}function be(t,e,n){t.i.set(e,n)}function Ee(t){return be(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Te(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function _e(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ce),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ce(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}me.prototype.toString=function(){var t=[],e=this.j;e&&t.push(_e(e,Se,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(_e(e,Se,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(_e(n,"/"==n.charAt(0)?xe:Ie,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",_e(n,Le)),t.join("")};var ke,Se=/[#\/\?@]/g,Ie=/[#\?:]/g,xe=/[#\?]/g,Ae=/[#\?@]/g,Le=/#/g;function De(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ne(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Oe(t,e){Ne(t),e=Re(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Pe(t,e){return Ne(t),e=Re(t,e),t.g.has(e)}function Me(t,e,n){Oe(t,e),0<n.length&&(t.i=null,t.g.set(Re(t,e),d(n)),t.h+=n.length)}function Re(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Ve(t,e,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(t){}}function Fe(){this.g=new ft}function je(t,e,n){const r=n||"";try{fe(t,(function(t,n){let i=t;o(t)&&(i=ht(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Be(t){this.l=t.Ub||null,this.j=t.eb||!1}function Ue(t,e){nt.call(this),this.D=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function $e(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}function qe(t){t.readyState=4,t.l=null,t.j=null,t.v=null,ze(t)}function ze(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function He(t){let e="";return y(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Ke(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=He(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):be(t,e,n))}function Ge(t){nt.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=De.prototype).add=function(t,e){Ne(this),this.i=null,t=Re(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},t.forEach=function(t,e){Ne(this),this.g.forEach((function(n,r){n.forEach((function(n){t.call(e,n,r,this)}),this)}),this)},t.na=function(){Ne(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let t=0;t<i.length;t++)n.push(e[r])}return n},t.V=function(t){Ne(this);let e=[];if("string"==typeof t)Pe(this,t)&&(e=e.concat(this.g.get(Re(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},t.set=function(t,e){return Ne(this),this.i=null,Pe(this,t=Re(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")},h(Be,pt),Be.prototype.g=function(){return new Ue(this.l,this.j)},Be.prototype.i=(ke={},function(){return ke}),h(Ue,nt),(t=Ue.prototype).open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=e,this.readyState=1,ze(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||i).fetch(new Request(this.A,e)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qe(this)),this.readyState=0},t.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ze(this)),this.g&&(this.readyState=3,ze(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$e(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.v.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?qe(this):ze(this),3==this.readyState&&$e(this)}},t.Ra=function(t){this.g&&(this.response=this.responseText=t,qe(this))},t.Qa=function(t){this.g&&(this.response=t,qe(this))},t.ga=function(){this.g&&qe(this)},t.setRequestHeader=function(t,e){this.u.append(t,e)},t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Ue.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),h(Ge,nt);var We=/^https?$/i,Qe=["POST","PUT"];function Ye(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.m=5,Xe(t),Ze(t)}function Xe(t){t.A||(t.A=!0,rt(t,"complete"),rt(t,"error"))}function Je(t){if(t.h&&void 0!==r&&(!t.v[1]||4!=en(t)||2!=t.Z()))if(t.u&&4==en(t))st(t.Ea,0,t);else if(rt(t,"readystatechange"),4==en(t)){t.h=!1;try{const r=t.Z();t:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var s;if(s=0===r){var o=String(t.D).match(pe)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!We.test(o?o.toLowerCase():"")}n=s}if(n)rt(t,"complete"),rt(t,"success");else{t.m=6;try{var a=2<en(t)?t.g.statusText:""}catch(t){a=""}t.l=a+" ["+t.Z()+"]",Xe(t)}}finally{Ze(t)}}}function Ze(t,e){if(t.g){tn(t);const n=t.g,r=t.v[0]?()=>{}:null;t.g=null,t.v=null,e||rt(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function tn(t){t.I&&(i.clearTimeout(t.I),t.I=null)}function en(t){return t.g?t.g.readyState:0}function nn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function rn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function sn(t){this.Aa=0,this.i=[],this.j=new At,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,t),this.cb=rn("retryDelaySeedMs",1e4,t),this.Wa=rn("forwardChannelMaxRetries",2,t),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new oe(t&&t.concurrentRequestLimit),this.Da=new Fe,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function on(t){if(cn(t),3==t.G){var e=t.U++,n=ge(t.I);if(be(n,"SID",t.K),be(n,"RID",e),be(n,"TYPE","terminate"),hn(t,n),(e=new Mt(t,t.j,e)).L=2,e.v=Ee(ge(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(e.v.toString(),"")}catch(t){}!n&&i.Image&&((new Image).src=e.v,n=!0),n||(e.g=_n(e.j,null),e.g.ea(e.v)),e.F=Date.now(),qt(e)}En(t)}function an(t){t.g&&(mn(t),t.g.cancel(),t.g=null)}function cn(t){an(t),t.u&&(i.clearTimeout(t.u),t.u=null),wn(t),t.h.cancel(),t.s&&("number"==typeof t.s&&i.clearTimeout(t.s),t.s=null)}function ln(t){if(!ae(t.h)&&!t.s){t.s=!0;var e=t.Ga;I||L(),x||(I(),x=!0),A.add(e,t),t.B=0}}function un(t,e){var n;n=e?e.l:t.U++;const r=ge(t.I);be(r,"SID",t.K),be(r,"RID",n),be(r,"AID",t.T),hn(t,r),t.m&&t.o&&Ke(r,t.m,t.o),n=new Mt(t,t.j,n,t.B+1),null===t.m&&(n.H=t.o),e&&(t.i=e.D.concat(t.i)),e=dn(t,n,1e3),n.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),ue(t.h,n),jt(n,r,e)}function hn(t,e){t.H&&y(t.H,(function(t,n){be(e,n,t)})),t.l&&fe({},(function(t,n){be(e,n,t)}))}function dn(t,e,n){n=Math.min(t.i.length,n);var r=t.l?l(t.l.Na,t.l,t):null;t:{var i=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=e,0>n)e=Math.max(0,i[o].g-100),s=!1;else try{je(a,t,"req"+n+"_")}catch(t){r&&r(a)}}if(s){r=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,r}function fn(t){if(!t.g&&!t.u){t.Y=1;var e=t.Fa;I||L(),x||(I(),x=!0),A.add(e,t),t.v=0}}function pn(t){return!(t.g||t.u||3<=t.v||(t.Y++,t.u=xt(l(t.Fa,t),vn(t,t.v)),t.v++,0))}function mn(t){null!=t.A&&(i.clearTimeout(t.A),t.A=null)}function gn(t){t.g=new Mt(t,t.j,"rpc",t.Y),null===t.m&&(t.g.H=t.o),t.g.O=0;var e=ge(t.qa);be(e,"RID","rpc"),be(e,"SID",t.K),be(e,"AID",t.T),be(e,"CI",t.F?"0":"1"),!t.F&&t.ja&&be(e,"TO",t.ja),be(e,"TYPE","xmlhttp"),hn(t,e),t.m&&t.o&&Ke(e,t.m,t.o),t.L&&(t.g.I=t.L);var n=t.g;t=t.ia,n.L=1,n.v=Ee(ge(e)),n.m=null,n.P=!0,Bt(n,t)}function wn(t){null!=t.C&&(i.clearTimeout(t.C),t.C=null)}function yn(t,e){var n=null;if(t.g==e){wn(t),mn(t),t.g=null;var r=2}else{if(!le(t.h,e))return;n=e.D,he(t.h,e),r=1}if(0!=t.G)if(e.o)if(1==r){n=e.m?e.m.length:0,e=Date.now()-e.F;var i=t.B;rt(r=Tt(),new It(r,n)),ln(t)}else fn(t);else if(3==(i=e.s)||0==i&&0<e.X||!(1==r&&function(t,e){return!(ce(t.h)>=t.h.j-(t.s?1:0)||(t.s?(t.i=e.D.concat(t.i),0):1==t.G||2==t.G||t.B>=(t.Va?0:t.Wa)||(t.s=xt(l(t.Ga,t,e),vn(t,t.B)),t.B++,0)))}(t,e)||2==r&&pn(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:bn(t,5);break;case 4:bn(t,10);break;case 3:bn(t,6);break;default:bn(t,2)}}function vn(t,e){let n=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(n*=2),n*e}function bn(t,e){if(t.j.info("Error code "+e),2==e){var n=l(t.fb,t),r=t.Xa;const e=!r;r=new me(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||we(r,"https"),Ee(r),e?function(t,e){const n=new At;if(i.Image){const r=new Image;r.onload=u(Ve,n,"TestLoadImage: loaded",!0,e,r),r.onerror=u(Ve,n,"TestLoadImage: error",!1,e,r),r.onabort=u(Ve,n,"TestLoadImage: abort",!1,e,r),r.ontimeout=u(Ve,n,"TestLoadImage: timeout",!1,e,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(r.toString(),n):function(t,e){new At;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ve(0,0,!1,e)}),1e4);fetch(t,{signal:n.signal}).then((t=>{clearTimeout(r),t.ok?Ve(0,0,!0,e):Ve(0,0,!1,e)})).catch((()=>{clearTimeout(r),Ve(0,0,!1,e)}))}(r.toString(),n)}else St(2);t.G=0,t.l&&t.l.sa(e),En(t),cn(t)}function En(t){if(t.G=0,t.ka=[],t.l){const e=de(t.h);0==e.length&&0==t.i.length||(f(t.ka,e),f(t.ka,t.i),t.h.i.length=0,d(t.i),t.i.length=0),t.l.ra()}}function Tn(t,e,n){var r=n instanceof me?ge(n):new me(n);if(""!=r.g)e&&(r.g=e+"."+r.g),ye(r,r.s);else{var s=i.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var o=new me(null);r&&we(o,r),e&&(o.g=e),s&&ye(o,s),n&&(o.l=n),r=o}return n=t.D,e=t.ya,n&&e&&be(r,n,e),be(r,"VER",t.la),hn(t,r),r}function _n(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ca&&!t.pa?new Ge(new Be({eb:n})):new Ge(t.pa)).Ha(t.J),e}function Cn(){}function kn(){}function Sn(t,e){nt.call(this),this.g=new sn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.va&&(t?t["X-WebChannel-Client-Profile"]=e.va:t={"X-WebChannel-Client-Profile":e.va}),this.g.S=t,(t=e&&e.Sb)&&!p(t)&&(this.g.m=t),this.v=e&&e.supportsCrossDomainXhr||!1,this.u=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!p(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new An(this)}function In(t){yt.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function xn(){vt.call(this),this.status=1}function An(t){this.g=t}(t=Ge.prototype).Ha=function(t){this.J=t},t.ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dt.g(),this.v=this.o?mt(this.o):mt(Dt),this.g.onreadystatechange=l(this.Ea,this);try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(t){return void Ye(this,t)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const t of r.keys())n.set(t,r.get(t))}r=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),s=i.FormData&&t instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Qe,e,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tn(this),this.u=!0,this.g.send(t),this.u=!1}catch(t){Ye(this,t)}},t.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,rt(this,"complete"),rt(this,"abort"),Ze(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ze(this,!0)),Ge.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Je(this):this.bb())},t.bb=function(){Je(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<en(this)?this.g.status:-1}catch(t){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},t.Oa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),dt(e)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=sn.prototype).la=8,t.G=1,t.connect=function(t,e,n,r){St(0),this.W=t,this.H=e||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=Tn(this,null,this.W),ln(this)},t.Ga=function(t){if(this.s)if(this.s=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new Mt(this,this.j,t);let s=this.o;if(this.S&&(s?(s=v(s),E(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=dn(this,i,e),be(n=ge(this.I),"RID",t),be(n,"CVER",22),this.D&&be(n,"X-HTTP-Session-Id",this.D),hn(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(He(s)))+"&"+e:this.m&&Ke(n,this.m,s)),ue(this.h,i),this.Ua&&be(n,"TYPE","init"),this.P?(be(n,"$req",e),be(n,"SID","null"),i.T=!0,jt(i,n,null)):jt(i,n,e),this.G=2}}else 3==this.G&&(t?un(this,t):0==this.i.length||ae(this.h)||un(this))},t.Fa=function(){if(this.u=null,gn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=xt(l(this.ab,this),t)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),an(this),gn(this))},t.Za=function(){null!=this.C&&(this.C=null,an(this),pn(this),St(19))},t.fb=function(t){t?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=Cn.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},kn.prototype.g=function(t,e){return new Sn(t,e)},h(Sn,nt),Sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){on(this.g)},Sn.prototype.o=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.u&&((n={}).__data__=ht(t),t=n);e.i.push(new se(e.Ya++,t)),3==e.G&&ln(e)},Sn.prototype.N=function(){this.g.l=null,delete this.j,on(this.g),delete this.g,Sn.aa.N.call(this)},h(In,yt),h(xn,vt),h(An,Cn),An.prototype.ua=function(){rt(this.g,"a")},An.prototype.ta=function(t){rt(this.g,new In(t))},An.prototype.sa=function(t){rt(this.g,new xn)},An.prototype.ra=function(){rt(this.g,"b")},kn.prototype.createWebChannel=kn.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,te=ne.createWebChannelTransport=function(){return new kn},Zt=ne.getStatEventTarget=function(){return Tt()},Jt=ne.Event=bt,Xt=ne.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nt.NO_ERROR=0,Nt.TIMEOUT=8,Nt.HTTP_ERROR=6,Yt=ne.ErrorCode=Nt,Ot.COMPLETE="complete",Qt=ne.EventType=Ot,gt.EventType=wt,wt.OPEN="a",wt.CLOSE="b",wt.ERROR="c",wt.MESSAGE="d",nt.prototype.listen=nt.prototype.K,Wt=ne.WebChannel=gt,ne.FetchXmlHttpFactory=Be,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,Gt=ne.XhrIo=Ge}).apply(void 0!==ee?ee:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const re="@firebase/firestore",ie="4.7.8";class se{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}se.UNAUTHENTICATED=new se(null),se.GOOGLE_CREDENTIALS=new se("google-credentials-uid"),se.FIRST_PARTY=new se("first-party-uid"),se.MOCK_USER=new se("mock-user");let oe="11.3.1";const ae=new I("@firebase/firestore");function ce(){return ae.logLevel}function le(t,...e){if(ae.logLevel<=T.DEBUG){const n=e.map(de);ae.debug(`Firestore (${oe}): ${t}`,...n)}}function ue(t,...e){if(ae.logLevel<=T.ERROR){const n=e.map(de);ae.error(`Firestore (${oe}): ${t}`,...n)}}function he(t,...e){if(ae.logLevel<=T.WARN){const n=e.map(de);ae.warn(`Firestore (${oe}): ${t}`,...n)}}function de(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function fe(t="Unexpected state"){const e=`FIRESTORE (${oe}) INTERNAL ASSERTION FAILED: `+t;throw ue(e),new Error(e)}function pe(t,e){t||fe()}function me(t,e){return t}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends u{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ye{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class ve{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class be{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(se.UNAUTHENTICATED)))}shutdown(){}}class Ee{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Te{constructor(t){this.t=t,this.currentUser=se.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){pe(void 0===this.o);let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new ye;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ye,t.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},o=t=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ye)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(pe("string"==typeof e.accessToken),new ve(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return pe(null===t||"string"==typeof t),new se(t)}}class _e{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=se.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Ce{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new _e(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(se.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ke{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Se{constructor(t,e){var n;this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,null!=(n=t)&&void 0!==n.settings&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){pe(void 0===this.o);const n=t=>{null!=t.error&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,le("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const r=t=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>r(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?r(t):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new ke(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(pe("string"==typeof t.token),this.R=t.token,new ke(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ie(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class xe{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=Ie(40);for(let r=0;r<n.length;++r)e.length<20&&n[r]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return e}}function Ae(t,e){return t<e?-1:t>e?1:0}function Le(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}const De=-62135596800,Ne=1e6;class Oe{static now(){return Oe.fromMillis(Date.now())}static fromDate(t){return Oe.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor((t-1e3*e)*Ne);return new Oe(e,n)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new we(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new we(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<De)throw new we(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new we(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ne}_compareTo(t){return this.seconds===t.seconds?Ae(this.nanoseconds,t.nanoseconds):Ae(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-De;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Pe{static fromTimestamp(t){return new Pe(t)}static min(){return new Pe(new Oe(0,0))}static max(){return new Pe(new Oe(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Me="__name__";class Re{constructor(t,e,n){void 0===e?e=0:e>t.length&&fe(),void 0===n?n=t.length-e:n>t.length-e&&fe(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Re.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Re?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=Re.compareSegments(t.get(r),e.get(r));if(0!==n)return n}return Math.sign(t.length-e.length)}static compareSegments(t,e){const n=Re.isNumericId(t),r=Re.isNumericId(e);return n&&!r?-1:!n&&r?1:n&&r?Re.extractNumericId(t).compare(Re.extractNumericId(e)):t<e?-1:t>e?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return qt.fromString(t.substring(4,t.length-2))}}class Ve extends Re{construct(t,e,n){return new Ve(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new we(ge.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Ve(e)}static emptyPath(){return new Ve([])}}const Fe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class je extends Re{construct(t,e,n){return new je(t,e,n)}static isValidIdentifier(t){return Fe.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),je.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Me}static keyField(){return new je([Me])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new we(ge.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new we(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new we(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new we(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new je(e)}static emptyPath(){return new je([])}}class Be{constructor(t){this.path=t}static fromPath(t){return new Be(Ve.fromString(t))}static fromName(t){return new Be(Ve.fromString(t).popFirst(5))}static empty(){return new Be(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Ve.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Ve.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Be(new Ve(t.slice()))}}function Ue(t){return new $e(t.readTime,t.key,-1)}class $e{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new $e(Pe.min(),Be.empty(),-1)}static max(){return new $e(Pe.max(),Be.empty(),-1)}}function qe(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Be.comparator(t.documentKey,e.documentKey),0!==n?n:Ae(t.largestBatchId,e.largestBatchId))}class ze{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function He(t){if(t.code!==ge.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;le("LocalStore","Unexpectedly lost primary lease")}class Ke{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Ke(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Ke?e:Ke.resolve(e)}catch(t){return Ke.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Ke.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Ke.reject(e)}static resolve(t){return new Ke(((e,n)=>{e(t)}))}static reject(t){return new Ke(((e,n)=>{n(t)}))}static waitFor(t){return new Ke(((e,n)=>{let r=0,i=0,s=!1;t.forEach((t=>{++r,t.next((()=>{++i,s&&i===r&&e()}),(t=>n(t)))})),s=!0,i===r&&e()}))}static or(t){let e=Ke.resolve(!1);for(const n of t)e=e.next((t=>t?Ke.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}static mapArray(t,e){return new Ke(((n,r)=>{const i=t.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;e(t[c]).next((t=>{s[c]=t,++o,o===i&&n(s)}),(t=>r(t)))}}))}static doWhile(t,e){return new Ke(((n,r)=>{const i=()=>{!0===t()?e().next((()=>{i()}),r):n()};i()}))}}function Ge(t){return"IndexedDbTransactionError"===t.name}class We{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.oe(t),this._e=t=>e.writeSequenceNumber(t))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}We.ae=-1;function Qe(t){return null==t}function Ye(t){return 0===t&&1/t==-1/0}function Xe(t,e){let n=e;const r=t.length;for(let e=0;e<r;e++){const r=t.charAt(e);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function Je(t){return t+""}const Ze="owner",tn="mutationQueues",en="mutations",nn="documentMutations",rn="remoteDocumentGlobal",sn="targets",on="targetDocuments",an="targetGlobal",cn="collectionParents",ln="clientMetadata",un="bundles",hn="namedQueries";function dn(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fn(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pn(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class mn{constructor(t,e){this.comparator=t,this.root=e||wn.EMPTY}insert(t,e){return new mn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(t){return new mn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,wn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new gn(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new gn(this.root,t,this.comparator,!1)}getReverseIterator(){return new gn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new gn(this.root,t,this.comparator,!0)}}class gn{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class wn{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:wn.RED,this.left=null!=r?r:wn.EMPTY,this.right=null!=i?i:wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new wn(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return wn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return wn.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe();if(this.right.isRed())throw fe();const t=this.left.check();if(t!==this.right.check())throw fe();return t+(this.isRed()?0:1)}}wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1,wn.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(t,e,n,r,i){return this}insert(t,e,n){return new wn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(t){this.comparator=t,this.data=new mn(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new vn(this.data.getIterator())}getIteratorFrom(t){return new vn(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof yn))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new yn(this.comparator);return e.data=t,e}}class vn{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class bn{constructor(t){this.fields=t,t.sort(je.comparator)}static empty(){return new bn([])}unionWith(t){let e=new yn(je.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new bn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Le(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class En extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Tn{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new En("Invalid base64 string: "+t):t}}(t);return new Tn(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Tn(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ae(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const _n=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cn(t){if(pe(!!t),"string"==typeof t){let e=0;const n=_n.exec(t);if(pe(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kn(t.seconds),nanos:kn(t.nanos)}}function kn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Sn(t){return"string"==typeof t?Tn.fromBase64String(t):Tn.fromUint8Array(t)}const In="server_timestamp",xn="__type__",An="__previous_value__",Ln="__local_write_time__";function Dn(t){var e,n;return(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{})[xn])||void 0===n?void 0:n.stringValue)===In}function Nn(t){const e=t.mapValue.fields[An];return Dn(e)?Nn(e):e}function On(t){const e=Cn(t.mapValue.fields[Ln].timestampValue);return new Oe(e.seconds,e.nanos)}class Pn{constructor(t,e,n,r,i,s,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}const Mn="(default)";class Rn{constructor(t,e){this.projectId=t,this.database=e||Mn}static empty(){return new Rn("","")}get isDefaultDatabase(){return this.database===Mn}isEqual(t){return t instanceof Rn&&t.projectId===this.projectId&&t.database===this.database}}const Vn="__type__",Fn="__max__",jn={fields:{__type__:{stringValue:Fn}}},Bn="__vector__",Un="value";function $n(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dn(t)?4:ir(t)?9007199254740991:nr(t)?10:11:fe()}function qn(t,e){if(t===e)return!0;const n=$n(t);if(n!==$n(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return On(t).isEqual(On(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Cn(t.timestampValue),r=Cn(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Sn(t.bytesValue).isEqual(Sn(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return kn(t.geoPointValue.latitude)===kn(e.geoPointValue.latitude)&&kn(t.geoPointValue.longitude)===kn(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return kn(t.integerValue)===kn(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=kn(t.doubleValue),r=kn(e.doubleValue);return n===r?Ye(n)===Ye(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Le(t.arrayValue.values||[],e.arrayValue.values||[],qn);case 10:case 11:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(dn(n)!==dn(r))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===r[t]||!qn(n[t],r[t])))return!1;return!0}(t,e);default:return fe()}}function zn(t,e){return void 0!==(t.values||[]).find((t=>qn(t,e)))}function Hn(t,e){if(t===e)return 0;const n=$n(t),r=$n(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=kn(t.integerValue||t.doubleValue),r=kn(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Kn(t.timestampValue,e.timestampValue);case 4:return Kn(On(t),On(e));case 5:return Ae(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Sn(t),r=Sn(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let t=0;t<n.length&&t<r.length;t++){const e=Ae(n[t],r[t]);if(0!==e)return e}return Ae(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Ae(kn(t.latitude),kn(e.latitude));return 0!==n?n:Ae(kn(t.longitude),kn(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Gn(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n,r,i,s;const o=t.fields||{},a=e.fields||{},c=null===(n=o[Un])||void 0===n?void 0:n.arrayValue,l=null===(r=a[Un])||void 0===r?void 0:r.arrayValue,u=Ae((null===(i=null==c?void 0:c.values)||void 0===i?void 0:i.length)||0,(null===(s=null==l?void 0:l.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Gn(c,l)}(t.mapValue,e.mapValue);case 11:return function(t,e){if(t===jn&&e===jn)return 0;if(t===jn)return 1;if(e===jn)return-1;const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let t=0;t<r.length&&t<s.length;++t){const e=Ae(r[t],s[t]);if(0!==e)return e;const o=Hn(n[r[t]],i[s[t]]);if(0!==o)return o}return Ae(r.length,s.length)}(t.mapValue,e.mapValue);default:throw fe()}}function Kn(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ae(t,e);const n=Cn(t),r=Cn(e),i=Ae(n.seconds,r.seconds);return 0!==i?i:Ae(n.nanos,r.nanos)}function Gn(t,e){const n=t.values||[],r=e.values||[];for(let t=0;t<n.length&&t<r.length;++t){const e=Hn(n[t],r[t]);if(e)return e}return Ae(n.length,r.length)}function Wn(t){return Qn(t)}function Qn(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Cn(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Sn(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return Be.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=Qn(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${Qn(t.fields[i])}`;return n+"}"}(t.mapValue):fe()}function Yn(t){switch($n(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nn(t);return e?16+Yn(e):16;case 5:return 2*t.stringValue.length;case 6:return Sn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(t){return(t.values||[]).reduce(((t,e)=>t+Yn(e)),0)}(t.arrayValue);case 10:case 11:return function(t){let e=0;return fn(t.fields,((t,n)=>{e+=t.length+Yn(n)})),e}(t.mapValue);default:throw fe()}}function Xn(t){return!!t&&"integerValue"in t}function Jn(t){return!!t&&"arrayValue"in t}function Zn(t){return!!t&&"nullValue"in t}function tr(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function er(t){return!!t&&"mapValue"in t}function nr(t){var e,n;return(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{})[Vn])||void 0===n?void 0:n.stringValue)===Bn}function rr(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fn(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=rr(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rr(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ir(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Fn}class sr{constructor(t){this.value=t}static empty(){return new sr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!er(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=rr(e)}setAll(t){let e=je.emptyPath(),n={},r=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=rr(t):r.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());er(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return qn(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];er(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){fn(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new sr(rr(this.value))}}function or(t){const e=[];return fn(t.fields,((t,n)=>{const r=new je([t]);if(er(n)){const t=or(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)})),new bn(e)}class ar{constructor(t,e,n,r,i,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(t){return new ar(t,0,Pe.min(),Pe.min(),Pe.min(),sr.empty(),0)}static newFoundDocument(t,e,n,r){return new ar(t,1,e,Pe.min(),n,r,0)}static newNoDocument(t,e){return new ar(t,2,e,Pe.min(),Pe.min(),sr.empty(),0)}static newUnknownDocument(t,e){return new ar(t,3,e,Pe.min(),Pe.min(),sr.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Pe.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=sr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ar&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cr{constructor(t,e){this.position=t,this.inclusive=e}}function lr(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?Be.comparator(Be.fromName(o.referenceValue),n.key):Hn(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ur(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qn(t.position[n],e.position[n]))return!1;return!0}class hr{constructor(t,e="asc"){this.field=t,this.dir=e}}function dr(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class fr{}class pr extends fr{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Er(t,e,n):"array-contains"===e?new kr(t,n):"in"===e?new Sr(t,n):"not-in"===e?new Ir(t,n):"array-contains-any"===e?new xr(t,n):new pr(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Tr(t,n):new _r(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Hn(e,this.value)):null!==e&&$n(this.value)===$n(e)&&this.matchesComparison(Hn(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mr extends fr{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new mr(t,e)}matches(t){return gr(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function gr(t){return"and"===t.op}function wr(t){return function(t){for(const e of t.filters)if(e instanceof mr)return!1;return!0}(t)&&gr(t)}function yr(t){if(t instanceof pr)return t.field.canonicalString()+t.op.toString()+Wn(t.value);if(wr(t))return t.filters.map((t=>yr(t))).join(",");{const e=t.filters.map((t=>yr(t))).join(",");return`${t.op}(${e})`}}function vr(t,e){return t instanceof pr?function(t,e){return e instanceof pr&&t.op===e.op&&t.field.isEqual(e.field)&&qn(t.value,e.value)}(t,e):t instanceof mr?function(t,e){return e instanceof mr&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,r)=>t&&vr(n,e.filters[r])),!0)}(t,e):void fe()}function br(t){return t instanceof pr?function(t){return`${t.field.canonicalString()} ${t.op} ${Wn(t.value)}`}(t):t instanceof mr?function(t){return t.op.toString()+" {"+t.getFilters().map(br).join(" ,")+"}"}(t):"Filter"}class Er extends pr{constructor(t,e,n){super(t,e,n),this.key=Be.fromName(n.referenceValue)}matches(t){const e=Be.comparator(t.key,this.key);return this.matchesComparison(e)}}class Tr extends pr{constructor(t,e){super(t,"in",e),this.keys=Cr(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class _r extends pr{constructor(t,e){super(t,"not-in",e),this.keys=Cr(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Cr(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>Be.fromName(t.referenceValue)))}class kr extends pr{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Jn(e)&&zn(e.arrayValue,this.value)}}class Sr extends pr{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&zn(this.value.arrayValue,e)}}class Ir extends pr{constructor(t,e){super(t,"not-in",e)}matches(t){if(zn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!zn(this.value.arrayValue,e)}}class xr extends pr{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Jn(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>zn(this.value.arrayValue,t)))}}class Ar{constructor(t,e=null,n=[],r=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.le=null}}function Lr(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Ar(t,e,n,r,i,s,o)}function Dr(t){const e=me(t);if(null===e.le){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>yr(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Qe(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>Wn(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>Wn(t))).join(",")),e.le=t}return e.le}function Nr(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dr(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vr(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ur(t.startAt,e.startAt)&&ur(t.endAt,e.endAt)}function Or(t){return Be.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Pr{constructor(t,e=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Mr(t){return new Pr(t)}function Rr(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Vr(t){const e=me(t);if(null===e.he){e.he=[];const t=new Set;for(const n of e.explicitOrderBy)e.he.push(n),t.add(n.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",r=function(t){let e=new yn(je.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);r.forEach((r=>{t.has(r.canonicalString())||r.isKeyField()||e.he.push(new hr(r,n))})),t.has(je.keyField().canonicalString())||e.he.push(new hr(je.keyField(),n))}return e.he}function Fr(t){const e=me(t);return e.Pe||(e.Pe=function(t,e){if("F"===t.limitType)return Lr(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new hr(t.field,e)}));const n=t.endAt?new cr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new cr(t.startAt.position,t.startAt.inclusive):null;return Lr(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Vr(t))),e.Pe}function jr(t,e,n){return new Pr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Br(t,e){return Nr(Fr(t),Fr(e))&&t.limitType===e.limitType}function Ur(t){return`${Dr(Fr(t))}|lt:${t.limitType}`}function $r(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>br(t))).join(", ")}]`),Qe(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>Wn(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>Wn(t))).join(",")),`Target(${e})`}(Fr(t))}; limitType=${t.limitType})`}function qr(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Be.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Vr(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const r=lr(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,Vr(t),e)||t.endAt&&!function(t,e,n){const r=lr(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,Vr(t),e))}(t,e)}function zr(t){return(e,n)=>{let r=!1;for(const i of Vr(t)){const t=Hr(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function Hr(t,e,n){const r=t.field.isKeyField()?Be.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Hn(r,i):fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe()}}class Kr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,r]of n)if(this.equalsFn(e,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){fn(this.inner,((e,n)=>{for(const[e,r]of n)t(e,r)}))}isEmpty(){return pn(this.inner)}size(){return this.innerSize}}const Gr=new mn(Be.comparator);function Wr(){return Gr}const Qr=new mn(Be.comparator);function Yr(...t){let e=Qr;for(const n of t)e=e.insert(n.key,n);return e}function Xr(t){let e=Qr;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Jr(){return ti()}function Zr(){return ti()}function ti(){return new Kr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const ei=new mn(Be.comparator),ni=new yn(Be.comparator);function ri(...t){let e=ni;for(const n of t)e=e.add(n);return e}const ii=new yn(Ae);function si(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ye(e)?"-0":e}}function oi(t){return{integerValue:""+t}}function ai(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Ye(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?oi(e):si(t,e)}class ci{constructor(){this._=void 0}}function li(t,e,n){return t instanceof di?function(t,e){const n={fields:{[xn]:{stringValue:In},[Ln]:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Dn(e)&&(e=Nn(e)),e&&(n.fields[An]=e),{mapValue:n}}(n,e):t instanceof fi?pi(t,e):t instanceof mi?gi(t,e):function(t,e){const n=hi(t,e),r=yi(n)+yi(t.Ie);return Xn(n)&&Xn(t.Ie)?oi(r):si(t.serializer,r)}(t,e)}function ui(t,e,n){return t instanceof fi?pi(t,e):t instanceof mi?gi(t,e):n}function hi(t,e){return t instanceof wi?function(t){return Xn(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class di extends ci{}class fi extends ci{constructor(t){super(),this.elements=t}}function pi(t,e){const n=vi(e);for(const e of t.elements)n.some((t=>qn(t,e)))||n.push(e);return{arrayValue:{values:n}}}class mi extends ci{constructor(t){super(),this.elements=t}}function gi(t,e){let n=vi(e);for(const e of t.elements)n=n.filter((t=>!qn(t,e)));return{arrayValue:{values:n}}}class wi extends ci{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function yi(t){return kn(t.integerValue||t.doubleValue)}function vi(t){return Jn(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class bi{constructor(t,e){this.version=t,this.transformResults=e}}class Ei{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ei}static exists(t){return new Ei(void 0,t)}static updateTime(t){return new Ei(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ti(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class _i{}function Ci(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Pi(t.key,Ei.none()):new Ai(t.key,t.data,Ei.none());{const n=t.data,r=sr.empty();let i=new yn(je.comparator);for(let t of e.fields)if(!i.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?r.delete(t):r.set(t,e),i=i.add(t)}return new Li(t.key,r,new bn(i.toArray()),Ei.none())}}function ki(t,e,n){t instanceof Ai?function(t,e,n){const r=t.value.clone(),i=Ni(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Li?function(t,e,n){if(!Ti(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=Ni(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Di(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Si(t,e,n,r){return t instanceof Ai?function(t,e,n,r){if(!Ti(t.precondition,e))return n;const i=t.value.clone(),s=Oi(t.fieldTransforms,r,e);return i.setAll(s),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,r):t instanceof Li?function(t,e,n,r){if(!Ti(t.precondition,e))return n;const i=Oi(t.fieldTransforms,r,e),s=e.data;return s.setAll(Di(t)),s.setAll(i),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,r):function(t,e,n){return Ti(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Ii(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),i=hi(r.transform,t||null);null!=i&&(null===n&&(n=sr.empty()),n.set(r.field,i))}return n||null}function xi(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Le(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof fi&&e instanceof fi||t instanceof mi&&e instanceof mi?Le(t.elements,e.elements,qn):t instanceof wi&&e instanceof wi?qn(t.Ie,e.Ie):t instanceof di&&e instanceof di}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ai extends _i{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Li extends _i{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Di(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Ni(t,e,n){const r=new Map;pe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ui(o,a,n[i]))}return r}function Oi(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,li(t,s,e))}return r}class Pi extends _i{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Mi extends _i{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ri{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const r=this.mutations[e];r.key.isEqual(t.key)&&ki(r,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Si(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Si(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Zr();return this.mutations.forEach((r=>{const i=t.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=e.has(r.key)?null:o;const a=Ci(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Pe.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),ri())}isEqual(t){return this.batchId===t.batchId&&Le(this.mutations,t.mutations,((t,e)=>xi(t,e)))&&Le(this.baseMutations,t.baseMutations,((t,e)=>xi(t,e)))}}class Vi{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){pe(t.mutations.length===n.length);let r=ei;const i=t.mutations;for(let t=0;t<i.length;t++)r=r.insert(i[t].key,n[t].version);return new Vi(t,e,n,r)}}class Fi{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ji{constructor(t,e){this.count=t,this.unchangedNames=e}}var Bi,Ui;function $i(t){if(void 0===t)return ue("GRPC error has no .code"),ge.UNKNOWN;switch(t){case Bi.OK:return ge.OK;case Bi.CANCELLED:return ge.CANCELLED;case Bi.UNKNOWN:return ge.UNKNOWN;case Bi.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Bi.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Bi.INTERNAL:return ge.INTERNAL;case Bi.UNAVAILABLE:return ge.UNAVAILABLE;case Bi.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Bi.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Bi.NOT_FOUND:return ge.NOT_FOUND;case Bi.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Bi.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Bi.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Bi.ABORTED:return ge.ABORTED;case Bi.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Bi.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Bi.DATA_LOSS:return ge.DATA_LOSS;default:return fe()}}(Ui=Bi||(Bi={}))[Ui.OK=0]="OK",Ui[Ui.CANCELLED=1]="CANCELLED",Ui[Ui.UNKNOWN=2]="UNKNOWN",Ui[Ui.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ui[Ui.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ui[Ui.NOT_FOUND=5]="NOT_FOUND",Ui[Ui.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ui[Ui.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ui[Ui.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ui[Ui.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ui[Ui.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ui[Ui.ABORTED=10]="ABORTED",Ui[Ui.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ui[Ui.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ui[Ui.INTERNAL=13]="INTERNAL",Ui[Ui.UNAVAILABLE=14]="UNAVAILABLE",Ui[Ui.DATA_LOSS=15]="DATA_LOSS";const qi=new qt([4294967295,4294967295],0);function zi(t){const e=(new TextEncoder).encode(t),n=new zt;return n.update(e),new Uint8Array(n.digest())}function Hi(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new qt([n,r],0),new qt([i,s],0)]}class Ki{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Gi(`Invalid padding: ${e}`);if(n<0)throw new Gi(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new Gi(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new Gi(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*t.length-e,this.de=qt.fromNumber(this.Ee)}Ae(t,e,n){let r=t.add(e.multiply(qt.fromNumber(n)));return 1===r.compare(qi)&&(r=new qt([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ee)return!1;const e=zi(t),[n,r]=Hi(e);for(let t=0;t<this.hashCount;t++){const e=this.Ae(n,r,t);if(!this.Re(e))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),s=new Ki(i,r,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.Ee)return;const e=zi(t),[n,r]=Hi(e);for(let t=0;t<this.hashCount;t++){const e=this.Ae(n,r,t);this.Ve(e)}}Ve(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Gi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wi{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,Qi.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new Wi(Pe.min(),r,new mn(Ae),Wr(),ri())}}class Qi{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Qi(n,e,ri(),ri(),ri())}}class Yi{constructor(t,e,n,r){this.me=t,this.removedTargetIds=e,this.key=n,this.fe=r}}class Xi{constructor(t,e){this.targetId=t,this.ge=e}}class Ji{constructor(t,e,n=Tn.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class Zi{constructor(){this.pe=0,this.ye=ns(),this.we=Tn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return 0!==this.pe}get ve(){return this.be}Ce(t){t.approximateByteSize()>0&&(this.be=!0,this.we=t)}Fe(){let t=ri(),e=ri(),n=ri();return this.ye.forEach(((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:fe()}})),new Qi(this.we,this.Se,t,e,n)}Me(){this.be=!1,this.ye=ns()}xe(t,e){this.be=!0,this.ye=this.ye.insert(t,e)}Oe(t){this.be=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,pe(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class ts{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Wr(),this.$e=es(),this.Ke=es(),this.Ue=new mn(Ae)}We(t){for(const e of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(e,t.fe):this.ze(e,t.key,t.fe);for(const e of t.removedTargetIds)this.ze(e,t.key,t.fe)}je(t){this.forEachTarget(t,(e=>{const n=this.He(e);switch(t.state){case 0:this.Je(e)&&n.Ce(t.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(t.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(e);break;case 3:this.Je(e)&&(n.Le(),n.Ce(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),n.Ce(t.resumeToken));break;default:fe()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach(((t,n)=>{this.Je(n)&&e(n)}))}Ze(t){const e=t.targetId,n=t.ge.count,r=this.Xe(e);if(r){const i=r.target;if(Or(i))if(0===n){const t=new Be(i.path);this.ze(e,t,ar.newNoDocument(t,Pe.min()))}else pe(1===n);else{const r=this.et(e);if(r!==n){const n=this.tt(t),i=n?this.nt(n,t,r):1;if(0!==i){this.Ye(e);const t=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(e,t)}}}}}tt(t){const e=t.ge.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=e;let s,o;try{s=Sn(n).toUint8Array()}catch(t){if(t instanceof En)return he("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new Ki(s,r,i)}catch(t){return he(t instanceof Gi?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.Ee?null:o}nt(t,e,n){return e.ge.count===n-this.st(t,e.targetId)?0:2}st(t,e){const n=this.ke.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.ke.it(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.mightContain(s)||(this.ze(e,n,null),r++)})),r}ot(t){const e=new Map;this.qe.forEach(((n,r)=>{const i=this.Xe(r);if(i){if(n.current&&Or(i.target)){const e=new Be(i.target.path);this._t(e).has(r)||this.ut(r,e)||this.ze(r,e,ar.newNoDocument(e,t))}n.ve&&(e.set(r,n.Fe()),n.Me())}}));let n=ri();this.Ke.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.Xe(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))})),this.Qe.forEach(((e,n)=>n.setReadTime(t)));const r=new Wi(t,e,this.Ue,this.Qe,n);return this.Qe=Wr(),this.$e=es(),this.Ke=es(),this.Ue=new mn(Ae),r}Ge(t,e){if(!this.Je(t))return;const n=this.ut(t,e.key)?2:0;this.He(t).xe(e.key,n),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t)),this.Ke=this.Ke.insert(e.key,this.ct(e.key).add(t))}ze(t,e,n){if(!this.Je(t))return;const r=this.He(t);this.ut(t,e)?r.xe(e,1):r.Oe(e),this.Ke=this.Ke.insert(e,this.ct(e).delete(t)),this.Ke=this.Ke.insert(e,this.ct(e).add(t)),n&&(this.Qe=this.Qe.insert(e,n))}removeTarget(t){this.qe.delete(t)}et(t){const e=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let e=this.qe.get(t);return e||(e=new Zi,this.qe.set(t,e)),e}ct(t){let e=this.Ke.get(t);return e||(e=new yn(Ae),this.Ke=this.Ke.insert(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new yn(Ae),this.$e=this.$e.insert(t,e)),e}Je(t){const e=null!==this.Xe(t);return e||le("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){const e=this.qe.get(t);return e&&e.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new Zi),this.ke.getRemoteKeysForTarget(t).forEach((e=>{this.ze(t,e,null)}))}ut(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}}function es(){return new mn(Be.comparator)}function ns(){return new mn(Be.comparator)}const rs={asc:"ASCENDING",desc:"DESCENDING"},is={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ss={and:"AND",or:"OR"};class os{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function as(t,e){return t.useProto3Json||Qe(e)?e:{value:e}}function cs(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ls(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function us(t,e){return cs(t,e.toTimestamp())}function hs(t){return pe(!!t),Pe.fromTimestamp(function(t){const e=Cn(t);return new Oe(e.seconds,e.nanos)}(t))}function ds(t,e){return fs(t,e).canonicalString()}function fs(t,e){const n=function(t){return new Ve(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function ps(t){const e=Ve.fromString(t);return pe(Ns(e)),e}function ms(t,e){return ds(t.databaseId,e.path)}function gs(t,e){const n=ps(e);if(n.get(1)!==t.databaseId.projectId)throw new we(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new we(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Be(vs(n))}function ws(t,e){return ds(t.databaseId,e)}function ys(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vs(t){return pe(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function bs(t,e,n){return{name:ms(t,e),fields:n.value.mapValue.fields}}function Es(t,e){return{documents:[ws(t,e.path)]}}function Ts(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ws(t,i);const s=function(t){if(0!==t.length)return Ls(mr.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:xs(t.field),direction:ks(t.dir)}}(t)))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=as(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{ht:n,parent:i}}function _s(t){let e=function(t){const e=ps(t);return 4===e.length?Ve.emptyPath():vs(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){pe(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=Cs(t);return e instanceof mr&&wr(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new hr(As(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Qe(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new cr(n,e)}(n.startAt));let l=null;return n.endAt&&(l=function(t){const e=!t.before,n=t.values||[];return new cr(n,e)}(n.endAt)),function(t,e,n,r,i,s,o,a){return new Pr(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",c,l)}function Cs(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=As(t.unaryFilter.field);return pr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=As(t.unaryFilter.field);return pr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=As(t.unaryFilter.field);return pr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=As(t.unaryFilter.field);return pr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):void 0!==t.fieldFilter?function(t){return pr.create(As(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return mr.create(t.compositeFilter.filters.map((t=>Cs(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return fe()}}(t.compositeFilter.op))}(t):fe()}function ks(t){return rs[t]}function Ss(t){return is[t]}function Is(t){return ss[t]}function xs(t){return{fieldPath:t.canonicalString()}}function As(t){return je.fromServerFormat(t.fieldPath)}function Ls(t){return t instanceof pr?function(t){if("=="===t.op){if(tr(t.value))return{unaryFilter:{field:xs(t.field),op:"IS_NAN"}};if(Zn(t.value))return{unaryFilter:{field:xs(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(tr(t.value))return{unaryFilter:{field:xs(t.field),op:"IS_NOT_NAN"}};if(Zn(t.value))return{unaryFilter:{field:xs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xs(t.field),op:Ss(t.op),value:t.value}}}(t):t instanceof mr?function(t){const e=t.getFilters().map((t=>Ls(t)));return 1===e.length?e[0]:{compositeFilter:{op:Is(t.op),filters:e}}}(t):fe()}function Ds(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Ns(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Os{constructor(t,e,n,r,i=Pe.min(),s=Pe.min(),o=Tn.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new Os(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Ps{constructor(t){this.Tt=t}}function Ms(t){const e=_s({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?jr(e,e.limit,"L"):e}class Rs{constructor(){}At(t,e){this.Rt(t,e),e.Vt()}Rt(t,e){if("nullValue"in t)this.ft(e,5);else if("booleanValue"in t)this.ft(e,10),e.gt(t.booleanValue?1:0);else if("integerValue"in t)this.ft(e,15),e.gt(kn(t.integerValue));else if("doubleValue"in t){const n=kn(t.doubleValue);isNaN(n)?this.ft(e,13):(this.ft(e,15),Ye(n)?e.gt(0):e.gt(n))}else if("timestampValue"in t){let n=t.timestampValue;this.ft(e,20),"string"==typeof n&&(n=Cn(n)),e.yt(`${n.seconds||""}`),e.gt(n.nanos||0)}else if("stringValue"in t)this.wt(t.stringValue,e),this.St(e);else if("bytesValue"in t)this.ft(e,30),e.bt(Sn(t.bytesValue)),this.St(e);else if("referenceValue"in t)this.Dt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.ft(e,45),e.gt(n.latitude||0),e.gt(n.longitude||0)}else"mapValue"in t?ir(t)?this.ft(e,Number.MAX_SAFE_INTEGER):nr(t)?this.vt(t.mapValue,e):(this.Ct(t.mapValue,e),this.St(e)):"arrayValue"in t?(this.Ft(t.arrayValue,e),this.St(e)):fe()}wt(t,e){this.ft(e,25),this.Mt(t,e)}Mt(t,e){e.yt(t)}Ct(t,e){const n=t.fields||{};this.ft(e,55);for(const t of Object.keys(n))this.wt(t,e),this.Rt(n[t],e)}vt(t,e){var n,r;const i=t.fields||{};this.ft(e,53);const s=Un,o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.ft(e,15),e.gt(kn(o)),this.wt(s,e),this.Rt(i[s],e)}Ft(t,e){const n=t.values||[];this.ft(e,50);for(const t of n)this.Rt(t,e)}Dt(t,e){this.ft(e,37),Be.fromName(t).path.forEach((t=>{this.ft(e,60),this.Mt(t,e)}))}ft(t,e){t.gt(e)}St(t){t.gt(2)}}Rs.xt=new Rs;class Vs{constructor(){this.Tn=new Fs}addToCollectionParentIndex(t,e){return this.Tn.add(e),Ke.resolve()}getCollectionParents(t,e){return Ke.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return Ke.resolve()}deleteFieldIndex(t,e){return Ke.resolve()}deleteAllFieldIndexes(t){return Ke.resolve()}createTargetIndexes(t,e){return Ke.resolve()}getDocumentsMatchingTarget(t,e){return Ke.resolve(null)}getIndexType(t,e){return Ke.resolve(0)}getFieldIndexes(t,e){return Ke.resolve([])}getNextCollectionGroupToUpdate(t){return Ke.resolve(null)}getMinOffset(t,e){return Ke.resolve($e.min())}getMinOffsetFromCollectionGroup(t,e){return Ke.resolve($e.min())}updateCollectionGroup(t,e,n){return Ke.resolve()}updateIndexEntries(t,e){return Ke.resolve()}}class Fs{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new yn(Ve.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new yn(Ve.comparator)).toArray()}}new Uint8Array(0);const js={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bs=41943040;class Us{static withCacheSize(t){return new Us(t,Us.DEFAULT_COLLECTION_PERCENTILE,Us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}}Us.DEFAULT_COLLECTION_PERCENTILE=10,Us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Us.DEFAULT=new Us(Bs,Us.DEFAULT_COLLECTION_PERCENTILE,Us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Us.DISABLED=new Us(-1,0,0);class $s{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new $s(0)}static Un(){return new $s(-1)}}const qs="LruGarbageCollector";function zs([t,e],[n,r]){const i=Ae(t,n);return 0===i?Ae(e,r):i}class Hs{constructor(t){this.Hn=t,this.buffer=new yn(zs),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();zs(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Ks{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(t){le(qs,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ge(t)?le(qs,"Ignoring IndexedDB error during garbage collection: ",t):await He(t)}await this.er(3e5)}))}}class Gs{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next((t=>Math.floor(e/100*t)))}nthSequenceNumber(t,e){if(0===e)return Ke.resolve(We.ae);const n=new Hs(e);return this.tr.forEachTarget(t,(t=>n.Zn(t.sequenceNumber))).next((()=>this.tr.rr(t,(t=>n.Zn(t))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.tr.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector","Garbage collection skipped; disabled"),Ke.resolve(js)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),js):this.ir(t,e)))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let n,r,i,s,o,a,c;const l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((e=>(e>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),r=this.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),this.nthSequenceNumber(t,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(t,n,e)))).next((e=>(i=e,a=Date.now(),this.removeOrphanedDocuments(t,n)))).next((t=>(c=Date.now(),ce()<=T.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-l}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${t} documents in `+(c-a)+"ms\n"+`Total Duration: ${c-l}ms`),Ke.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t}))))}}class Ws{constructor(){this.changes=new Kr((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ar.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Ke.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Qs{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Ys{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(n=r,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Si(n.mutation,t,bn.empty(),Oe.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,ri()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=ri()){const r=Jr();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,n).next((t=>{let e=Yr();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Jr();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,ri())))}populateOverlays(t,e,n){const r=[];return n.forEach((t=>{e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,r){let i=Wr();const s=ti(),o=ti();return e.forEach(((t,e)=>{const o=n.get(e.key);r.has(e.key)&&(void 0===o||o.mutation instanceof Li)?i=i.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),Si(o.mutation,e,o.mutation.getFieldMask(),Oe.now())):s.set(e.key,bn.empty())})),this.recalculateAndSaveOverlays(t,i).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Qs(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=ti();let r=new mn(((t,e)=>t-e)),i=ri();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const i of t)i.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||bn.empty();o=i.applyToLocalView(s,o),n.set(t,o);const a=(r.get(i.batchId)||ri()).add(t);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=Zr();c.forEach((t=>{if(!i.has(t)){const r=Ci(e.get(t),n.get(t));null!==r&&l.set(t,r),i=i.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,l))}return Ke.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,r){return function(t){return Be.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-i.size):Ke.resolve(Jr());let o=-1,a=i;return s.next((e=>Ke.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(e)?Ke.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,i))).next((()=>this.computeViews(t,a,e,ri()))).next((t=>({batchId:o,changes:Xr(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Be(e)).next((t=>{let e=Yr();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const i=e.collectionGroup;let s=Yr();return this.indexManager.getCollectionParents(t,i).next((o=>Ke.forEach(o,(o=>{const a=function(t,e){return new Pr(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return this.getDocumentsMatchingCollectionQuery(t,a,n,r).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i,r)))).next((t=>{i.forEach(((e,n)=>{const r=n.getKey();null===t.get(r)&&(t=t.insert(r,ar.newInvalidDocument(r)))}));let n=Yr();return t.forEach(((t,r)=>{const s=i.get(t);void 0!==s&&Si(s.mutation,r,bn.empty(),Oe.now()),qr(e,r)&&(n=n.insert(t,r))})),n}))}}class Xs{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return Ke.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:hs(t.createTime)}}(e)),Ke.resolve()}getNamedQuery(t,e){return Ke.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(t){return{name:t.name,query:Ms(t.bundledQuery),readTime:hs(t.readTime)}}(e)),Ke.resolve()}}class Js{constructor(){this.overlays=new mn(Be.comparator),this.Rr=new Map}getOverlay(t,e){return Ke.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Jr();return Ke.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,r)=>{this.Et(t,e,r)})),Ke.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.Rr.get(n);return void 0!==r&&(r.forEach((t=>this.overlays=this.overlays.remove(t))),this.Rr.delete(n)),Ke.resolve()}getOverlaysForCollection(t,e,n){const r=Jr(),i=e.length+1,s=new Be(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===i&&t.largestBatchId>n&&r.set(t.getKey(),t)}return Ke.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let i=new mn(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=i.get(t.largestBatchId);null===e&&(e=Jr(),i=i.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Jr(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=r)););return Ke.resolve(o)}Et(t,e,n){const r=this.overlays.get(n.key);if(null!==r){const t=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new Fi(e,n));let i=this.Rr.get(e);void 0===i&&(i=ri(),this.Rr.set(e,i)),this.Rr.set(e,i.add(n.key))}}class Zs{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(t){return Ke.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,Ke.resolve()}}class to{constructor(){this.Vr=new yn(eo.mr),this.gr=new yn(eo.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const n=new eo(t,e);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.wr(new eo(t,e))}Sr(t,e){t.forEach((t=>this.removeReference(t,e)))}br(t){const e=new Be(new Ve([])),n=new eo(e,t),r=new eo(e,t+1),i=[];return this.gr.forEachInRange([n,r],(t=>{this.wr(t),i.push(t.key)})),i}Dr(){this.Vr.forEach((t=>this.wr(t)))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new Be(new Ve([])),n=new eo(e,t),r=new eo(e,t+1);let i=ri();return this.gr.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new eo(t,0),n=this.Vr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class eo{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return Be.comparator(t.key,e.key)||Ae(t.Cr,e.Cr)}static pr(t,e){return Ae(t.Cr,e.Cr)||Be.comparator(t.key,e.key)}}class no{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new yn(eo.mr)}checkEmpty(t){return Ke.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ri(i,e,n,r);this.mutationQueue.push(s);for(const e of r)this.Mr=this.Mr.add(new eo(e.key,i)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return Ke.resolve(s)}lookupMutationBatch(t,e){return Ke.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.Nr(n),i=r<0?0:r;return Ke.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ke.resolve(0===this.mutationQueue.length?-1:this.Fr-1)}getAllMutationBatches(t){return Ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new eo(e,0),r=new eo(e,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([n,r],(t=>{const e=this.Or(t.Cr);i.push(e)})),Ke.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new yn(Ae);return e.forEach((t=>{const e=new eo(t,0),r=new eo(t,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([e,r],(t=>{n=n.add(t.Cr)}))})),Ke.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;Be.isDocumentKey(i)||(i=i.child(""));const s=new eo(new Be(i),0);let o=new yn(Ae);return this.Mr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.Cr)),!0)}),s),Ke.resolve(this.Br(o))}Br(t){const e=[];return t.forEach((t=>{const n=this.Or(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){pe(0===this.Lr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return Ke.forEach(e.mutations,(r=>{const i=new eo(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.Mr=n}))}qn(t){}containsKey(t,e){const n=new eo(e,0),r=this.Mr.firstAfterOrEqual(n);return Ke.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ke.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class ro{constructor(t){this.kr=t,this.docs=new mn(Be.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),i=r?r.size:0,s=this.kr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Ke.resolve(n?n.document.mutableCopy():ar.newInvalidDocument(e))}getEntries(t,e){let n=Wr();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():ar.newInvalidDocument(t))})),Ke.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let i=Wr();const s=e.path,o=new Be(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||qe(Ue(o),n)<=0||(r.has(o.key)||qr(e,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Ke.resolve(i)}getAllFromCollectionGroup(t,e,n,r){fe()}qr(t,e){return Ke.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new io(this)}getSize(t){return Ke.resolve(this.size)}}class io extends Ws{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?e.push(this.Ir.addEntry(t,r)):this.Ir.removeEntry(n)})),Ke.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}class so{constructor(t){this.persistence=t,this.Qr=new Kr((t=>Dr(t)),Nr),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.$r=0,this.Kr=new to,this.targetCount=0,this.Ur=$s.Kn()}forEachTarget(t,e){return this.Qr.forEach(((t,n)=>e(n))),Ke.resolve()}getLastRemoteSnapshotVersion(t){return Ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ke.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),Ke.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.$r&&(this.$r=e),Ke.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ur=new $s(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,Ke.resolve()}updateTargetData(t,e){return this.zn(e),Ke.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Kr.br(e.targetId),this.targetCount-=1,Ke.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Qr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Qr.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),Ke.waitFor(i).next((()=>r))}getTargetCount(t){return Ke.resolve(this.targetCount)}getTargetData(t,e){const n=this.Qr.get(e)||null;return Ke.resolve(n)}addMatchingKeys(t,e,n){return this.Kr.yr(e,n),Ke.resolve()}removeMatchingKeys(t,e,n){this.Kr.Sr(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),Ke.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Kr.br(e),Ke.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Kr.vr(e);return Ke.resolve(n)}containsKey(t,e){return Ke.resolve(this.Kr.containsKey(e))}}class oo{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new We(0),this.zr=!1,this.zr=!0,this.jr=new Zs,this.referenceDelegate=t(this),this.Hr=new so(this),this.indexManager=new Vs,this.remoteDocumentCache=function(t){return new ro(t)}((t=>this.referenceDelegate.Jr(t))),this.serializer=new Ps(e),this.Yr=new Xs(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Js,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Wr[t.toKey()];return n||(n=new no(e,this.referenceDelegate),this.Wr[t.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,n){le("MemoryPersistence","Starting transaction:",t);const r=new ao(this.Gr.next());return this.referenceDelegate.Zr(),n(r).next((t=>this.referenceDelegate.Xr(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}ei(t,e){return Ke.or(Object.values(this.Wr).map((n=>()=>n.containsKey(t,e))))}}class ao extends ze{constructor(t){super(),this.currentSequenceNumber=t}}class co{constructor(t){this.persistence=t,this.ti=new to,this.ni=null}static ri(t){return new co(t)}get ii(){if(this.ni)return this.ni;throw fe()}addReference(t,e,n){return this.ti.addReference(n,e),this.ii.delete(n.toString()),Ke.resolve()}removeReference(t,e,n){return this.ti.removeReference(n,e),this.ii.add(n.toString()),Ke.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),Ke.resolve()}removeTarget(t,e){this.ti.br(e.targetId).forEach((t=>this.ii.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.ii.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ke.forEach(this.ii,(n=>{const r=Be.fromPath(n);return this.si(t,r).next((t=>{t||e.removeEntry(r,Pe.min())}))})).next((()=>(this.ni=null,e.apply(t))))}updateLimboDocument(t,e){return this.si(t,e).next((t=>{t?this.ii.delete(e.toString()):this.ii.add(e.toString())}))}Jr(t){return 0}si(t,e){return Ke.or([()=>Ke.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class lo{constructor(t,e){this.persistence=t,this.oi=new Kr((t=>function(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Je(e)),e=Xe(t.get(n),e);return Je(e)}(t.path)),((t,e)=>t.isEqual(e))),this.garbageCollector=function(t,e){return new Gs(t,e)}(this,e)}static ri(t,e){return new lo(t,e)}Zr(){}Xr(t){return Ke.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}sr(t){let e=0;return this.rr(t,(t=>{e++})).next((()=>e))}rr(t,e){return Ke.forEach(this.oi,((n,r)=>this.ar(t,n,r).next((t=>t?Ke.resolve():e(r)))))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.qr(t,(r=>this.ar(t,r,e).next((t=>{t||(n++,i.removeEntry(r,Pe.min()))})))).next((()=>i.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),Ke.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.oi.set(n,t.currentSequenceNumber),Ke.resolve()}removeReference(t,e,n){return this.oi.set(n,t.currentSequenceNumber),Ke.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),Ke.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Yn(t.data.value)),e}ar(t,e,n){return Ke.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const t=this.oi.get(e);return Ke.resolve(void 0!==t&&t>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class uo{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.Hi=n,this.Ji=r}static Yi(t,e){let n=ri(),r=ri();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:r=r.add(t.doc.key)}return new uo(t,e.fromCache,n,r)}}class ho{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class fo{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=!function(){var t;const e=null===(t=s())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:function(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")>0?6:4}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,n,r){const i={result:null};return this.rs(t,e).next((t=>{i.result=t})).next((()=>{if(!i.result)return this.ss(t,e,r,n).next((t=>{i.result=t}))})).next((()=>{if(i.result)return;const n=new ho;return this._s(t,e,n).next((r=>{if(i.result=r,this.Xi)return this.us(t,e,n,r.size)}))})).next((()=>i.result))}us(t,e,n,r){return n.documentReadCount<this.es?(ce()<=T.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",$r(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Ke.resolve()):(ce()<=T.DEBUG&&le("QueryEngine","Query:",$r(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(ce()<=T.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",$r(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Fr(e))):Ke.resolve())}rs(t,e){if(Rr(e))return Ke.resolve(null);let n=Fr(e);return this.indexManager.getIndexType(t,n).next((r=>0===r?null:(null!==e.limit&&1===r&&(e=jr(e,null,"F"),n=Fr(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((r=>{const i=ri(...r);return this.ns.getDocuments(t,i).next((r=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.cs(e,r);return this.ls(e,s,i,n.readTime)?this.rs(t,jr(e,null,"F")):this.hs(t,s,e,n)}))))})))))}ss(t,e,n,r){return Rr(e)||r.isEqual(Pe.min())?Ke.resolve(null):this.ns.getDocuments(t,n).next((i=>{const s=this.cs(e,i);return this.ls(e,s,n,r)?Ke.resolve(null):(ce()<=T.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$r(e)),this.hs(t,s,e,function(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Pe.fromTimestamp(1e9===r?new Oe(n+1,0):new Oe(n,r));return new $e(i,Be.empty(),e)}(r,-1)).next((t=>t)))}))}cs(t,e){let n=new yn(zr(t));return e.forEach(((e,r)=>{qr(t,r)&&(n=n.add(r))})),n}ls(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(t,e,n){return ce()<=T.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",$r(e)),this.ns.getDocumentsMatchingQuery(t,e,$e.min(),n)}hs(t,e,n,r){return this.ns.getDocumentsMatchingQuery(t,n,r).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}const po="LocalStore";class mo{constructor(t,e,n,r){this.persistence=t,this.Ps=e,this.serializer=r,this.Ts=new mn(Ae),this.Is=new Kr((t=>Dr(t)),Nr),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(n)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Ys(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.Ts)))}}async function go(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.mutationQueue.getAllMutationBatches(t).next((i=>(r=i,n.As(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const i=[],s=[];let o=ri();for(const t of r){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({Rs:t,removedBatchIds:i,addedBatchIds:s})))}))}))}function wo(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Hr.getLastRemoteSnapshotVersion(t)))}function yo(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}async function vo(t,e,n){const r=me(t),i=r.Ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!Ge(t))throw t;le(po,`Failed to update sequence numbers for target ${e}: ${t}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function bo(t,e,n){const r=me(t);let i=Pe.min(),s=ri();return r.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const r=me(t),i=r.Is.get(n);return void 0!==i?Ke.resolve(r.Ts.get(i)):r.Hr.getTargetData(e,n)}(r,t,Fr(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>r.Ps.getDocumentsMatchingQuery(t,e,n?i:Pe.min(),n?s:ri()))).next((t=>(function(t,e,n){let r=t.Es.get(e)||Pe.min();n.forEach(((t,e)=>{e.readTime.compareTo(r)>0&&(r=e.readTime)})),t.Es.set(e,r)}(r,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,gs:s})))))}class Eo{constructor(){this.activeTargetIds=ii}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}bs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class To{constructor(){this.ho=new Eo,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,n){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Eo,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class _o{To(t){}shutdown(){}}const Co="ConnectivityMonitor";class ko{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){le(Co,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){le(Co,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let So=null;function Io(){return null===So?So=268435456+Math.round(2147483648*Math.random()):So++,"0x"+So.toString(16)}const xo="RestConnection",Ao={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Lo{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${n}/databases/${r}`,this.wo=this.databaseId.database===Mn?`project_id=${n}`:`project_id=${n}&database_id=${r}`}So(t,e,n,r,i){const s=Io(),o=this.bo(t,e.toUriEncodedString());le(xo,`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,r,i),this.vo(t,o,a,n).then((e=>(le(xo,`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw he(xo,`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}Co(t,e,n,r,i,s){return this.So(t,e,n,r,i)}Do(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+oe,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}bo(t,e){const n=Ao[t];return`${this.po}/v1/${e}:${n}`}terminate(){}}class Do{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}const No="WebChannelConnection";class Oo extends Lo{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,n,r){const i=Io();return new Promise(((s,o)=>{const a=new Gt;a.setWithCredentials(!0),a.listenOnce(Qt.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Yt.NO_ERROR:const e=a.getResponseJson();le(No,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(e)),s(e);break;case Yt.TIMEOUT:le(No,`RPC '${t}' ${i} timed out`),o(new we(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Yt.HTTP_ERROR:const n=a.getStatus();if(le(No,`RPC '${t}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(e)>=0?e:ge.UNKNOWN}(e.status);o(new we(t,e.message))}else o(new we(ge.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new we(ge.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{le(No,`RPC '${t}' ${i} completed.`)}}));const c=JSON.stringify(r);le(No,`RPC '${t}' ${i} sending request:`,r),a.send(e,"POST",c,n,15)}))}Wo(t,e,n){const r=Io(),i=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=te(),o=Zt(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const l=i.join("");le(No,`Creating RPC '${t}' stream ${r}: ${l}`,a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new Do({Fo:e=>{d?le(No,`Not sending because RPC '${t}' stream ${r} is closed:`,e):(h||(le(No,`Opening RPC '${t}' stream ${r} transport.`),u.open(),h=!0),le(No,`RPC '${t}' stream ${r} sending:`,e),u.send(e))},Mo:()=>u.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(u,Wt.EventType.OPEN,(()=>{d||(le(No,`RPC '${t}' stream ${r} transport opened.`),f.Qo())})),p(u,Wt.EventType.CLOSE,(()=>{d||(d=!0,le(No,`RPC '${t}' stream ${r} transport closed`),f.Ko())})),p(u,Wt.EventType.ERROR,(e=>{d||(d=!0,he(No,`RPC '${t}' stream ${r} transport errored:`,e),f.Ko(new we(ge.UNAVAILABLE,"The operation could not be completed")))})),p(u,Wt.EventType.MESSAGE,(e=>{var n;if(!d){const i=e.data[0];pe(!!i);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){le(No,`RPC '${t}' stream ${r} received error:`,o);const e=o.status;let n=function(t){const e=Bi[t];if(void 0!==e)return $i(e)}(e),i=o.message;void 0===n&&(n=ge.INTERNAL,i="Unknown error status: "+e+" with message "+o.message),d=!0,f.Ko(new we(n,i)),u.close()}else le(No,`RPC '${t}' stream ${r} received:`,i),f.Uo(i)}})),p(o,Jt.STAT_EVENT,(e=>{e.stat===Xt.PROXY?le(No,`RPC '${t}' stream ${r} detected buffering proxy`):e.stat===Xt.NOPROXY&&le(No,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.$o()}),0),f}}function Po(){return"undefined"!=typeof document?document:null}function Mo(t){return new os(t,!0)}class Ro{constructor(t,e,n=1e3,r=1.5,i=6e4){this.Ti=t,this.timerId=e,this.Go=n,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),r=Math.max(0,e-n);r>0&&le("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,(()=>(this.Yo=Date.now(),t()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}const Vo="PersistentStream";class Fo{constructor(t,e,n,r,i,s,o,a){this.Ti=t,this.n_=n,this.r_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Ro(t,e)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,(()=>this.T_())))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==t?this.a_.reset():e&&e.code===ge.RESOURCE_EXHAUSTED?(ue(e.toString()),ue("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===ge.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.i_===e&&this.V_(t,n)}),(e=>{t((()=>{const t=new we(ge.UNKNOWN,"Fetching auth token failed: "+e.message);return this.m_(t)}))}))}V_(t,e){const n=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo((()=>{n((()=>this.listener.xo()))})),this.stream.No((()=>{n((()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,(()=>(this.c_()&&(this.state=3),Promise.resolve()))),this.listener.No())))})),this.stream.Lo((t=>{n((()=>this.m_(t)))})),this.stream.onMessage((t=>{n((()=>1==++this.__?this.g_(t):this.onNext(t)))}))}l_(){this.state=5,this.a_.Xo((async()=>{this.state=0,this.start()}))}m_(t){return le(Vo,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget((()=>this.i_===t?e():(le(Vo,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class jo extends Fo{constructor(t,e,n,r,i,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i}f_(t,e){return this.connection.Wo("Listen",t,e)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(pe(void 0===e||"string"==typeof e),Tn.fromBase64String(e||"")):(pe(void 0===e||e instanceof Buffer||e instanceof Uint8Array),Tn.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?ge.UNKNOWN:$i(t.code);return new we(e,t.message||"")}(o);n=new Ji(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=gs(t,r.document.name),s=hs(r.document.updateTime),o=r.document.createTime?hs(r.document.createTime):Pe.min(),a=new sr({mapValue:{fields:r.document.fields}}),c=ar.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Yi(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=gs(t,r.document),s=r.readTime?hs(r.readTime):Pe.min(),o=ar.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Yi([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=gs(t,r.document),s=r.removedTargetIds||[];n=new Yi([],s,i,null)}else{if(!("filter"in e))return fe();{e.filter;const t=e.filter;t.targetId;const{count:r=0,unchangedNames:i}=t,s=new ji(r,i),o=t.targetId;n=new Xi(o,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Pe.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Pe.min():e.readTime?hs(e.readTime):Pe.min()}(t);return this.listener.p_(e,n)}y_(t){const e={};e.database=ys(this.serializer),e.addTarget=function(t,e){let n;const r=e.target;if(n=Or(r)?{documents:Es(t,r)}:{query:Ts(t,r).ht},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=ls(t,e.resumeToken);const r=as(t,e.expectedCount);null!==r&&(n.expectedCount=r)}else if(e.snapshotVersion.compareTo(Pe.min())>0){n.readTime=cs(t,e.snapshotVersion.toTimestamp());const r=as(t,e.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.I_(e)}w_(t){const e={};e.database=ys(this.serializer),e.removeTarget=t,this.I_(e)}}class Bo extends Fo{constructor(t,e,n,r,i,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return pe(!!t.streamToken),this.lastStreamToken=t.streamToken,pe(!t.writeResults||0===t.writeResults.length),this.listener.D_()}onNext(t){pe(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=function(t,e){return t&&t.length>0?(pe(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?hs(t.updateTime):hs(e);return n.isEqual(Pe.min())&&(n=hs(e)),new bi(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=hs(t.commitTime);return this.listener.v_(n,e)}C_(){const t={};t.database=ys(this.serializer),this.I_(t)}b_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof Ai)n={update:bs(t,e.key,e.value)};else if(e instanceof Pi)n={delete:ms(t,e.key)};else if(e instanceof Li)n={update:bs(t,e.key,e.data),updateMask:Ds(e.fieldMask)};else{if(!(e instanceof Mi))return fe();n={verify:ms(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof di)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof fi)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof mi)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wi)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw fe()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:us(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:fe()}(t,e.precondition)),n}(this.serializer,t)))};this.I_(e)}}class Uo{}class $o extends Uo{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new we(ge.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,n,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.So(t,fs(e,n),r,i,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new we(ge.UNKNOWN,t.toString())}))}Co(t,e,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Co(t,fs(e,n),r,s,o,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new we(ge.UNKNOWN,t.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class qo{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(t){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,"Online"===t&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ue(e),this.N_=!1):le("OnlineStateTracker",e)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}const zo="RemoteStore";class Ho{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To((t=>{n.enqueueAndForget((async()=>{ta(this)&&(le(zo,"Restarting streams for network reachability change."),await async function(t){const e=me(t);e.W_.add(4),await Go(e),e.j_.set("Unknown"),e.W_.delete(4),await Ko(e)}(this))}))})),this.j_=new qo(n,r)}}async function Ko(t){if(ta(t))for(const e of t.G_)await e(!0)}async function Go(t){for(const e of t.G_)await e(!1)}function Wo(t,e){const n=me(t);n.U_.has(e.targetId)||(n.U_.set(e.targetId,e),Zo(n)?Jo(n):ya(n).c_()&&Yo(n,e))}function Qo(t,e){const n=me(t),r=ya(n);n.U_.delete(e),r.c_()&&Xo(n,e),0===n.U_.size&&(r.c_()?r.P_():ta(n)&&n.j_.set("Unknown"))}function Yo(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ya(t).y_(e)}function Xo(t,e){t.H_.Ne(e),ya(t).w_(e)}function Jo(t){t.H_=new ts({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.U_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),ya(t).start(),t.j_.B_()}function Zo(t){return ta(t)&&!ya(t).u_()&&t.U_.size>0}function ta(t){return 0===me(t).W_.size}function ea(t){t.H_=void 0}async function na(t){t.j_.set("Online")}async function ra(t){t.U_.forEach(((e,n)=>{Yo(t,e)}))}async function ia(t,e){ea(t),Zo(t)?(t.j_.q_(e),Jo(t)):t.j_.set("Unknown")}async function sa(t,e,n){if(t.j_.set("Online"),e instanceof Ji&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.U_.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.U_.delete(r),t.H_.removeTarget(r))}(t,e)}catch(n){le(zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await oa(t,n)}else if(e instanceof Yi?t.H_.We(e):e instanceof Xi?t.H_.Ze(e):t.H_.je(e),!n.isEqual(Pe.min()))try{const e=await wo(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.H_.ot(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.U_.get(r);i&&t.U_.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const r=t.U_.get(e);if(!r)return;t.U_.set(e,r.withResumeToken(Tn.EMPTY_BYTE_STRING,r.snapshotVersion)),Xo(t,e);const i=new Os(r.target,e,n,r.sequenceNumber);Yo(t,i)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){le(zo,"Failed to raise snapshot:",e),await oa(t,e)}}async function oa(t,e,n){if(!Ge(e))throw e;t.W_.add(1),await Go(t),t.j_.set("Offline"),n||(n=()=>wo(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{le(zo,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await Ko(t)}))}function aa(t,e){return e().catch((n=>oa(t,n,e)))}async function ca(t){const e=me(t),n=va(e);let r=e.K_.length>0?e.K_[e.K_.length-1].batchId:-1;for(;la(e);)try{const t=await yo(e.localStore,r);if(null===t){0===e.K_.length&&n.P_();break}r=t.batchId,ua(e,t)}catch(t){await oa(e,t)}ha(e)&&da(e)}function la(t){return ta(t)&&t.K_.length<10}function ua(t,e){t.K_.push(e);const n=va(t);n.c_()&&n.S_&&n.b_(e.mutations)}function ha(t){return ta(t)&&!va(t).u_()&&t.K_.length>0}function da(t){va(t).start()}async function fa(t){va(t).C_()}async function pa(t){const e=va(t);for(const n of t.K_)e.b_(n.mutations)}async function ma(t,e,n){const r=t.K_.shift(),i=Vi.from(r,e,n);await aa(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await ca(t)}async function ga(t,e){e&&va(t).S_&&await async function(t,e){if(function(t){return function(t){switch(t){case ge.OK:return fe();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return fe()}}(t)&&t!==ge.ABORTED}(e.code)){const n=t.K_.shift();va(t).h_(),await aa(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await ca(t)}}(t,e),ha(t)&&da(t)}async function wa(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),le(zo,"RemoteStore received new credentials");const r=ta(n);n.W_.add(3),await Go(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await Ko(n)}function ya(t){return t.J_||(t.J_=function(t,e,n){const r=me(t);return r.M_(),new jo(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{xo:na.bind(null,t),No:ra.bind(null,t),Lo:ia.bind(null,t),p_:sa.bind(null,t)}),t.G_.push((async e=>{e?(t.J_.h_(),Zo(t)?Jo(t):t.j_.set("Unknown")):(await t.J_.stop(),ea(t))}))),t.J_}function va(t){return t.Y_||(t.Y_=function(t,e,n){const r=me(t);return r.M_(),new Bo(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:fa.bind(null,t),Lo:ga.bind(null,t),D_:pa.bind(null,t),v_:ma.bind(null,t)}),t.G_.push((async e=>{e?(t.Y_.h_(),await ca(t)):(await t.Y_.stop(),t.K_.length>0&&(le(zo,`Stopping write stream with ${t.K_.length} pending writes`),t.K_=[]))}))),t.Y_}class ba{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ye,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new ba(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new we(ge.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ea(t,e){if(ue("AsyncQueue",`${e}: ${t}`),Ge(t))return new we(ge.UNAVAILABLE,`${e}: ${t}`);throw t}class Ta{static emptySet(t){return new Ta(t.comparator)}constructor(t){this.comparator=t?(e,n)=>t(e,n)||Be.comparator(e.key,n.key):(t,e)=>Be.comparator(t.key,e.key),this.keyedMap=Yr(),this.sortedSet=new mn(this.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Ta))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Ta;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class _a{constructor(){this.Z_=new mn(Be.comparator)}track(t){const e=t.doc.key,n=this.Z_.get(e);n?0!==t.type&&3===n.type?this.Z_=this.Z_.insert(e,t):3===t.type&&1!==n.type?this.Z_=this.Z_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Z_=this.Z_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Z_=this.Z_.remove(e):1===t.type&&2===n.type?this.Z_=this.Z_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):fe():this.Z_=this.Z_.insert(e,t)}X_(){const t=[];return this.Z_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Ca{constructor(t,e,n,r,i,s,o,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,r,i){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new Ca(t,e,Ta.emptySet(e),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Br(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class ka{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some((t=>t.ra()))}}class Sa{constructor(){this.queries=Ia(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(t,e){const n=me(t),r=n.queries;n.queries=Ia(),r.forEach(((t,n)=>{for(const t of n.ta)t.onError(e)}))}(this,new we(ge.ABORTED,"Firestore shutting down"))}}function Ia(){return new Kr((t=>Ur(t)),Br)}function xa(t,e){const n=me(t);let r=!1;for(const t of e){const e=t.query,i=n.queries.get(e);if(i){for(const e of i.ta)e.oa(t)&&(r=!0);i.ea=t}}r&&La(n)}function Aa(t,e,n){const r=me(t),i=r.queries.get(e);if(i)for(const t of i.ta)t.onError(n);r.queries.delete(e)}function La(t){t.ia.forEach((t=>{t.next()}))}var Da,Na;(Na=Da||(Da={}))._a="default",Na.Cache="cache";class Oa{constructor(t,e,n){this.query=t,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Ca(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ua?this.la(t)&&(this.aa.next(t),e=!0):this.ha(t,this.onlineState)&&(this.Pa(t),e=!0),this.ca=t,e}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),e=!0),e}ha(t,e){if(!t.fromCache)return!0;if(!this.ra())return!0;const n="Offline"!==e;return(!this.options.Ta||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}la(t){if(t.docChanges.length>0)return!0;const e=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Pa(t){t=Ca.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==Da.Cache}}class Pa{constructor(t){this.key=t}}class Ma{constructor(t){this.key=t}}class Ra{constructor(t,e){this.query=t,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ri(),this.mutatedKeys=ri(),this.ya=zr(t),this.wa=new Ta(this.ya)}get Sa(){return this.fa}ba(t,e){const n=e?e.Da:new _a,r=e?e.wa:this.wa;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const l=r.get(t),u=qr(this.query,e)?e:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.va(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ya(u,a)>0||c&&this.ya(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{wa:s,Da:n,ls:o,mutatedKeys:i}}va(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){const i=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const s=t.Da.X_();s.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return n(t)-n(e)}(t.type,e.type)||this.ya(t.doc,e.doc))),this.Ca(n),r=null!=r&&r;const o=e&&!r?this.Fa():[],a=0===this.pa.size&&this.current&&!r?1:0,c=a!==this.ga;return this.ga=a,0!==s.length||c?{snapshot:new Ca(this.query,t.wa,i,s,t.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:o}:{Ma:o}}sa(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({wa:this.wa,Da:new _a,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach((t=>this.fa=this.fa.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.fa=this.fa.delete(t))),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=ri(),this.wa.forEach((t=>{this.xa(t.key)&&(this.pa=this.pa.add(t.key))}));const e=[];return t.forEach((t=>{this.pa.has(t)||e.push(new Ma(t))})),this.pa.forEach((n=>{t.has(n)||e.push(new Pa(n))})),e}Oa(t){this.fa=t.gs,this.pa=ri();const e=this.ba(t.documents);return this.applyChanges(e,!0)}Na(){return Ca.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,0===this.ga,this.hasCachedResults)}}const Va="SyncEngine";class Fa{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class ja{constructor(t){this.key=t,this.Ba=!1}}class Ba{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new Kr((t=>Ur(t)),Br),this.qa=new Map,this.Qa=new Set,this.$a=new mn(Be.comparator),this.Ka=new Map,this.Ua=new to,this.Wa={},this.Ga=new Map,this.za=$s.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function Ua(t,e,n=!0){const r=ac(t);let i;const s=r.ka.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await qa(r,e,n,!0),i}async function $a(t,e){const n=ac(t);await qa(n,e,!0,!1)}async function qa(t,e,n,r){const i=await function(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.Hr.getTargetData(t,e).next((i=>i?(r=i,Ke.resolve(r)):n.Hr.allocateTargetId(t).next((i=>(r=new Os(e,i,"TargetPurposeListen",t.currentSequenceNumber),n.Hr.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.Ts.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(t.targetId,t),n.Is.set(e,t.targetId)),t}))}(t.localStore,Fr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await async function(t,e,n,r,i){t.Ha=(e,n,r)=>async function(t,e,n,r){let i=e.view.ba(n);i.ls&&(i=await bo(t.localStore,e.query,!1).then((({documents:t})=>e.view.ba(t,i))));const s=r&&r.targetChanges.get(e.targetId),o=r&&null!=r.targetMismatches.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,s,o);return ec(t,e.targetId,a.Ma),a.snapshot}(t,e,n,r);const s=await bo(t.localStore,e,!0),o=new Ra(e,s.gs),a=o.ba(s.documents),c=Qi.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),l=o.applyChanges(a,t.isPrimaryClient,c);ec(t,n,l.Ma);const u=new Fa(e,n,o);return t.ka.set(e,u),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),l.snapshot}(t,e,s,"current"===o,i.resumeToken)),t.isPrimaryClient&&n&&Wo(t.remoteStore,i),a}async function za(t,e,n){const r=me(t),i=r.ka.get(e),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter((t=>!Br(t,e)))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await vo(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Qo(r.remoteStore,i.targetId),Za(r,i.targetId)})).catch(He)):(Za(r,i.targetId),await vo(r.localStore,i.targetId,!0))}async function Ha(t,e){const n=me(t),r=n.ka.get(e),i=n.qa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qo(n.remoteStore,r.targetId))}async function Ka(t,e){const n=me(t);try{const t=await function(t,e){const n=me(t),r=e.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const o=[];e.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Hr.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Hr.addMatchingKeys(t,s.addedDocuments,a))));let l=c.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?l=l.withResumeToken(Tn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Hr.updateTargetData(t,l))}));let a=Wr(),c=ri();if(e.documentUpdates.forEach((r=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(function(t,e,n){let r=ri(),i=ri();return n.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=Wr();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Pe.min())?(e.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),r=r.insert(n,s)):le(po,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Vs:r,fs:i}}))}(t,s,e.documentUpdates).next((t=>{a=t.Vs,c=t.fs}))),!r.isEqual(Pe.min())){const e=n.Hr.getLastRemoteSnapshotVersion(t).next((e=>n.Hr.setTargetsMetadata(t,t.currentSequenceNumber,r)));o.push(e)}return Ke.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.Ts=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.Ka.get(e);r&&(pe(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Ba=!0:t.modifiedDocuments.size>0?pe(r.Ba):t.removedDocuments.size>0&&(pe(r.Ba),r.Ba=!1))})),await ic(n,t,e)}catch(t){await He(t)}}function Ga(t,e,n){const r=me(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.ka.forEach(((n,r)=>{const i=r.view.sa(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=me(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const t of n.ta)t.sa(e)&&(r=!0)})),r&&La(n)}(r.eventManager,e),t.length&&r.La.p_(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Wa(t,e,n){const r=me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ka.get(e),s=i&&i.key;if(s){let t=new mn(Be.comparator);t=t.insert(s,ar.newNoDocument(s,Pe.min()));const n=ri().add(s),i=new Wi(Pe.min(),new Map,new mn(Ae),t,n);await Ka(r,i),r.$a=r.$a.remove(s),r.Ka.delete(e),rc(r)}else await vo(r.localStore,e,!1).then((()=>Za(r,e,n))).catch(He)}async function Qa(t,e){const n=me(t),r=e.batch.batchId;try{const t=await function(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const r=e.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const i=n.batch,s=i.keys();let o=Ke.resolve();return s.forEach((t=>{o=o.next((()=>r.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);pe(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),r.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=ri();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(n.localStore,e);Ja(n,r,null),Xa(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ic(n,t)}catch(t){await He(t)}}async function Ya(t,e,n){const r=me(t);try{const t=await function(t,e){const n=me(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let r;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(pe(null!==e),r=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,r))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(r.localStore,e);Ja(r,e,n),Xa(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ic(r,t)}catch(n){await He(n)}}function Xa(t,e){(t.Ga.get(e)||[]).forEach((t=>{t.resolve()})),t.Ga.delete(e)}function Ja(t,e,n){const r=me(t);let i=r.Wa[r.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function Za(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),n&&t.La.Ja(r,n);t.qa.delete(e),t.isPrimaryClient&&t.Ua.br(e).forEach((e=>{t.Ua.containsKey(e)||tc(t,e)}))}function tc(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);null!==n&&(Qo(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ka.delete(n),rc(t))}function ec(t,e,n){for(const r of n)r instanceof Pa?(t.Ua.addReference(r.key,e),nc(t,r)):r instanceof Ma?(le(Va,"Document no longer in limbo: "+r.key),t.Ua.removeReference(r.key,e),t.Ua.containsKey(r.key)||tc(t,r.key)):fe()}function nc(t,e){const n=e.key,r=n.path.canonicalString();t.$a.get(n)||t.Qa.has(r)||(le(Va,"New document in limbo: "+n),t.Qa.add(r),rc(t))}function rc(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new Be(Ve.fromString(e)),r=t.za.next();t.Ka.set(r,new ja(n)),t.$a=t.$a.insert(n,r),Wo(t.remoteStore,new Os(Fr(Mr(n.path)),r,"TargetPurposeLimboResolution",We.ae))}}async function ic(t,e,n){const r=me(t),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach(((t,a)=>{o.push(r.Ha(a,e,n).then((t=>{var e;if((t||n)&&r.isPrimaryClient){const i=t?!t.fromCache:null===(e=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===e?void 0:e.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(t){i.push(t);const e=uo.Yi(a.targetId,t);s.push(e)}})))})),await Promise.all(o),r.La.p_(i),await async function(t,e){const n=me(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Ke.forEach(e,(e=>Ke.forEach(e.Hi,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>Ke.forEach(e.Ji,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!Ge(t))throw t;le(po,"Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.Ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ts=n.Ts.insert(e,i)}}}(r.localStore,s))}async function sc(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){le(Va,"User change. New user:",e.toKey());const t=await go(n.localStore,e);n.currentUser=e,function(t){t.Ga.forEach((t=>{t.forEach((t=>{t.reject(new we(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Ga.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await ic(n,t.Rs)}}function oc(t,e){const n=me(t),r=n.Ka.get(e);if(r&&r.Ba)return ri().add(r.key);{let t=ri();const r=n.qa.get(e);if(!r)return t;for(const e of r){const r=n.ka.get(e);t=t.unionWith(r.view.Sa)}return t}}function ac(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ka.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oc.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Wa.bind(null,e),e.La.p_=xa.bind(null,e.eventManager),e.La.Ja=Aa.bind(null,e.eventManager),e}function cc(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Qa.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ya.bind(null,e),e}class lc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Mo(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return function(t,e,n,r){return new mo(t,e,n,r)}(this.persistence,new fo,t.initialUser,this.serializer)}Xa(t){return new oo(co.ri,this.serializer)}Za(t){return new To}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lc.provider={build:()=>new lc};class uc extends lc{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){pe(this.persistence.referenceDelegate instanceof lo);const n=this.persistence.referenceDelegate.garbageCollector;return new Ks(n,t.asyncQueue,e)}Xa(t){const e=void 0!==this.cacheSizeBytes?Us.withCacheSize(this.cacheSizeBytes):Us.DEFAULT;return new oo((t=>lo.ri(t,e)),this.serializer)}}class hc{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Ga(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=sc.bind(null,this.syncEngine),await async function(t,e){const n=me(t);e?(n.W_.delete(2),await Ko(n)):e||(n.W_.add(2),await Go(n),n.j_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Sa}createDatastore(t){const e=Mo(t.databaseInfo.databaseId),n=function(t){return new Oo(t)}(t.databaseInfo);return function(t,e,n,r){return new $o(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,r,i){return new Ho(t,e,n,r,i)}(this.localStore,this.datastore,t.asyncQueue,(t=>Ga(this.syncEngine,t,0)),ko.D()?new ko:new _o)}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new Ba(t,e,n,r,i,s);return o&&(a.ja=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(t){const e=me(t);le(zo,"RemoteStore shutting down."),e.W_.add(5),await Go(e),e.z_.shutdown(),e.j_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate(),null===(e=this.eventManager)||void 0===e||e.terminate()}}hc.provider={build:()=>new hc};class dc{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):ue("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}const fc="FirestoreClient";class pc{constructor(t,e,n,r,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=se.UNAUTHENTICATED,this.clientId=xe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async t=>{le(fc,"Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(le(fc,"Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ye;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Ea(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function mc(t,e){t.asyncQueue.verifyOperationInProgress(),le(fc,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await go(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function gc(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le(fc,"Using user provided OfflineComponentProvider");try{await mc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===ge.FAILED_PRECONDITION||t.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;he("Error using user provided cache. Falling back to memory cache: "+n),await mc(t,new lc)}}else le(fc,"Using default OfflineComponentProvider"),await mc(t,new uc(void 0));return t._offlineComponents}(t);le(fc,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>wa(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>wa(e.remoteStore,n))),t._onlineComponents=e}async function wc(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le(fc,"Using user provided OnlineComponentProvider"),await gc(t,t._uninitializedComponentsProvider._online)):(le(fc,"Using default OnlineComponentProvider"),await gc(t,new hc))),t._onlineComponents}async function yc(t){const e=await wc(t),n=e.eventManager;return n.onListen=Ua.bind(null,e.syncEngine),n.onUnlisten=za.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$a.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Ha.bind(null,e.syncEngine),n}function vc(t,e,n={}){const r=new ye;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new dc({next:n=>{s.su(),e.enqueueAndForget((()=>async function(t,e){const n=me(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const t=s.ta.indexOf(e);t>=0&&(s.ta.splice(t,1),0===s.ta.length?i=e.ra()?0:1:!s.na()&&e.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}(t,o))),n.fromCache&&"server"===r.source?i.reject(new we(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new Oa(n,s,{includeMetadataChanges:!0,Ta:!0});return async function(t,e){const n=me(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.na()&&e.ra()&&(r=2):(s=new ka,r=e.ra()?0:1);try{switch(r){case 0:s.ea=await n.onListen(i,!0);break;case 1:s.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(t){const n=Ea(t,`Initialization of query '${$r(e.query)}' failed`);return void e.onError(n)}n.queries.set(i,s),s.ta.push(e),e.sa(n.onlineState),s.ea&&e.oa(s.ea)&&La(n)}(t,o)}(await yc(t),t.asyncQueue,e,n,r))),r.promise}function bc(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Ec=new Map;function Tc(t,e,n){if(!n)throw new we(ge.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _c(t){if(!Be.isDocumentKey(t))throw new we(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cc(t){if(Be.isDocumentKey(t))throw new we(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kc(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":fe()}function Sc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new we(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kc(t);throw new we(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}const Ic="firestore.googleapis.com",xc=!0;class Ac{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new we(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ic,this.ssl=xc}else this.host=t.host,this.ssl=null!==(e=t.ssl)&&void 0!==e?e:xc;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=Bs;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new we(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,r){if(!0===e&&!0===r)throw new we(ge.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bc(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new we(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new we(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new we(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Lc{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ac({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new we(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ac(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new be;switch(t.type){case"firstParty":return new Ce(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new we(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Ec.get(t);e&&(le("ComponentProvider","Removing Datastore"),Ec.delete(t),e.terminate())}(this),Promise.resolve()}}class Dc{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Dc(this.firestore,t,this._query)}}class Nc{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Nc(this.firestore,t,this._key)}}class Oc extends Dc{constructor(t,e,n){super(t,e,Mr(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Nc(this.firestore,null,new Be(t))}withConverter(t){return new Oc(this.firestore,t,this._path)}}function Pc(t,e,...n){if(t=g(t),Tc("collection","path",e),t instanceof Lc){const r=Ve.fromString(e,...n);return Cc(r),new Oc(t,null,r)}{if(!(t instanceof Nc||t instanceof Oc))throw new we(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Cc(r),new Oc(t.firestore,null,r)}}function Mc(t,e,...n){if(t=g(t),1===arguments.length&&(e=xe.newId()),Tc("doc","path",e),t instanceof Lc){const r=Ve.fromString(e,...n);return _c(r),new Nc(t,null,new Be(r))}{if(!(t instanceof Nc||t instanceof Oc))throw new we(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return _c(r),new Nc(t.firestore,t instanceof Oc?t.converter:null,new Be(r))}}const Rc="AsyncQueue";class Vc{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Ro(this,"async_queue_retry"),this.Su=()=>{const t=Po();t&&le(Rc,"Visibility state changed to "+t.visibilityState),this.a_.t_()},this.bu=t;const e=Po();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=Po();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise((()=>{}));const e=new ye;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Vu.push(t),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Ge(t))throw t;le(Rc,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(t){const e=this.bu.then((()=>(this.pu=!0,t().catch((t=>{this.gu=t,this.pu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw ue("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.pu=!1,t))))));return this.bu=e,e}enqueueAfterDelay(t,e,n){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const r=ba.createAndSchedule(this,t,e,n,(t=>this.Fu(t)));return this.fu.push(r),r}Du(){this.gu&&fe()}verifyOperationInProgress(){}async Mu(){let t;do{t=this.bu,await t}while(t!==this.bu)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then((()=>{this.fu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.fu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Mu()}))}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}class Fc extends Lc{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new Vc,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Vc(t),this._firestoreClient=void 0,await t}}}function jc(t){if(t._terminated)throw new we(ge.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||function(t){var e,n,r;const i=t._freezeSettings(),s=function(t,e,n,r){return new Pn(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,bc(r.experimentalLongPollingOptions),r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new pc(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(t){const e=null==t?void 0:t._online.build();return{_offline:null==t?void 0:t._offline.build(e),_online:e}}(t._componentsProvider))}(t),t._firestoreClient}class Bc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Bc(Tn.fromBase64String(t))}catch(t){throw new we(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Bc(Tn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Uc{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new we(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new je(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class $c{constructor(t){this._methodName=t}}class qc{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new we(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new we(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ae(this._lat,t._lat)||Ae(this._long,t._long)}}class zc{constructor(t){this._values=(t||[]).map((t=>t))}toArray(){return this._values.map((t=>t))}isEqual(t){return function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(this._values,t._values)}}const Hc=/^__.*__$/;class Kc{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Li(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ai(t,this.data,e,this.fieldTransforms)}}class Gc{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Li(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Wc(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class Qc{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new Qc(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ku({path:n,Qu:!1});return r.$u(t),r}Ku(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ku({path:n,Qu:!1});return r.Bu(),r}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return al(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(0===t.length)throw this.Wu("Document fields must not be empty");if(Wc(this.Lu)&&Hc.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class Yc{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Mo(t)}ju(t,e,n,r=!1){return new Qc({Lu:t,methodName:e,zu:n,path:je.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xc(t){const e=t._freezeSettings(),n=Mo(t._databaseId);return new Yc(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Jc(t,e,n,r,i,s={}){const o=t.ju(s.merge||s.mergeFields?2:0,e,n,i);rl("Data must be an object, but it was:",o,r);const a=el(r,o);let c,l;if(s.merge)c=new bn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const r of s.mergeFields){const i=il(e,r,n);if(!o.contains(i))throw new we(ge.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);cl(t,i)||t.push(i)}c=new bn(t),l=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,l=o.fieldTransforms;return new Kc(new sr(a),c,l)}class Zc extends $c{_toFieldTransform(t){if(2!==t.Lu)throw 1===t.Lu?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Zc}}function tl(t,e){if(nl(t=g(t)))return rl("Unsupported field value:",e,t),el(t,e);if(t instanceof $c)return function(t,e){if(!Wc(e.Lu))throw e.Wu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Wu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&4!==e.Lu)throw e.Wu("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=tl(i,e.Uu(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=g(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ai(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Oe.fromDate(t);return{timestampValue:cs(e.serializer,n)}}if(t instanceof Oe){const n=new Oe(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:cs(e.serializer,n)}}if(t instanceof qc)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Bc)return{bytesValue:ls(e.serializer,t._byteString)};if(t instanceof Nc){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Wu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ds(t.firestore._databaseId||e.databaseId,t._key.path)}}if(t instanceof zc)return function(t,e){return{mapValue:{fields:{[Vn]:{stringValue:Bn},[Un]:{arrayValue:{values:t.toArray().map((t=>{if("number"!=typeof t)throw e.Wu("VectorValues must only contain numeric values.");return si(e.serializer,t)}))}}}}}}(t,e);throw e.Wu(`Unsupported field value: ${kc(t)}`)}(t,e)}function el(t,e){const n={};return pn(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fn(t,((t,r)=>{const i=tl(r,e.qu(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function nl(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Oe||t instanceof qc||t instanceof Bc||t instanceof Nc||t instanceof $c||t instanceof zc)}function rl(t,e,n){if(!nl(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=kc(n);throw"an object"===r?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function il(t,e,n){if((e=g(e))instanceof Uc)return e._internalPath;if("string"==typeof e)return ol(t,e);throw al("Field path arguments must be of type string or ",t,!1,void 0,n)}const sl=new RegExp("[~\\*/\\[\\]]");function ol(t,e,n){if(e.search(sl)>=0)throw al(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Uc(...e.split("."))._internalPath}catch(r){throw al(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function al(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new we(ge.INVALID_ARGUMENT,a+t+c)}function cl(t,e){return t.some((t=>t.isEqual(e)))}class ll{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nc(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new ul(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(hl("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class ul extends ll{data(){return super.data()}}function hl(t,e){return"string"==typeof e?ol(t,e):e instanceof Uc?e._internalPath:e._delegate._internalPath}class dl{convertValue(t,e="none"){switch($n(t)){case 0:return null;case 1:return t.booleanValue;case 2:return kn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Sn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw fe()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return fn(t,((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertVectorValue(t){var e,n,r;const i=null===(r=null===(n=null===(e=t.fields)||void 0===e?void 0:e[Un].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((t=>kn(t.doubleValue)));return new zc(i)}convertGeoPoint(t){return new qc(kn(t.latitude),kn(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Nn(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(On(t));default:return null}}convertTimestamp(t){const e=Cn(t);return new Oe(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Ve.fromString(t);pe(Ns(n));const r=new Rn(n.get(1),n.get(3)),i=new Be(n.popFirst(5));return r.isEqual(e)||ue(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}class fl{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class pl extends ll{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new ml(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(hl("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class ml extends pl{data(t={}){return super.data(t)}}class gl{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new fl(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new ml(this._firestore,this._userDataWriter,n.key,n,new fl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new we(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const r=new ml(t._firestore,t._userDataWriter,n.doc.key,n.doc,new fl(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new ml(t._firestore,t._userDataWriter,e.doc.key,e.doc,new fl(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:wl(e.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function wl(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}class yl extends dl{constructor(t){super(),this.firestore=t}convertBytes(t){return new Bc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Nc(this.firestore,null,e)}}function vl(t){t=Sc(t,Dc);const e=Sc(t.firestore,Fc),n=jc(e),r=new yl(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new we(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),vc(n,t._query).then((n=>new gl(e,r,t,n)))}function bl(t,e,n,...r){t=Sc(t,Nc);const i=Sc(t.firestore,Fc),s=Xc(i);let o;return o="string"==typeof(e=g(e))||e instanceof Uc?function(t,e,n,r,i,s){const o=t.ju(1,e,n),a=[il(e,r,n)],c=[i];if(s.length%2!=0)throw new we(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let t=0;t<s.length;t+=2)a.push(il(e,s[t])),c.push(s[t+1]);const l=[],u=sr.empty();for(let t=a.length-1;t>=0;--t)if(!cl(l,a[t])){const e=a[t];let n=c[t];n=g(n);const r=o.Ku(e);if(n instanceof Zc)l.push(e);else{const t=tl(n,r);null!=t&&(l.push(e),u.set(e,t))}}const h=new bn(l);return new Gc(u,h,o.fieldTransforms)}(s,"updateDoc",t._key,e,n,r):function(t,e,n,r){const i=t.ju(1,e,n);rl("Data must be an object, but it was:",i,r);const s=[],o=sr.empty();fn(r,((t,r)=>{const a=ol(e,t,n);r=g(r);const c=i.Ku(a);if(r instanceof Zc)s.push(a);else{const t=tl(r,c);null!=t&&(s.push(a),o.set(a,t))}}));const a=new bn(s);return new Gc(o,a,i.fieldTransforms)}(s,"updateDoc",t._key,e),Tl(i,[o.toMutation(t._key,Ei.exists(!0))])}function El(t,e){const n=Sc(t.firestore,Fc),r=Mc(t),i=function(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e);return Tl(n,[Jc(Xc(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Ei.exists(!1))]).then((()=>r))}function Tl(t,e){return function(t,e){const n=new ye;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const r=cc(t);try{const t=await function(t,e){const n=me(t),r=Oe.now(),i=e.reduce(((t,e)=>t.add(e.key)),ri());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Wr(),c=ri();return n.ds.getEntries(t,i).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((i=>{s=i;const o=[];for(const t of e){const e=Ii(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new Li(t.key,e,or(e.value.mapValue),Ei.exists(!0)))}return n.mutationQueue.addMutationBatch(t,r,o,e)})).next((e=>{o=e;const r=e.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Xr(s)})))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.Wa[t.currentUser.toKey()];r||(r=new mn(Ae)),r=r.insert(e,n),t.Wa[t.currentUser.toKey()]=r}(r,t.batchId,n),await ic(r,t.changes),await ca(r.remoteStore)}catch(t){const e=Ea(t,"Failed to persist write");n.reject(e)}}(await function(t){return wc(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(jc(t),e)}new WeakMap,function(t,e=!0){oe="11.3.1",It(new w("firestore",((t,{instanceIdentifier:n,options:r})=>{const i=t.getProvider("app").getImmediate(),s=new Fc(new Te(t.getProvider("auth-internal")),new Se(i,t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new we(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rn(t.options.projectId,e)}(i,n),i);return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s}),"PUBLIC").setMultipleInstances(!0)),Ot(re,ie,t),Ot(re,ie,"esm2017")}(),Ot("firebase","11.3.1","app");const _l="@firebase/installations",Cl="0.6.12",kl=`w:${Cl}`,Sl="FIS_v2",Il=new h("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function xl(t){return t instanceof u&&t.code.includes("request-failed")}function Al({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Ll(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function Dl(t,e){const n=(await e.json()).error;return Il.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Nl({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}async function Ol(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Pl(t){return new Promise((e=>{setTimeout(e,t)}))}const Ml=/^[cdef][\w-]{21}$/;function Rl(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){var e;return(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(t);return Ml.test(e)?e:""}catch(t){return""}}function Vl(t){return`${t.appName}!${t.appId}`}const Fl=new Map;function jl(t,e){const n=Vl(t);Bl(n,e),function(t,e){const n=(!Ul&&"BroadcastChannel"in self&&(Ul=new BroadcastChannel("[Firebase] FID Change"),Ul.onmessage=t=>{Bl(t.data.key,t.data.fid)}),Ul);n&&n.postMessage({key:t,fid:e}),0===Fl.size&&Ul&&(Ul.close(),Ul=null)}(n,e)}function Bl(t,e){const n=Fl.get(t);if(n)for(const t of n)t(e)}let Ul=null;const $l="firebase-installations-store";let ql=null;function zl(){return ql||(ql=j("firebase-installations-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore($l)}})),ql}async function Hl(t,e){const n=Vl(t),r=(await zl()).transaction($l,"readwrite"),i=r.objectStore($l),s=await i.get(n);return await i.put(e,n),await r.done,s&&s.fid===e.fid||jl(t,e.fid),e}async function Kl(t){const e=Vl(t),n=(await zl()).transaction($l,"readwrite");await n.objectStore($l).delete(e),await n.done}async function Gl(t,e){const n=Vl(t),r=(await zl()).transaction($l,"readwrite"),i=r.objectStore($l),s=await i.get(n),o=e(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||jl(t,o.fid),o}async function Wl(t){let e;const n=await Gl(t.appConfig,(n=>{const r=function(t){return Xl(t||{fid:Rl(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Il.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(t,e){try{const n=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Al(t),i=Nl(t),s=e.getImmediate({optional:!0});if(s){const t=await s.getHeartbeatsHeader();t&&i.append("x-firebase-client",t)}const o={fid:n,authVersion:Sl,appId:t.appId,sdkVersion:kl},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await Ol((()=>fetch(r,a)));if(c.ok){const t=await c.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:Ll(t.authToken)}}throw await Dl("Create Installation",c)}(t,e);return Hl(t.appConfig,n)}catch(n){throw xl(n)&&409===n.customData.serverCode?await Kl(t.appConfig):await Hl(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Ql(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function Ql(t){let e=await Yl(t.appConfig);for(;1===e.registrationStatus;)await Pl(100),e=await Yl(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await Wl(t);return n||e}return e}function Yl(t){return Gl(t,(t=>{if(!t)throw Il.create("installation-not-found");return Xl(t)}))}function Xl(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function Jl({appConfig:t,heartbeatServiceProvider:e},n){const r=function(t,{fid:e}){return`${Al(t)}/${e}/authTokens:generate`}(t,n),i=function(t,{refreshToken:e}){const n=Nl(t);return n.append("Authorization",function(t){return`${Sl} ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});if(s){const t=await s.getHeartbeatsHeader();t&&i.append("x-firebase-client",t)}const o={installation:{sdkVersion:kl,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},c=await Ol((()=>fetch(r,a)));if(c.ok)return Ll(await c.json());throw await Dl("Generate Auth Token",c)}async function Zl(t,e=!1){let n;const r=await Gl(t.appConfig,(r=>{if(!eu(r))throw Il.create("not-registered");const i=r.authToken;if(!e&&(2===(s=i).requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(s)))return r;var s;if(1===i.requestStatus)return n=async function(t,e){let n=await tu(t.appConfig);for(;1===n.authToken.requestStatus;)await Pl(100),n=await tu(t.appConfig);const r=n.authToken;return 0===r.requestStatus?Zl(t,e):r}(t,e),r;{if(!navigator.onLine)throw Il.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(r);return n=async function(t,e){try{const n=await Jl(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Hl(t.appConfig,r),n}catch(n){if(!xl(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Hl(t.appConfig,n)}else await Kl(t.appConfig);throw n}}(t,e),e}}));return n?await n:r.authToken}function tu(t){return Gl(t,(t=>{if(!eu(t))throw Il.create("not-registered");return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var e}))}function eu(t){return void 0!==t&&2===t.registrationStatus}function nu(t){return Il.create("missing-app-config-values",{valueName:t})}const ru="installations";It(new w(ru,(t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw nu("App Configuration");if(!t.name)throw nu("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw nu(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:xt(e,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),It(new w("installations-internal",(t=>{const e=xt(t.getProvider("app").getImmediate(),ru).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:r}=await Wl(e);return r?r.catch(console.error):Zl(e).catch(console.error),n.fid}(e),getToken:t=>async function(t,e=!1){const n=t;return await async function(t){const{registrationPromise:e}=await Wl(t);e&&await e}(n),(await Zl(n,e)).token}(e,t)}}),"PRIVATE")),Ot(_l,Cl),Ot(_l,Cl,"esm2017");const iu="analytics",su="https://www.googletagmanager.com/gtag/js",ou=new I("@firebase/analytics"),au=new h("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function cu(t){if(!t.startsWith(su)){const e=au.create("invalid-gtag-resource",{gtagURL:t});return ou.warn(e.message),""}return t}function lu(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}const uu=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function hu(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function du(t,e=uu,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw au.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw au.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new pu;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),fu({appId:r,apiKey:i,measurementId:s},o,a,e)}async function fu(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=uu){var s;const{appId:o,measurementId:a}=t;try{await function(t,e){return new Promise(((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener((()=>{clearTimeout(s),r(au.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(r,e)}catch(t){if(a)return ou.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==t?void 0:t.message}]`),{appId:o,measurementId:a};throw t}try{const e=await async function(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:hu(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let t="";try{const n=await o.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(t){}throw au.create("config-fetch-failed",{httpStatus:o.status,responseMessage:t})}return o.json()}(t);return i.deleteThrottleMetadata(o),e}catch(e){const c=e;if(!function(t){if(!(t instanceof u&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(i.deleteThrottleMetadata(o),a)return ou.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==c?void 0:c.message}]`),{appId:o,measurementId:a};throw e}const l=503===Number(null===(s=null==c?void 0:c.customData)||void 0===s?void 0:s.httpStatus)?m(n,i.intervalMillis,30):m(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(o,h),ou.debug(`Calling attemptFetch again in ${l} millis`),fu(t,h,r,i)}}class pu{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}let mu,gu;async function wu(t,e,n,r,i,s,o){var a;const u=du(t);u.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&ou.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>ou.error(t))),e.push(u);const h=async function(){if(!c())return ou.warn(au.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await l()}catch(t){return ou.warn(au.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),!1}return!0}().then((t=>t?r.getId():void 0)),[d,f]=await Promise.all([u,h]);(function(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(su)&&n.src.includes(t))return n;return null})(s)||function(t,e){const n=function(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy("firebase-js-sdk-policy",e)),n}(0,{createScriptURL:cu}),r=document.createElement("script"),i=`${su}?l=${t}&id=${e}`;r.src=n?null==n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}(s,d.measurementId),gu&&(i("consent","default",gu),gu=void 0),i("js",new Date);const p=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return p.origin="firebase",p.update=!0,null!=f&&(p.firebase_id=f),i("config",d.measurementId,p),mu&&(i("set",mu),mu=void 0),d.measurementId}class yu{constructor(t){this.app=t}_delete(){return delete vu[this.app.options.appId],Promise.resolve()}}let vu={},bu=[];const Eu={};let Tu,_u,Cu="dataLayer",ku=!1;function Su(t,e,n){!function(){const t=[];if(function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()&&t.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),n=au.create("invalid-analytics-context",{errorInfo:e});ou.warn(n.message)}}();const r=t.options.appId;if(!r)throw au.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw au.create("no-api-key");ou.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=vu[r])throw au.create("already-exists",{id:r});if(!ku){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Cu);const{wrappedGtag:t,gtagCore:e}=function(t,e,n,r,i){let s=function(...t){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function(t,e,n,r){return async function(i,...s){try{if("event"===i){const[r,i]=s;await async function(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let t=i.send_to;Array.isArray(t)||(t=[t]);const r=await lu(n);for(const n of t){const t=r.find((t=>t.measurementId===n)),i=t&&e[t.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(t){ou.error(t)}}(t,e,n,r,i)}else if("config"===i){const[i,o]=s;await async function(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const t=(await lu(n)).find((t=>t.measurementId===i));t&&await e[t.appId]}}catch(t){ou.error(t)}t("config",i,s)}(t,e,n,r,i,o)}else if("consent"===i){const[e,n]=s;t("consent",e,n)}else if("get"===i){const[e,n,r]=s;t("get",e,n,r)}else if("set"===i){const[e]=s;t("set",e)}else t(i,...s)}catch(t){ou.error(t)}}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}(vu,bu,Eu,Cu,"gtag");_u=t,Tu=e,ku=!0}return vu[r]=wu(t,bu,Eu,e,Tu,Cu,n),new yu(t)}const Iu="@firebase/analytics",xu="0.10.11";It(new w(iu,((t,{options:e})=>Su(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),It(new w("analytics-internal",(function(t){try{const e=t.getProvider(iu).getImmediate();return{logEvent:(t,n,r)=>function(t,e,n,r){t=g(t),async function(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const i=await e;t("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(_u,vu[t.app.options.appId],e,n,r).catch((t=>ou.error(t)))}(e,t,n,r)}}catch(t){throw au.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),Ot(Iu,xu),Ot(Iu,xu,"esm2017");var Au=Dt({apiKey:"AIzaSyCTMuIdf9I1O-6b0HoIRNq_knRSugF0v-o",authDomain:"recipe-app-9a9d3.firebaseapp.com",projectId:"recipe-app-9a9d3",storageBucket:"recipe-app-9a9d3.firebasestorage.app",messagingSenderId:"421349767654",appId:"1:421349767654:web:c1fb2585428be6c6f37e27",measurementId:"G-TDHW67H4RX"}),Lu=(function(t=Nt()){const e=xt(t=g(t),iu);e.isInitialized()?e.getImmediate():function(t,e={}){const n=xt(t,iu);if(n.isInitialized()){const t=n.getImmediate();if(f(e,n.getOptions()))return t;throw au.create("already-initialized")}n.initialize({options:e})}(t)}(Au),function(t){const e="object"==typeof t?t:Nt(),n="string"==typeof t?t:Mn,r=xt(e,"firestore").getImmediate({identifier:n});if(!r._initialized){const t=(t=>{const e=(t=>{var e,n;return null===(n=null===(e=s())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})("firestore");t&&function(t,e,n,r={}){var s;const o=(t=Sc(t,Lc))._getSettings(),a=`${e}:${n}`;if(o.host!==Ic&&o.host!==a&&he("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=se.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i(JSON.stringify({alg:"none",type:"JWT"})),i(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(s=t._app)||void 0===s?void 0:s.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new we(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new se(o)}t._authCredentials=new Ee(new ve(e,n))}}(r,...t)}return r}(Au));function Du(t){return Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Du(t)}function Nu(){Nu=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var s=e&&e.prototype instanceof w?e:w,o=Object.create(s.prototype),a=new L(r||[]);return i(o,"_invoke",{value:S(t,n,a)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",m="completed",g={};function w(){}function y(){}function v(){}var b={};l(b,o,(function(){return this}));var E=Object.getPrototypeOf,T=E&&E(E(D([])));T&&T!==n&&r.call(T,o)&&(b=T);var _=v.prototype=w.prototype=Object.create(b);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(i,s,o,a){var c=h(t[i],t,s);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Du(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):e.resolve(u).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,a)}))}a(c.arg)}var s;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return s=s?s.then(i,i):i()}})}function S(e,n,r){var i=d;return function(s,o){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===s)throw o;return{value:t,done:!0}}for(r.method=s,r.arg=o;;){var a=r.delegate;if(a){var c=I(a,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=h(e,n,r);if("normal"===l.type){if(i=r.done?m:f,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function I(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var s=h(i,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,g;var o=s.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}throw new TypeError(Du(e)+" is not iterable")}return y.prototype=v,i(_,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},C(k.prototype),l(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new k(u(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(_),l(_,c,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=D,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function Ou(t,e,n,r,i,s,o){try{var a=t[s](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}function Pu(t){return Mu.apply(this,arguments)}function Mu(){var t;return t=Nu().mark((function t(e){var n;return Nu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,El(Pc(Lu,"recipes"),e);case 3:n=t.sent,console.log("Recipe added with ID: ",n.id),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error adding recipe: ",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})),Mu=function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function o(t){Ou(s,r,i,o,a,"next",t)}function a(t){Ou(s,r,i,o,a,"throw",t)}o(void 0)}))},Mu.apply(this,arguments)}function Ru(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=document.createElement("div");e.classList.add("modal-overlay");var n=document.createElement("div");n.classList.add("modal-content");var r=document.createElement("div");r.classList.add("modal-header"),r.innerHTML="\n    <h3>".concat(t?"Edit Recipe":"Add New Recipe",'</h3>\n    <button class="modal-close">&times;</button>\n  '),n.appendChild(r);var i=document.createElement("div");function s(t){var e=document.createElement("div");return e.textContent=t,e.innerHTML}i.classList.add("modal-body"),i.innerHTML='\n    <form id="modal-add-recipe-form">\n      <div class="form-group">\n        <label for="modal-title">Title</label>\n        <input type="text" id="modal-title" name="title" class="form-control" required value="'.concat(t?t.title:"",'">\n      </div>\n      <div class="form-group">\n        <label for="modal-ingredients">Ingredients (comma separated)</label>\n        <input type="text" id="modal-ingredients" name="ingredients" class="form-control" required value="').concat(t?t.ingredients.join(", "):"",'">\n      </div>\n      <div class="form-group">\n        <label for="modal-instructions">Instructions (line separated)</label>\n        <textarea id="modal-instructions" name="instructions" class="form-control" rows="4" required>').concat(t?Object.values(t.instructions).join("\n"):"",'</textarea>\n      </div>\n      <div class="form-group">\n        <label for="modal-preparationTime">Preparation Time (minutes)</label>\n        <input type="number" id="modal-preparationTime" name="preparationTime" class="form-control" required value="').concat(t?t.preparationTime:"",'">\n      </div>\n      <div class="form-group">\n        <label for="modal-difficulty">Difficulty</label>\n        <select id="modal-difficulty" name="difficulty" class="form-control" required>\n          <option value="">Select difficulty</option>\n          <option value="Easy" ').concat(t&&"Easy"===t.difficulty?"selected":"",'>Easy</option>\n          <option value="Medium" ').concat(t&&"Medium"===t.difficulty?"selected":"",'>Medium</option>\n          <option value="Hard" ').concat(t&&"Hard"===t.difficulty?"selected":"",'>Hard</option>\n        </select>\n      </div>\n      <div class="form-group">\n        <label for="modal-servings">Servings</label>\n        <input type="number" id="modal-servings" name="servings" class="form-control" required value="').concat(t?t.servings:"",'">\n      </div>\n      <div class="form-group">\n        <label for="modal-category">Category</label>\n        <input type="text" id="modal-category" name="category" class="form-control" required value="').concat(t?t.category:"",'">\n      </div>\n      <div class="form-group">\n        <label for="modal-imageUrl">Image URL</label>\n        <input type="url" id="modal-imageUrl" name="imageUrl" class="form-control" required value="').concat(t?t.imageUrl:"",'">\n      </div>\n      <div class="form-group">\n        <label for="modal-notes">Notes</label>\n        <textarea id="modal-notes" name="notes" class="form-control" rows="3" required>').concat(t?t.notes:"",'</textarea>\n      </div>\n      <button type="submit" class="btn btn-primary mt-3">').concat(t?"Update Recipe":"Submit Recipe","</button>\n    </form>\n  "),n.appendChild(i),e.appendChild(n),n.querySelector(".modal-close").addEventListener("click",(function(){return e.remove()})),e.addEventListener("click",(function(t){t.target===e&&e.remove()}));var o=n.querySelector("#modal-add-recipe-form");return o.addEventListener("submit",(function(n){n.preventDefault();var r=s(o.elements.title.value.trim()),i=s(o.elements.ingredients.value.trim()),a=s(o.elements.instructions.value.trim()),c=parseInt(o.elements.preparationTime.value,10),l=s(o.elements.difficulty.value),u=parseInt(o.elements.servings.value,10),h=s(o.elements.category.value.trim()),d=s(o.elements.imageUrl.value.trim()),f=s(o.elements.notes.value.trim());if(r&&i&&a&&!isNaN(c)&&l&&!isNaN(u)&&h&&d&&f){var p={title:r,ingredients:i.split(",").map((function(t){return t.trim()})),instructions:a.split("\n").reduce((function(t,e,n){return t[n+1]=e.trim(),t}),{}),wasPreviouslyDone:!!t&&t.wasPreviouslyDone,preparationTime:c,difficulty:l,servings:u,category:h,imageUrl:d,notes:f};if(t){var m=new CustomEvent("updateRecipe",{detail:{recipeId:t.id,updatedRecipe:p}});window.dispatchEvent(m)}else{var g=new CustomEvent("newRecipe",{detail:p});window.dispatchEvent(g)}e.remove()}else alert("Please fill in all fields correctly.")})),e}function Vu(t,e){var n=document.createElement("div");return n.classList.add("recipe-card","card"),n.innerHTML='\n    <img src="'.concat(t.imageUrl,'" alt="').concat(t.title,'" class="recipe-image">\n    <div class="recipe-content">\n      <h3 class="recipe-title">').concat(t.title,'</h3>\n      <span class="recipe-category">').concat(t.category,'</span>\n      <p class="recipe-details"><strong>Ingredients:</strong> ').concat(t.ingredients.join(", "),'</p>\n      <p class="recipe-details"><strong>Instructions:</strong></p>\n      <ol class="recipe-instructions">\n        ').concat(Object.values(t.instructions).map((function(t){return"<li>".concat(t,"</li>")})).join(""),'\n      </ol>\n      <p class="recipe-details"><strong>Preparation Time:</strong> ').concat(t.preparationTime,' minutes</p>\n      <p class="recipe-details"><strong>Difficulty:</strong> ').concat(t.difficulty,'</p>\n      <p class="recipe-details"><strong>Servings:</strong> ').concat(t.servings,'</p>\n      <p class="recipe-details"><strong>Notes:</strong> ').concat(t.notes,'</p>\n      <p class="recipe-details"><strong>Completed:</strong> ').concat(t.wasPreviouslyDone?"Yes":"No",'</p>\n    </div>\n    <div class="recipe-footer">\n      <button class="btn btn-secondary btn-edit" data-id="').concat(t.id,'">Edit</button>\n      <button class="btn btn-danger btn-delete" data-id="').concat(t.id,'">Delete</button>\n    </div>\n  '),n.querySelector(".btn-delete").addEventListener("click",(function(){e(t.id)})),n.querySelector(".btn-edit").addEventListener("click",(function(){var e=Ru(t);document.body.appendChild(e)})),n}function Fu(t){return Fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fu(t)}function ju(){ju=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var s=e&&e.prototype instanceof w?e:w,o=Object.create(s.prototype),a=new L(r||[]);return i(o,"_invoke",{value:S(t,n,a)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",m="completed",g={};function w(){}function y(){}function v(){}var b={};l(b,o,(function(){return this}));var E=Object.getPrototypeOf,T=E&&E(E(D([])));T&&T!==n&&r.call(T,o)&&(b=T);var _=v.prototype=w.prototype=Object.create(b);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(i,s,o,a){var c=h(t[i],t,s);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Fu(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):e.resolve(u).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,a)}))}a(c.arg)}var s;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return s=s?s.then(i,i):i()}})}function S(e,n,r){var i=d;return function(s,o){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===s)throw o;return{value:t,done:!0}}for(r.method=s,r.arg=o;;){var a=r.delegate;if(a){var c=I(a,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=h(e,n,r);if("normal"===l.type){if(i=r.done?m:f,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function I(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var s=h(i,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,g;var o=s.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}throw new TypeError(Fu(e)+" is not iterable")}return y.prototype=v,i(_,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},C(k.prototype),l(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new k(u(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(_),l(_,c,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=D,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function Bu(t,e,n,r,i,s,o){try{var a=t[s](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}function Uu(t,e){return $u.apply(this,arguments)}function $u(){var t;return t=ju().mark((function t(e,n){return ju().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.innerHTML="",t.prev=1,t.next=4,vl(Pc(Lu,"recipes"));case 4:t.sent.forEach((function(t){var r=t.data();r.id=t.id;var i=Vu(r,n);e.appendChild(i)})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Error fetching recipes:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})),$u=function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function o(t){Bu(s,r,i,o,a,"next",t)}function a(t){Bu(s,r,i,o,a,"throw",t)}o(void 0)}))},$u.apply(this,arguments)}function qu(t){return qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qu(t)}function zu(){zu=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var s=e&&e.prototype instanceof w?e:w,o=Object.create(s.prototype),a=new L(r||[]);return i(o,"_invoke",{value:S(t,n,a)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",m="completed",g={};function w(){}function y(){}function v(){}var b={};l(b,o,(function(){return this}));var E=Object.getPrototypeOf,T=E&&E(E(D([])));T&&T!==n&&r.call(T,o)&&(b=T);var _=v.prototype=w.prototype=Object.create(b);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(i,s,o,a){var c=h(t[i],t,s);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==qu(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):e.resolve(u).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,a)}))}a(c.arg)}var s;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return s=s?s.then(i,i):i()}})}function S(e,n,r){var i=d;return function(s,o){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===s)throw o;return{value:t,done:!0}}for(r.method=s,r.arg=o;;){var a=r.delegate;if(a){var c=I(a,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=h(e,n,r);if("normal"===l.type){if(i=r.done?m:f,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function I(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var s=h(i,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,g;var o=s.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}throw new TypeError(qu(e)+" is not iterable")}return y.prototype=v,i(_,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},C(k.prototype),l(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new k(u(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(_),l(_,c,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=D,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function Hu(t,e,n,r,i,s,o){try{var a=t[s](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}function Ku(t,e){return Gu.apply(this,arguments)}function Gu(){var t;return t=zu().mark((function t(e,n){var r;return zu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=Mc(Lu,"recipes",e),t.next=4,bl(r,n);case 4:console.log("Recipe updated successfully!"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error updating recipe: ",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})),Gu=function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function o(t){Hu(s,r,i,o,a,"next",t)}function a(t){Hu(s,r,i,o,a,"throw",t)}o(void 0)}))},Gu.apply(this,arguments)}function Wu(t){return Wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wu(t)}function Qu(){Qu=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var s=e&&e.prototype instanceof w?e:w,o=Object.create(s.prototype),a=new L(r||[]);return i(o,"_invoke",{value:S(t,n,a)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",m="completed",g={};function w(){}function y(){}function v(){}var b={};l(b,o,(function(){return this}));var E=Object.getPrototypeOf,T=E&&E(E(D([])));T&&T!==n&&r.call(T,o)&&(b=T);var _=v.prototype=w.prototype=Object.create(b);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(i,s,o,a){var c=h(t[i],t,s);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Wu(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):e.resolve(u).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,a)}))}a(c.arg)}var s;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return s=s?s.then(i,i):i()}})}function S(e,n,r){var i=d;return function(s,o){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===s)throw o;return{value:t,done:!0}}for(r.method=s,r.arg=o;;){var a=r.delegate;if(a){var c=I(a,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=h(e,n,r);if("normal"===l.type){if(i=r.done?m:f,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function I(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var s=h(i,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,g;var o=s.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}throw new TypeError(Wu(e)+" is not iterable")}return y.prototype=v,i(_,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},C(k.prototype),l(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new k(u(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(_),l(_,c,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=D,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function Yu(t,e,n,r,i,s,o){try{var a=t[s](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}function Xu(t){return Ju.apply(this,arguments)}function Ju(){var t;return t=Qu().mark((function t(e){var n;return Qu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=Mc(Lu,"recipes",e),t.next=4,Tl(Sc((r=n).firestore,Fc),[new Pi(r._key,Ei.none())]);case 4:console.log("Recipe deleted successfully!"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error deleting recipe:",t.t0);case 10:case"end":return t.stop()}var r}),t,null,[[0,7]])})),Ju=function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function o(t){Yu(s,r,i,o,a,"next",t)}function a(t){Yu(s,r,i,o,a,"throw",t)}o(void 0)}))},Ju.apply(this,arguments)}var Zu=n(465),th=n.n(Zu);function eh(t){return eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eh(t)}function nh(){nh=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var s=e&&e.prototype instanceof w?e:w,o=Object.create(s.prototype),a=new L(r||[]);return i(o,"_invoke",{value:S(t,n,a)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",m="completed",g={};function w(){}function y(){}function v(){}var b={};l(b,o,(function(){return this}));var E=Object.getPrototypeOf,T=E&&E(E(D([])));T&&T!==n&&r.call(T,o)&&(b=T);var _=v.prototype=w.prototype=Object.create(b);function C(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(i,s,o,a){var c=h(t[i],t,s);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==eh(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):e.resolve(u).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,a)}))}a(c.arg)}var s;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return s=s?s.then(i,i):i()}})}function S(e,n,r){var i=d;return function(s,o){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===s)throw o;return{value:t,done:!0}}for(r.method=s,r.arg=o;;){var a=r.delegate;if(a){var c=I(a,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=h(e,n,r);if("normal"===l.type){if(i=r.done?m:f,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=m,r.method="throw",r.arg=l.arg)}}}function I(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var s=h(i,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,g;var o=s.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function D(e){if(e||""===e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,s=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}throw new TypeError(eh(e)+" is not iterable")}return y.prototype=v,i(_,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},C(k.prototype),l(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,s){void 0===s&&(s=Promise);var o=new k(u(t,n,r,i),s);return e.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},C(_),l(_,c,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=D,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function rh(t,e,n,r,i,s,o){try{var a=t[s](o),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}function ih(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var s=t.apply(e,n);function o(t){rh(s,r,i,o,a,"next",t)}function a(t){rh(s,r,i,o,a,"throw",t)}o(void 0)}))}}console.log("Main.js loaded");var sh=document.getElementById("add-recipe-form"),oh=document.getElementById("navbar"),ah=document.getElementById("app"),ch=function(){var t=document.createElement("nav");return t.classList.add("navbar","navbar-expand-lg","navbar-light"),t.innerHTML='\n    <div class="container-fluid">\n      <a class="navbar-brand" href="#">\n        <img src="assets/icon.png" alt="Logo of Recipe App" width="30" height="30" class="d-inline-block align-text-top">\n        Recipe App\n      </a>\n      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">\n        <span class="navbar-toggler-icon"></span>\n      </button>\n      <div class="collapse navbar-collapse" id="navbarNav">\n        <ul class="navbar-nav ms-auto">\n          <li class="nav-item">\n            <span class="nav-link name">German Andres Sanche Motta</span>\n          </li>\n        </ul>\n      </div>\n    </div>\n  ',t}();oh.appendChild(ch);var lh=function(){var t=document.createElement("div");return t.classList.add("hero"),t.innerHTML='\n    <div class="container">\n      <div class="row">\n        <div class="col-lg-6 col-md-12 hero-content">\n          <h1>Welcome to the recipe app</h1>\n          <h3>Take a look at your recipes or create a new one</h3>\n        </div>\n        <div class="col-lg-6 col-md-12 hero-image">\n          <img src="https://images.unsplash.com/photo-1512621776951-a57141f2eefd?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Delicious food">\n        </div>\n      </div>\n    </div>\n  ',t}();ah.insertBefore(lh,sh);var uh,hh=((uh=document.createElement("section")).classList.add("recipes-section","recipe-list-container","my-5"),uh.innerHTML='\n    <div class="header">\n      <h2>All Recipes</h2>\n      <button class="btn btn-primary btn-add" id="addRecipeBtn">Add Recipe</button>\n    </div>\n    <div id="recipesList" class="recipe-list"></div>\n  ',uh.querySelector("#addRecipeBtn").addEventListener("click",(function(){var t=Ru();document.body.appendChild(t)})),uh);function dh(){return fh.apply(this,arguments)}function fh(){return(fh=ih(nh().mark((function t(){var e;return nh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=document.getElementById("recipesList"))){t.next=5;break}return e.innerHTML="",t.next=5,Uu(e,ph);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ph(t){return mh.apply(this,arguments)}function mh(){return(mh=ih(nh().mark((function t(e){return nh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,th().fire({title:"Are you sure?",text:"Do you really want to delete this recipe?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"});case 2:if(!t.sent.isConfirmed){t.next=14;break}return t.prev=4,t.next=7,Xu(e);case 7:th().fire({title:"Deleted!",text:"Your recipe has been deleted.",icon:"success",timer:2e3,showConfirmButton:!1}),dh(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),th().fire({title:"Error!",text:"There was an error deleting your recipe.",icon:"error",timer:2e3,showConfirmButton:!1});case 14:case"end":return t.stop()}}),t,null,[[4,11]])})))).apply(this,arguments)}ah.appendChild(hh),window.addEventListener("newRecipe",function(){var t=ih(nh().mark((function t(e){var n;return nh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.detail,t.prev=1,t.next=4,Pu(n);case 4:th().fire({title:"Success!",text:"Your recipe has been created successfully!",icon:"success",timer:2e3,showConfirmButton:!1}),dh(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.error("Error adding recipe from modal:",t.t0),th().fire({title:"Error!",text:"There was an error adding your recipe.",icon:"error",timer:2e3,showConfirmButton:!1});case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()),window.addEventListener("updateRecipe",function(){var t=ih(nh().mark((function t(e){var n,r,i;return nh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.detail,r=n.recipeId,i=n.updatedRecipe,t.prev=1,t.next=4,Ku(r,i);case 4:th().fire({title:"Updated!",text:"Recipe updated successfully!",icon:"success",timer:2e3,showConfirmButton:!1}),dh(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),th().fire({title:"Error!",text:"Failed to update recipe.",icon:"error",timer:2e3,showConfirmButton:!1});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()),sh.addEventListener("submit",function(){var t=ih(nh().mark((function t(e){var n,r,i,s,o,a,c,l,u,h;return nh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Form submitted"),e.preventDefault(),n=e.target.elements.title.value,r=e.target.elements.ingredients.value.split(","),i=e.target.elements.instructions.value.split("\n").reduce((function(t,e,n){return t[n+1]=e,t}),{}),s=parseInt(e.target.elements.preparationTime.value,10),o=e.target.elements.difficulty.value,a=parseInt(e.target.elements.servings.value,10),c=e.target.elements.category.value,l=e.target.elements.imageUrl.value,u=e.target.elements.notes.value,h={title:n,ingredients:r,instructions:i,wasPreviouslyDone:!1,preparationTime:s,difficulty:o,servings:a,category:c,imageUrl:l,notes:u},t.prev=12,t.next=15,Pu(h);case 15:e.target.reset(),dh(),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(12),console.error("Error adding recipe:",t.t0);case 22:case"end":return t.stop()}}),t,null,[[12,19]])})));return function(e){return t.apply(this,arguments)}}()),dh()})()})();